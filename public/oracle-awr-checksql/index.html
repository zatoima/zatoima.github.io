<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://zatoima.github.io/favicon.ico><title>AWR(DBA_HIST表)を使用した確認SQL | my opinion is my own</title><meta name=title content="AWR(DBA_HIST表)を使用した確認SQL"><meta name=description content><meta name=keywords content="Oracle,AWR,"><meta property="og:title" content="AWR(DBA_HIST表)を使用した確認SQL"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://zatoima.github.io/oracle-awr-checksql/"><meta property="og:image" content="https://zatoima.github.io/images/share.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2019-01-21T00:00:00+00:00"><meta property="article:modified_time" content="2019-01-21T00:00:00+00:00"><meta property="og:site_name" content="my opinion is my own"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://zatoima.github.io/images/share.png"><meta name=twitter:title content="AWR(DBA_HIST表)を使用した確認SQL"><meta name=twitter:description content><meta itemprop=name content="AWR(DBA_HIST表)を使用した確認SQL"><meta itemprop=description content><meta itemprop=datePublished content="2019-01-21T00:00:00+00:00"><meta itemprop=dateModified content="2019-01-21T00:00:00+00:00"><meta itemprop=wordCount content="253"><meta itemprop=image content="https://zatoima.github.io/images/share.png"><meta itemprop=keywords content="Oracle,AWR,"><meta name=referrer content="no-referrer-when-downgrade"><link rel=alternate type=text/plain href=/llms.txt title=LLMs.txt><link rel=alternate type=text/plain href=/llms-full.txt title=LLMs-full.txt><script>(function(){var e=localStorage.getItem("theme");(e==="dark"||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.setAttribute("data-theme","dark")})()</script><link rel=stylesheet href=/css/zenn.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-STFZ9QMXGM"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-STFZ9QMXGM")</script></head><body><div class=site-wrapper><header class=site-header><div class=header-inner><a href=/ class=site-logo>my opinion is my own</a><nav class=header-nav><a href=/about/>About</a>
<a href=/blog/>Blog</a>
<a href=/index.xml>RSS</a>
<a href=/other/>Other</a>
<a href=/llms.txt title="LLMs.txt - AI/LLM向けサイト情報">llms.txt</a></nav><div class=header-actions><button id=search-btn class=header-icon-btn aria-label=検索><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg></button>
<button id=dark-mode-btn class=header-icon-btn aria-label=ダークモード切替>🌙</button>
<button id=hamburger-btn class=hamburger-btn aria-label=メニュー>
<span></span><span></span><span></span></button></div></div></header><div id=search-overlay class=search-overlay><div class=search-modal><input type=text id=search-input class=search-input placeholder="記事を検索... (Ctrl+K)" autocomplete=off><div id=search-results class=search-results></div></div></div><div id=nav-overlay class=nav-overlay></div><main class=site-main><div class=article-layout><article class=article-main><nav class=breadcrumb aria-label=パンくずリスト><a href=/>ホーム</a>
<span class=breadcrumb-sep>></span>
<a href=/blog/>Blog</a>
<span class=breadcrumb-sep>></span>
<span class=breadcrumb-current>AWR(DBA_HIST表)を使用した確認SQL</span></nav><div class=article-card><div class=article-header><div class=article-emoji><img src=/images/tags/oracle.svg alt=Oracle class=tag-icon loading=lazy></div><h1>AWR(DBA_HIST表)を使用した確認SQL</h1><div class=article-meta><time class=article-date datetime=2019-01-21>2019/01/21 に公開</time>
<span class=reading-time>📖 約1分</span></div><div class=article-tags><a href=https://zatoima.github.io/blog/oracle/ class=tag-badge><img src=/images/tags/oracle.svg alt=Oracle class=tag-badge-icon loading=lazy>Oracle</a>
<a href=https://zatoima.github.io/blog/awr/ class=tag-badge>AWR</a></div></div><div class=article-content><h3 id=はじめに>はじめに</h3><p>AWR（Automatic Workload Repository）とはOracle Databaseの稼働統計とワークロード情報のスナップショットを自動的に収集・管理する機能です。</p><p>一般的にAWRを使用した分析はAWRレポートをhtml形式、text形式で出力してレポートからパフォーマンスや稼働統計を確認して分析、改善案を整理します。</p><p>AWRレポートを出力する際には各種ディクショナリ(DBA_HIST表)を参照することからそのディクショナリを直接見て色々な分析を行うことが出来ます。</p><p>AWR利用には「Diagnostic Pack」のライセンスが追加で必要になります。</p><h3 id=awrに格納された過去のsql監視結果をレポートするoracle-12c>AWRに格納された過去のSQL監視結果をレポートする（Oracle 12c～）</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ff79c6>SELECT</span> report_id,
</span></span><span style=display:flex><span>       GENERATION_TIME,
</span></span><span style=display:flex><span>       key1
</span></span><span style=display:flex><span><span style=color:#ff79c6>FROM</span> dba_hist_reports
</span></span><span style=display:flex><span><span style=color:#ff79c6>WHERE</span> component_name<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;sqlmonitor&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>AND</span> key1<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;5j5wp4d5s9pqz&#39;</span>;
</span></span></code></pre></div><h3 id=awrに格納されているsqlを確認する>AWRに格納されているSQLを確認する</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ff79c6>select</span>
</span></span><span style=display:flex><span>    a.begin_interval_time,
</span></span><span style=display:flex><span>    b.sql_id,
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>c</span>.sql_text
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> DBA_HIST_SNAPSHOT a, DBA_HIST_SQLSTAT st, DBA_HIST_SQLTEXT <span style=color:#ff79c6>c</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>where</span> a.dbid<span style=color:#ff79c6>=</span>b.dbid <span style=color:#ff79c6>and</span> a.instance_number<span style=color:#ff79c6>=</span>b.instance_number <span style=color:#ff79c6>and</span> a.snap_id<span style=color:#ff79c6>=</span>b.snap_id
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>and</span> b.dbid<span style=color:#ff79c6>=</span><span style=color:#ff79c6>c</span>.dbid <span style=color:#ff79c6>and</span> b.sql_id<span style=color:#ff79c6>=</span><span style=color:#ff79c6>c</span>.sql_id
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>and</span> <span style=color:#ff79c6>c</span>.sql_text <span style=color:#ff79c6>like</span> <span style=color:#f1fa8c>&#39;%&lt;検索SQL&gt;%&#39;</span>;
</span></span></code></pre></div><h3 id=awrに格納された過去のsql監視結果をレポートするoracle-12c-1>AWRに格納された過去のSQL監視結果をレポートする（Oracle 12c～）</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ff79c6>SELECT</span> report_id,
</span></span><span style=display:flex><span>       GENERATION_TIME,
</span></span><span style=display:flex><span>       key1
</span></span><span style=display:flex><span><span style=color:#ff79c6>FROM</span> dba_hist_reports
</span></span><span style=display:flex><span><span style=color:#ff79c6>WHERE</span> component_name<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;sqlmonitor&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>AND</span> key1<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;5j5wp4d5s9pqz&#39;</span>;
</span></span></code></pre></div><h3 id=awr-snapshotの確認>AWR snapshotの確認</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ff79c6>SELECT</span> DBID
</span></span><span style=display:flex><span>     , SNAP_ID
</span></span><span style=display:flex><span>     , <span style=color:#ff79c6>MIN</span>(TO_CHAR(BEGIN_INTERVAL_TIME, <span style=color:#f1fa8c>&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>)) <span style=color:#ff79c6>AS</span> BEGIN_INTERVAL_TIME
</span></span><span style=display:flex><span>     , <span style=color:#ff79c6>MIN</span>(TO_CHAR(END_INTERVAL_TIME  , <span style=color:#f1fa8c>&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>)) <span style=color:#ff79c6>AS</span> END_INTERVAL_TIME
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>FROM</span> DBA_HIST_SNAPSHOT
</span></span><span style=display:flex><span> <span style=color:#ff79c6>WHERE</span> DBID <span style=color:#ff79c6>=</span> xxxxxxxxx
</span></span><span style=display:flex><span> <span style=color:#ff79c6>GROUP</span> <span style=color:#ff79c6>BY</span> DBID
</span></span><span style=display:flex><span>        , SNAP_ID
</span></span><span style=display:flex><span> <span style=color:#ff79c6>ORDER</span> <span style=color:#ff79c6>BY</span> <span style=color:#bd93f9>1</span>,<span style=color:#bd93f9>2</span>,<span style=color:#bd93f9>3</span>,<span style=color:#bd93f9>4</span>;
</span></span></code></pre></div><h3 id=dba_undo_statから長時間実行されているsql等の確認累積>dba_undo_statから長時間実行されているSQL等の確認（累積）</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ff79c6>select</span> MAXQUERYSQLID,<span style=color:#ff79c6>sum</span>(MAXQUERYLEN)
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> dba_hist_undostat <span style=color:#ff79c6>where</span> dbid<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;xxxxxxxxx&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>AND</span> BEGIN_TIME <span style=color:#ff79c6>&gt;=</span> TO_TIMESTAMP(<span style=color:#f1fa8c>&#39;2016/02/10 20:00:00&#39;</span>, <span style=color:#f1fa8c>&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#ff79c6>AND</span> END_TIME <span style=color:#ff79c6>&lt;=</span>  TO_TIMESTAMP(<span style=color:#f1fa8c>&#39;2016/10/31 20:15:00&#39;</span>, <span style=color:#f1fa8c>&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#ff79c6>group</span> <span style=color:#ff79c6>by</span> MAXQUERYSQLID
</span></span><span style=display:flex><span><span style=color:#ff79c6>order</span> <span style=color:#ff79c6>by</span> <span style=color:#bd93f9>2</span>;
</span></span></code></pre></div><h3 id=dba_undo_statから長時間実行されているsql等の確認個別>dba_undo_statから長時間実行されているSQL等の確認（個別）</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ff79c6>select</span> MAXQUERYSQLID,<span style=color:#ff79c6>sum</span>(MAXQUERYLEN)
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> dba_hist_undostat <span style=color:#ff79c6>where</span> dbid<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;xxxxxxxxx&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>AND</span> BEGIN_TIME <span style=color:#ff79c6>&gt;=</span> TO_TIMESTAMP(<span style=color:#f1fa8c>&#39;2016/02/10 20:00:00&#39;</span>, <span style=color:#f1fa8c>&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#ff79c6>AND</span> END_TIME <span style=color:#ff79c6>&lt;=</span>  TO_TIMESTAMP(<span style=color:#f1fa8c>&#39;2016/10/31 20:15:00&#39;</span>, <span style=color:#f1fa8c>&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#ff79c6>group</span> <span style=color:#ff79c6>by</span> MAXQUERYSQLID
</span></span><span style=display:flex><span><span style=color:#ff79c6>order</span> <span style=color:#ff79c6>by</span> <span style=color:#bd93f9>2</span>;
</span></span></code></pre></div><h3 id=awrから共有プールの拡張履歴を確認する>AWRから共有プールの拡張履歴を確認する</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>col CURRENT_SIZE <span style=color:#ff79c6>for</span> <span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>
</span></span><span style=display:flex><span>col MIN_SIZE <span style=color:#ff79c6>for</span> <span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>
</span></span><span style=display:flex><span>col MAX_SIZE <span style=color:#ff79c6>for</span> <span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>
</span></span><span style=display:flex><span>col USER_SPECIFIED_SIZE <span style=color:#ff79c6>for</span> <span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>
</span></span><span style=display:flex><span>col COMPONENT <span style=color:#ff79c6>for</span> a30
</span></span><span style=display:flex><span>col diff <span style=color:#ff79c6>for</span> <span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>,<span style=color:#bd93f9>999</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>set</span> pages <span style=color:#bd93f9>20000</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>set</span> lin <span style=color:#bd93f9>20000</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>alter</span> <span style=color:#ff79c6>session</span> <span style=color:#ff79c6>set</span> NLS_DATE_FORMAT<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>select</span> <span style=color:#ff79c6>*</span> <span style=color:#ff79c6>from</span> DBA_HIST_MEM_DYNAMIC_COMP 
</span></span><span style=display:flex><span><span style=color:#ff79c6>where</span> LAST_OPER_MODE <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;IMMEDIATE&#39;</span> <span style=color:#ff79c6>and</span>
</span></span><span style=display:flex><span>dbid<span style=color:#ff79c6>=</span>xxxxxxxxx
</span></span><span style=display:flex><span><span style=color:#ff79c6>order</span> <span style=color:#ff79c6>by</span> LAST_OPER_TIME <span style=color:#ff79c6>desc</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>select</span> <span style=color:#ff79c6>*</span> <span style=color:#ff79c6>from</span> DBA_HIST_MEM_DYNAMIC_COMP 
</span></span><span style=display:flex><span><span style=color:#ff79c6>where</span> LAST_OPER_MODE <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;DEFERRED&#39;</span> <span style=color:#ff79c6>and</span>
</span></span><span style=display:flex><span>dbid<span style=color:#ff79c6>=</span>xxxxxxxxx
</span></span><span style=display:flex><span><span style=color:#ff79c6>order</span> <span style=color:#ff79c6>by</span> LAST_OPER_TIME;
</span></span></code></pre></div><h3 id=sql_idを指定し実行時間を取得するsql>SQL_IDを指定し、実行時間を取得するSQL</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ff79c6>select</span> sql_id,<span style=color:#ff79c6>sum</span>(EXECUTIONS_DELTA),<span style=color:#ff79c6>sum</span>(ELAPSED_TIME_DELTA) ,round(<span style=color:#ff79c6>sum</span>(ELAPSED_TIME_DELTA)<span style=color:#ff79c6>/</span><span style=color:#ff79c6>sum</span>(EXECUTIONS_DELTA)<span style=color:#ff79c6>/</span><span style=color:#bd93f9>100000</span>,<span style=color:#bd93f9>0</span>) sec
</span></span><span style=display:flex><span><span style=color:#ff79c6>from</span> dba_hist_sqlstat <span style=color:#ff79c6>natural</span> <span style=color:#ff79c6>join</span> dba_hist_snapshot
</span></span><span style=display:flex><span><span style=color:#ff79c6>where</span> sql_id <span style=color:#ff79c6>in</span> 
</span></span><span style=display:flex><span>(
</span></span><span style=display:flex><span>  <span style=color:#f1fa8c>&#39;2znznu2dkbjq1&#39;</span>
</span></span><span style=display:flex><span>, <span style=color:#f1fa8c>&#39;39up7r1bnk3mn&#39;</span>
</span></span><span style=display:flex><span>, <span style=color:#f1fa8c>&#39;5wna3gkz7wx7v&#39;</span> 
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#ff79c6>AND</span> begin_interval_time <span style=color:#ff79c6>between</span> to_timestamp(<span style=color:#f1fa8c>&#39;20160201:00&#39;</span>,<span style=color:#f1fa8c>&#39;YYYYMMDD:HH24&#39;</span>) 
</span></span><span style=display:flex><span><span style=color:#ff79c6>AND</span> to_date(<span style=color:#f1fa8c>&#39;20160213:00&#39;</span>,<span style=color:#f1fa8c>&#39;YYYYMMDD:HH24&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#ff79c6>group</span> <span style=color:#ff79c6>by</span> sql_id;
</span></span></code></pre></div><h3 id=awrスナップショットから実行計画を出力>AWRスナップショットから実行計画を出力</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ff79c6>select</span> plan_table_output <span style=color:#ff79c6>from</span> <span style=color:#ff79c6>table</span>(DBMS_XPLAN.DISPLAY_AWR(<span style=color:#f1fa8c>&#39;ff6uqt4322h9&#39;</span>));
</span></span></code></pre></div><h3 id=awrの取得削除>AWRの取得・削除</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ff79c6>exec</span> dbms_workload_repository.create_snapshot();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>exec</span> DBMS_WORKLOAD_REPOSITORY.DROP_SNAPSHOT_RANGE (low_snap_id <span style=color:#ff79c6>=&gt;</span> <span style=color:#bd93f9>1</span>,high_snap_id <span style=color:#ff79c6>=&gt;</span> <span style=color:#bd93f9>9999999</span>);
</span></span></code></pre></div></div></div><nav class=prev-next-nav><a href=https://zatoima.github.io/goldengate-check-exection-sql/ class="prev-next-link prev-link"><span class=prev-next-label>← 前の記事</span>
<span class=prev-next-title>GoldenGateから実行されたSQLを確認する方法(Integrated Replicat)</span></a>
<a href=https://zatoima.github.io/linux-home-directory-move.html class="prev-next-link next-link"><span class=prev-next-label>次の記事 →</span>
<span class=prev-next-title>Linuxユーザの$HOME配下の日本語デフォルトディレクトリを移動させる</span></a></nav><div class=share-buttons><span class=share-label>共有:</span>
<a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fzatoima.github.io%2foracle-awr-checksql%2f&text=AWR%28DBA_HIST%E8%A1%A8%29%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%9F%E7%A2%BA%E8%AA%8DSQL" target=_blank rel="noopener noreferrer" class="share-btn share-twitter" aria-label=Xで共有><svg width="18" height="18" viewBox="0 0 24 24" fill="currentcolor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a><a href=https://b.hatena.ne.jp/entry/https://zatoima.github.io/oracle-awr-checksql/ target=_blank rel="noopener noreferrer" class="share-btn share-hatena" aria-label=はてなブックマークに追加>B!</a></div><div class=related-articles><h2 class=related-articles-title>関連しているかもしれない記事</h2><ul class=related-list><li><a href=/goldengate-check-exection-sql/>GoldenGateから実行されたSQLを確認する方法(Integrated Replicat)</a></li><li><a href=/goldengate-info-param.html>GoldenGateパラメータの定義情報の取得(info paramコマンド)</a></li></ul></div><div class=post-tags><a href=https://zatoima.github.io/blog/oracle/ class=tag-badge><img src=/images/tags/oracle.svg alt=Oracle class=tag-badge-icon loading=lazy>Oracle</a>
<a href=https://zatoima.github.io/blog/awr/ class=tag-badge>AWR</a></div></article><aside class=article-sidebar><div class=toc-container><div class=toc-title>目次</div><nav id=TableOfContents><ul><li><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#awrに格納された過去のsql監視結果をレポートするoracle-12c>AWRに格納された過去のSQL監視結果をレポートする（Oracle 12c～）</a></li><li><a href=#awrに格納されているsqlを確認する>AWRに格納されているSQLを確認する</a></li><li><a href=#awrに格納された過去のsql監視結果をレポートするoracle-12c-1>AWRに格納された過去のSQL監視結果をレポートする（Oracle 12c～）</a></li><li><a href=#awr-snapshotの確認>AWR snapshotの確認</a></li><li><a href=#dba_undo_statから長時間実行されているsql等の確認累積>dba_undo_statから長時間実行されているSQL等の確認（累積）</a></li><li><a href=#dba_undo_statから長時間実行されているsql等の確認個別>dba_undo_statから長時間実行されているSQL等の確認（個別）</a></li><li><a href=#awrから共有プールの拡張履歴を確認する>AWRから共有プールの拡張履歴を確認する</a></li><li><a href=#sql_idを指定し実行時間を取得するsql>SQL_IDを指定し、実行時間を取得するSQL</a></li><li><a href=#awrスナップショットから実行計画を出力>AWRスナップショットから実行計画を出力</a></li><li><a href=#awrの取得削除>AWRの取得・削除</a></li></ul></li></ul></nav></div></aside></div></main><footer class=site-footer><div class=footer-inner><div class=footer-description>memo blog</div><div class=footer-links><a href=/>ホーム</a>
<a href=/blog/>記事一覧</a>
<a href=/tags/>タグ一覧</a>
<a href=/about/>About</a></div><div class=footer-social><a href=https://github.com/zatoima target=_blank rel="noopener noreferrer" aria-label=GitHub><svg width="18" height="18" viewBox="0 0 24 24" fill="currentcolor"><path d="M12 0C5.374.0.0 5.373.0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931.0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176.0.0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221.0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg></a><a href=https://x.com/zatoima1 target=_blank rel="noopener noreferrer" aria-label="X (Twitter)"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentcolor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a><a href=/index.xml aria-label=RSS><svg width="16" height="16" viewBox="0 0 24 24" fill="currentcolor"><path d="M6.18 15.64a2.18 2.18.0 012.18 2.18c0 1.19-.98 2.18-2.18 2.18C5 20 4 19.01 4 17.82a2.18 2.18.0 012.18-2.18M4 4.44A15.56 15.56.0 0119.56 20h-2.83A12.73 12.73.0 004 7.27V4.44m0 5.66a9.9 9.9.0 019.9 9.9h-2.83A7.07 7.07.0 004 12.93V10.1z"/></svg></a></div><div class=footer-copyright>Copyright © 2019, zatoima.</div></div></footer></div><script src=/js/lightbox.js defer></script>
<script src=/js/toc-highlight.js defer></script>
<script src=/js/code-copy.js defer></script>
<script src=/js/dark-mode.js defer></script>
<script src=/js/mobile-nav.js defer></script>
<script src=/js/search.js defer></script></body></html>