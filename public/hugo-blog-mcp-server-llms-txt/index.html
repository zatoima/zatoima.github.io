<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://zatoima.github.io/favicon.ico><title>Hugo製ブログにMCP Serverとllms.txtを実装する | my opinion is my own</title><meta name=title content="Hugo製ブログにMCP Serverとllms.txtを実装する"><meta name=description content><meta name=keywords content="Hugo,Claude Code,"><meta property="og:title" content="Hugo製ブログにMCP Serverとllms.txtを実装する"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://zatoima.github.io/hugo-blog-mcp-server-llms-txt/"><meta property="og:image" content="https://zatoima.github.io/images/share.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2026-02-23T00:00:00+00:00"><meta property="article:modified_time" content="2026-02-23T00:00:00+00:00"><meta property="og:site_name" content="my opinion is my own"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://zatoima.github.io/images/share.png"><meta name=twitter:title content="Hugo製ブログにMCP Serverとllms.txtを実装する"><meta name=twitter:description content><meta itemprop=name content="Hugo製ブログにMCP Serverとllms.txtを実装する"><meta itemprop=description content><meta itemprop=datePublished content="2026-02-23T00:00:00+00:00"><meta itemprop=dateModified content="2026-02-23T00:00:00+00:00"><meta itemprop=wordCount content="464"><meta itemprop=image content="https://zatoima.github.io/images/share.png"><meta itemprop=keywords content="Hugo,Claude Code,"><meta name=referrer content="no-referrer-when-downgrade"><link rel=alternate type=text/plain href=/llms.txt title=LLMs.txt><link rel=alternate type=text/plain href=/llms-full.txt title=LLMs-full.txt><script>(function(){var e=localStorage.getItem("theme");(e==="dark"||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.setAttribute("data-theme","dark")})()</script><link rel=stylesheet href=/css/zenn.css><script async src="https://www.googletagmanager.com/gtag/js?id=G-STFZ9QMXGM"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-STFZ9QMXGM")</script></head><body><div class=site-wrapper><header class=site-header><div class=header-inner><a href=/ class=site-logo>my opinion is my own</a><nav class=header-nav><a href=/about/>About</a>
<a href=/blog/>Blog</a>
<a href=/index.xml>RSS</a>
<a href=/other/>Other</a>
<a href=/llms.txt title="LLMs.txt - AI/LLM向けサイト情報">llms.txt</a></nav><div class=header-actions><button id=search-btn class=header-icon-btn aria-label=検索><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg></button>
<button id=dark-mode-btn class=header-icon-btn aria-label=ダークモード切替>🌙</button>
<button id=hamburger-btn class=hamburger-btn aria-label=メニュー>
<span></span><span></span><span></span></button></div></div></header><div id=search-overlay class=search-overlay><div class=search-modal><input type=text id=search-input class=search-input placeholder="記事を検索... (Ctrl+K)" autocomplete=off><div id=search-results class=search-results></div></div></div><div id=nav-overlay class=nav-overlay></div><main class=site-main><div class=article-layout><article class=article-main><nav class=breadcrumb aria-label=パンくずリスト><a href=/>ホーム</a>
<span class=breadcrumb-sep>></span>
<a href=/blog/>Blog</a>
<span class=breadcrumb-sep>></span>
<span class=breadcrumb-current>Hugo製ブログにMCP Serverとllms.txtを実装する</span></nav><div class=article-card><div class=article-header><div class=article-emoji><img src=/images/tags/hugo.svg alt=Hugo class=tag-icon loading=lazy></div><h1>Hugo製ブログにMCP Serverとllms.txtを実装する</h1><div class=article-meta><time class=article-date datetime=2026-02-23>2026/02/23 に公開</time>
<span class=reading-time>📖 約1分</span></div><div class=article-tags><a href=https://zatoima.github.io/blog/hugo/ class=tag-badge><img src=/images/tags/hugo.svg alt=Hugo class=tag-badge-icon loading=lazy>Hugo</a>
<a href=https://zatoima.github.io/blog/claude-code/ class=tag-badge><img src=/images/tags/claude.svg alt="Claude Code" class=tag-badge-icon loading=lazy>Claude Code</a></div></div><div class=article-content><h2 id=はじめに>はじめに</h2><p>自分のHugoブログ（GitHub Pages）に対して、以下2つのアプローチでAI/LLM向けのインターフェースを実装した。</p><ol><li><strong>MCP Server</strong> - Claude Codeから記事の検索・閲覧ができるMCPサーバー（リポジトリのクローン不要、HTTPフェッチ方式）</li><li><strong>llms.txt</strong> - Webサイト上でLLM向けにコンテンツを公開する標準フォーマット</li></ol><h2 id=mcpmodel-context-protocolとは>MCP（Model Context Protocol）とは</h2><p>MCPはAnthropicが提唱するプロトコルで、AIモデルが外部のデータソースやツールと連携するための標準的な仕組みである。MCP Serverを作ることで、Claude CodeなどのAIツールからブログの記事検索・閲覧が可能になる。</p><h2 id=mcp-serverの実装>MCP Serverの実装</h2><h3 id=データ取得方式>データ取得方式</h3><p>当初はリポジトリをクローンしてローカルのMarkdownファイルを直接読む方式だったが、利用者にクローンを強いるのは不便なため、<strong>サイトが公開している<code>llms-full.txt</code>をHTTPで取得する方式</strong>に変更した。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>┌──────────────┐     HTTP GET      ┌──────────────────────┐
</span></span><span style=display:flex><span>│  MCP Server  │ ───────────────── │ zatoima.github.io    │
</span></span><span style=display:flex><span>│  (Node.js)   │  /llms-full.txt   │ (GitHub Pages)       │
</span></span><span style=display:flex><span>└──────────────┘                   └──────────────────────┘
</span></span><span style=display:flex><span>       │
</span></span><span style=display:flex><span>       │ stdio
</span></span><span style=display:flex><span>       ▼
</span></span><span style=display:flex><span>┌──────────────┐
</span></span><span style=display:flex><span>│  Claude Code │
</span></span><span style=display:flex><span>└──────────────┘
</span></span></code></pre></div><p>これにより、リポジトリのクローンは不要になった。MCP Serverのソースコードだけ取得してビルドすればよい。データは10分間キャッシュされ、キャッシュ期限後は自動で再取得される。</p><h3 id=構成>構成</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>mcp-server/
</span></span><span style=display:flex><span>├── package.json
</span></span><span style=display:flex><span>├── tsconfig.json
</span></span><span style=display:flex><span>├── src/
</span></span><span style=display:flex><span>│   └── index.ts
</span></span><span style=display:flex><span>└── dist/
</span></span><span style=display:flex><span>    └── index.js
</span></span></code></pre></div><p>依存ライブラリは <code>@modelcontextprotocol/sdk</code> のみ。Node.js標準の<code>fetch</code>で<code>llms-full.txt</code>を取得し、テキストパースで記事データを抽出する。</p><h3 id=提供ツール>提供ツール</h3><p>MCP Serverでは5つのツールを実装した。</p><table><thead><tr><th>ツール名</th><th>説明</th></tr></thead><tbody><tr><td><code>search_posts</code></td><td>キーワードでタイトル・本文・タグを全文検索</td></tr><tr><td><code>read_post</code></td><td>slugまたはタイトルの一部から記事全文を取得</td></tr><tr><td><code>list_posts</code></td><td>記事一覧の取得（タグ・カテゴリ・年でフィルタ可）</td></tr><tr><td><code>list_tags</code></td><td>全タグと記事数の一覧</td></tr><tr><td><code>blog_stats</code></td><td>ブログの統計情報（記事数、年別投稿数、人気タグ）</td></tr></tbody></table><h3 id=実装のポイント>実装のポイント</h3><p><code>llms-full.txt</code>は<code>---</code>で区切られた記事の連続テキストであるため、これをパースして構造化データに変換する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#ff79c6>import</span> { McpServer } <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#34;@modelcontextprotocol/sdk/server/mcp.js&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#ff79c6>import</span> { StdioServerTransport } <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#34;@modelcontextprotocol/sdk/server/stdio.js&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#ff79c6>import</span> { z } <span style=color:#ff79c6>from</span> <span style=color:#f1fa8c>&#34;zod&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>const</span> SITE_URL <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#34;https://zatoima.github.io&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>// llms-full.txtからデータを取得・パース
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span><span style=color:#ff79c6>async</span> <span style=color:#8be9fd;font-style:italic>function</span> getPosts()<span style=color:#ff79c6>:</span> Promise&lt;<span style=color:#ff79c6>BlogPost</span>[]&gt; {
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>const</span> res <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>await</span> fetch(<span style=color:#f1fa8c>`</span><span style=color:#f1fa8c>${</span>SITE_URL<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>/llms-full.txt`</span>);
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>const</span> text <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>await</span> res.text();
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>return</span> parseLlmsFullTxt(text); <span style=color:#6272a4>// テキストを記事データに変換
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>// ツール登録の例: 記事検索
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>server.tool(
</span></span><span style=display:flex><span>  <span style=color:#f1fa8c>&#34;search_posts&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f1fa8c>&#34;ブログ記事をキーワードで検索する&#34;</span>,
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    query: <span style=color:#8be9fd>z.string</span>().describe(<span style=color:#f1fa8c>&#34;検索キーワード&#34;</span>),
</span></span><span style=display:flex><span>    limit: <span style=color:#8be9fd>z.number</span>().optional().<span style=color:#ff79c6>default</span>(<span style=color:#bd93f9>10</span>),
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>async</span> ({ query, limit }) <span style=color:#ff79c6>=&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>const</span> posts <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>await</span> getPosts();
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>const</span> q <span style=color:#ff79c6>=</span> query.toLowerCase();
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>const</span> results <span style=color:#ff79c6>=</span> posts
</span></span><span style=display:flex><span>      .filter(
</span></span><span style=display:flex><span>        (p) <span style=color:#ff79c6>=&gt;</span>
</span></span><span style=display:flex><span>          p.title.toLowerCase().includes(q) <span style=color:#ff79c6>||</span>
</span></span><span style=display:flex><span>          p.content.toLowerCase().includes(q) <span style=color:#ff79c6>||</span>
</span></span><span style=display:flex><span>          p.tags.some((t) <span style=color:#ff79c6>=&gt;</span> t.toLowerCase().includes(q))
</span></span><span style=display:flex><span>      )
</span></span><span style=display:flex><span>      .slice(<span style=color:#bd93f9>0</span>, limit);
</span></span><span style=display:flex><span>    <span style=color:#6272a4>// ... 結果を返す
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>  }
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><h3 id=セットアップ>セットアップ</h3><p>リポジトリ全体のクローンは不要。MCP Serverのソースコードだけ取得してビルドする。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6272a4># MCP Serverのソースを取得してビルド</span>
</span></span><span style=display:flex><span>git clone --depth <span style=color:#bd93f9>1</span> --filter<span style=color:#ff79c6>=</span>blob:none --sparse https://github.com/zatoima/zatoima.github.io.git
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>cd</span> zatoima.github.io <span style=color:#ff79c6>&amp;&amp;</span> git sparse-checkout <span style=color:#8be9fd;font-style:italic>set</span> mcp-server
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>cd</span> mcp-server <span style=color:#ff79c6>&amp;&amp;</span> npm install <span style=color:#ff79c6>&amp;&amp;</span> npx tsc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># Claude Codeに登録</span>
</span></span><span style=display:flex><span>claude mcp add zatoima-blog node <span style=color:#ff79c6>$(</span><span style=color:#8be9fd;font-style:italic>pwd</span><span style=color:#ff79c6>)</span>/dist/index.js
</span></span></code></pre></div><p>登録後、Claude Codeのセッション内で以下のように使用できる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span># 記事検索
</span></span><span style=display:flex><span>mcp__zatoima-blog__search_posts(query=&#34;Aurora&#34;)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># 統計情報
</span></span><span style=display:flex><span>mcp__zatoima-blog__blog_stats()
</span></span></code></pre></div><h2 id=llmstxtの実装>llms.txtの実装</h2><h3 id=llmstxtとは>llms.txtとは</h3><p><code>llms.txt</code>はWebサイトの内容をLLMに理解させるためのフォーマットである。<code>robots.txt</code>のAI版のようなもので、サイトの概要と記事一覧をプレーンテキストで提供する。</p><ul><li><code>/llms.txt</code> - 記事タイトル・URL・タグの一覧（軽量版）</li><li><code>/llms-full.txt</code> - 全記事の本文を含む完全版</li></ul><h3 id=hugoでの生成方法>Hugoでの生成方法</h3><h4 id=1-hugotomlにカスタム出力フォーマットを定義>1. hugo.tomlにカスタム出力フォーマットを定義</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[mediaTypes]
</span></span><span style=display:flex><span>  [mediaTypes.<span style=color:#f1fa8c>&#34;text/llms&#34;</span>]
</span></span><span style=display:flex><span>    suffixes = [<span style=color:#f1fa8c>&#34;txt&#34;</span>]
</span></span><span style=display:flex><span>  [mediaTypes.<span style=color:#f1fa8c>&#34;text/llms-full&#34;</span>]
</span></span><span style=display:flex><span>    suffixes = [<span style=color:#f1fa8c>&#34;txt&#34;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[outputFormats]
</span></span><span style=display:flex><span>  [outputFormats.llms]
</span></span><span style=display:flex><span>    mediaType = <span style=color:#f1fa8c>&#34;text/llms&#34;</span>
</span></span><span style=display:flex><span>    baseName = <span style=color:#f1fa8c>&#34;llms&#34;</span>
</span></span><span style=display:flex><span>    isPlainText = <span style=color:#ff79c6>true</span>
</span></span><span style=display:flex><span>    notAlternative = <span style=color:#ff79c6>true</span>
</span></span><span style=display:flex><span>  [outputFormats.llms-full]
</span></span><span style=display:flex><span>    mediaType = <span style=color:#f1fa8c>&#34;text/llms-full&#34;</span>
</span></span><span style=display:flex><span>    baseName = <span style=color:#f1fa8c>&#34;llms-full&#34;</span>
</span></span><span style=display:flex><span>    isPlainText = <span style=color:#ff79c6>true</span>
</span></span><span style=display:flex><span>    notAlternative = <span style=color:#ff79c6>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[outputs]
</span></span><span style=display:flex><span>  home = [<span style=color:#f1fa8c>&#34;HTML&#34;</span>, <span style=color:#f1fa8c>&#34;RSS&#34;</span>, <span style=color:#f1fa8c>&#34;JSON&#34;</span>, <span style=color:#f1fa8c>&#34;llms&#34;</span>, <span style=color:#f1fa8c>&#34;llms-full&#34;</span>]
</span></span></code></pre></div><h4 id=2-テンプレートファイルの作成>2. テンプレートファイルの作成</h4><p><code>layouts/_default/index.llms.txt</code>（軽量版）:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span># {{ .Site.Title }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&gt; {{ .Site.Params.description }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>author: zatoima
</span></span><span style=display:flex><span>url: {{ .Site.BaseURL }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>## Blog Posts
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{- $pages := where .Site.RegularPages &#34;Section&#34; &#34;blog&#34; }}
</span></span><span style=display:flex><span>{{ range $pages }}
</span></span><span style=display:flex><span>- [{{ .Title }}]({{ .Permalink }}) ({{ .Date.Format &#34;2006-01-02&#34; }}){{ with .Params.tags }} [{{ delimit . &#34;, &#34; }}]{{ end }}
</span></span><span style=display:flex><span>{{- end }}
</span></span></code></pre></div><p><code>layouts/_default/index.llms-full.txt</code>（完全版）:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>{{- $pages := where .Site.RegularPages &#34;Section&#34; &#34;blog&#34; }}
</span></span><span style=display:flex><span>{{ range $pages }}
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>### {{ .Title }}
</span></span><span style=display:flex><span>date: {{ .Date.Format &#34;2006-01-02&#34; }}
</span></span><span style=display:flex><span>url: {{ .Permalink }}
</span></span><span style=display:flex><span>{{ .Plain }}
</span></span><span style=display:flex><span>{{ end }}
</span></span></code></pre></div><h4 id=3-htmlヘッダーへのリンク追加>3. HTMLヘッダーへのリンク追加</h4><p><code>layouts/_default/baseof.html</code>の<code>&lt;head></code>内に以下を追加する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#ff79c6>link</span> <span style=color:#50fa7b>rel</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;alternate&#34;</span> <span style=color:#50fa7b>type</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;text/plain&#34;</span> <span style=color:#50fa7b>href</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/llms.txt&#34;</span> <span style=color:#50fa7b>title</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;LLMs.txt&#34;</span> /&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#ff79c6>link</span> <span style=color:#50fa7b>rel</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;alternate&#34;</span> <span style=color:#50fa7b>type</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;text/plain&#34;</span> <span style=color:#50fa7b>href</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/llms-full.txt&#34;</span> <span style=color:#50fa7b>title</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;LLMs-full.txt&#34;</span> /&gt;
</span></span></code></pre></div><p>ナビゲーションにもリンクを追加した。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#ff79c6>a</span> <span style=color:#50fa7b>href</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;/llms.txt&#34;</span> <span style=color:#50fa7b>title</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;LLMs.txt - AI/LLM向けサイト情報&#34;</span>&gt;llms.txt&lt;/<span style=color:#ff79c6>a</span>&gt;
</span></span></code></pre></div><h3 id=生成結果>生成結果</h3><table><thead><tr><th>ファイル</th><th>行数</th><th>内容</th></tr></thead><tbody><tr><td><code>llms.txt</code></td><td>414行</td><td>記事タイトル・URL・タグの一覧</td></tr><tr><td><code>llms-full.txt</code></td><td>7,448行</td><td>全記事の本文を含む完全版</td></tr></tbody></table><h2 id=コンテキストウィンドウへの影響>コンテキストウィンドウへの影響</h2><p>MCP Serverは<code>llms-full.txt</code>（約1.8MB / 推定50万トークン）を起動時にHTTPで取得しメモリ上に保持する。しかし、この全データがClaude Codeのコンテキストウィンドウに流れるわけではない。</p><p>各ツールがClaude Codeに返すデータ量は以下の通り。</p><table><thead><tr><th>ツール</th><th>返すデータ</th><th>コンテキスト消費</th></tr></thead><tbody><tr><td><code>search_posts</code></td><td>タイトル一覧のみ</td><td>小</td></tr><tr><td><code>list_posts</code></td><td>タイトル一覧のみ</td><td>小</td></tr><tr><td><code>list_tags</code></td><td>タグと件数の集計</td><td>小</td></tr><tr><td><code>blog_stats</code></td><td>統計サマリ</td><td>小</td></tr><tr><td><code>read_post</code></td><td>1記事の全文</td><td>記事による（大）</td></tr></tbody></table><p><code>read_post</code>以外のツールは検索・集計結果のサマリのみを返すため、コンテキストウィンドウへの影響は小さい。1.8MBの全記事データはMCP Serverプロセスのメモリに留まり、Claude Codeには流れない。<code>read_post</code>だけは記事全文を返すため、長い記事の場合はコンテキストを圧迫する可能性がある。</p><h2 id=まとめ>まとめ</h2><p>Hugo製の静的ブログに対して、2つの異なるアプローチでAI/LLMとの連携を実装した。</p><table><thead><tr><th>方式</th><th>用途</th><th>動作環境</th><th>クローン</th></tr></thead><tbody><tr><td>MCP Server</td><td>Claude Codeからの記事操作</td><td>ローカル（Node.js）</td><td>不要（HTTPフェッチ）</td></tr><tr><td>llms.txt</td><td>Web上でのLLM向けコンテンツ公開</td><td>GitHub Pages（静的ファイル）</td><td>不要</td></tr></tbody></table><p>MCP Serverは<code>llms-full.txt</code>をHTTPで取得する方式にしたことで、リポジトリのクローンが不要になった。<code>llms.txt</code>がMCP Serverのデータソースを兼ねる構成になっており、Hugoビルド時に記事データが自動更新される。静的サイトでも工夫次第でAIフレンドリーな対応が可能である。</p><h2 id=参考資料>参考資料</h2><ul><li><a href=https://modelcontextprotocol.io/>Model Context Protocol</a></li><li><a href=https://llmstxt.org/>llms.txt proposal</a></li><li><a href=https://gohugo.io/templates/output-formats/>Hugo Custom Output Formats</a></li></ul></div></div><nav class=prev-next-nav><a href=https://zatoima.github.io/snowflake-directory-table-integration/ class="prev-next-link prev-link"><span class=prev-next-label>← 前の記事</span>
<span class=prev-next-title>Snowflakeのディレクトリテーブルとメタデータ自動更新</span></a><div class="prev-next-link next-link empty"></div></nav><div class=share-buttons><span class=share-label>共有:</span>
<a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fzatoima.github.io%2fhugo-blog-mcp-server-llms-txt%2f&text=Hugo%E8%A3%BD%E3%83%96%E3%83%AD%E3%82%B0%E3%81%ABMCP+Server%E3%81%A8llms.txt%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B" target=_blank rel="noopener noreferrer" class="share-btn share-twitter" aria-label=Xで共有><svg width="18" height="18" viewBox="0 0 24 24" fill="currentcolor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a><a href=https://b.hatena.ne.jp/entry/https://zatoima.github.io/hugo-blog-mcp-server-llms-txt/ target=_blank rel="noopener noreferrer" class="share-btn share-hatena" aria-label=はてなブックマークに追加>B!</a></div><div class=related-articles><h2 class=related-articles-title>関連しているかもしれない記事</h2><ul class=related-list><li><a href=/hugo-github-pages-setup-memo/>Github Pages Hugoの新端末でのセットアップメモ</a></li><li><a href=/hugo-access-number-memo/>本ブログへのアクセス数メモ 2022年10月</a></li><li><a href=/hugo-wowchemy-syntax-highlight-setting/>Hugo wowchemyのシンタックスハイライト変更</a></li><li><a href=/hugo-error-build-output-format/>Hugo AcademicのError failed to resolve output formatエラーについて</a></li><li><a href=/hugo-wowchemy-academic-article-container/>Hugo wowchemy（旧Academic）における記事幅の調整方法</a></li></ul></div><div class=post-tags><a href=https://zatoima.github.io/blog/hugo/ class=tag-badge><img src=/images/tags/hugo.svg alt=Hugo class=tag-badge-icon loading=lazy>Hugo</a>
<a href=https://zatoima.github.io/blog/claude-code/ class=tag-badge><img src=/images/tags/claude.svg alt="Claude Code" class=tag-badge-icon loading=lazy>Claude Code</a></div></article><aside class=article-sidebar><div class=toc-container><div class=toc-title>目次</div><nav id=TableOfContents><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#mcpmodel-context-protocolとは>MCP（Model Context Protocol）とは</a></li><li><a href=#mcp-serverの実装>MCP Serverの実装</a><ul><li><a href=#データ取得方式>データ取得方式</a></li><li><a href=#構成>構成</a></li><li><a href=#提供ツール>提供ツール</a></li><li><a href=#実装のポイント>実装のポイント</a></li><li><a href=#セットアップ>セットアップ</a></li></ul></li><li><a href=#llmstxtの実装>llms.txtの実装</a><ul><li><a href=#llmstxtとは>llms.txtとは</a></li><li><a href=#hugoでの生成方法>Hugoでの生成方法</a><ul><li><a href=#1-hugotomlにカスタム出力フォーマットを定義>1. hugo.tomlにカスタム出力フォーマットを定義</a></li><li><a href=#2-テンプレートファイルの作成>2. テンプレートファイルの作成</a></li><li><a href=#3-htmlヘッダーへのリンク追加>3. HTMLヘッダーへのリンク追加</a></li></ul></li><li><a href=#生成結果>生成結果</a></li></ul></li><li><a href=#コンテキストウィンドウへの影響>コンテキストウィンドウへの影響</a></li><li><a href=#まとめ>まとめ</a></li><li><a href=#参考資料>参考資料</a></li></ul></nav></div></aside></div></main><footer class=site-footer><div class=footer-inner><div class=footer-description>memo blog</div><div class=footer-links><a href=/>ホーム</a>
<a href=/blog/>記事一覧</a>
<a href=/tags/>タグ一覧</a>
<a href=/about/>About</a></div><div class=footer-social><a href=https://github.com/zatoima target=_blank rel="noopener noreferrer" aria-label=GitHub><svg width="18" height="18" viewBox="0 0 24 24" fill="currentcolor"><path d="M12 0C5.374.0.0 5.373.0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931.0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176.0.0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221.0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg></a><a href=https://x.com/zatoima1 target=_blank rel="noopener noreferrer" aria-label="X (Twitter)"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentcolor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a><a href=/index.xml aria-label=RSS><svg width="16" height="16" viewBox="0 0 24 24" fill="currentcolor"><path d="M6.18 15.64a2.18 2.18.0 012.18 2.18c0 1.19-.98 2.18-2.18 2.18C5 20 4 19.01 4 17.82a2.18 2.18.0 012.18-2.18M4 4.44A15.56 15.56.0 0119.56 20h-2.83A12.73 12.73.0 004 7.27V4.44m0 5.66a9.9 9.9.0 019.9 9.9h-2.83A7.07 7.07.0 004 12.93V10.1z"/></svg></a></div><div class=footer-copyright>Copyright © 2019, zatoima.</div></div></footer></div><script src=/js/lightbox.js defer></script>
<script src=/js/toc-highlight.js defer></script>
<script src=/js/code-copy.js defer></script>
<script src=/js/dark-mode.js defer></script>
<script src=/js/mobile-nav.js defer></script>
<script src=/js/search.js defer></script></body></html>