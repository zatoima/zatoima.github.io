<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://zatoima.github.io/favicon.ico" />
<title>parquet-toolsのインストール、及び操作方法のメモ | my opinion is my own</title>
<meta name="title" content="parquet-toolsのインストール、及び操作方法のメモ" />
<meta name="description" content="" />
<meta name="keywords" content="その他," />


<meta property="og:url" content="https://zatoima.github.io/parquet-tools-how-to-install-and-operate/">
  <meta property="og:site_name" content="my opinion is my own">
  <meta property="og:title" content="parquet-toolsのインストール、及び操作方法のメモ">
  <meta property="og:description" content="memo blog">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2021-11-02T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-11-02T00:00:00+00:00">
    <meta property="article:tag" content="その他">
    <meta property="og:image" content="https://zatoima.github.io/images/share.png">



<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://zatoima.github.io/images/share.png"><meta name="twitter:title" content="parquet-toolsのインストール、及び操作方法のメモ">
<meta name="twitter:description" content="">




  <meta itemprop="name" content="parquet-toolsのインストール、及び操作方法のメモ">
  <meta itemprop="description" content="memo blog">
  <meta itemprop="datePublished" content="2021-11-02T00:00:00+00:00">
  <meta itemprop="dateModified" content="2021-11-02T00:00:00+00:00">
  <meta itemprop="wordCount" content="1778">
  <meta itemprop="image" content="https://zatoima.github.io/images/share.png">
  <meta itemprop="keywords" content="その他">
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  body {
    font-family: Verdana, sans-serif;
    margin: auto;
    padding: 20px;
    max-width: 720px;
    text-align: left;
    background-color: #fff;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: #444;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  strong,
  b {
    color: #222;
  }

  a {
    color: #3273dc;
     
  }

  .title {
    text-decoration: none;
    border: 0;
  }

  .title span {
    font-weight: 400;
  }

  nav a {
    margin-right: 10px;
  }

  textarea {
    width: 100%;
    font-size: 16px;
  }

  input {
    font-size: 16px;
  }

  content {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  img {
    max-width: 100%;
  }

  code {
    padding: 2px 5px;
    background-color: #f2f2f2;
  }

  pre code {
    color: #222;
    display: block;
    padding: 20px;
    white-space: pre-wrap;
    font-size: 14px;
    overflow-x: auto;
  }

  div.highlight pre {
    background-color: initial;
    color: initial;
  }

  div.highlight code {
    background-color: unset;
    color: unset;
  }

  blockquote {
    border-left: 1px solid #999;
    color: #222;
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px;
    text-align: center;
  }

  .helptext {
    color: #777;
    font-size: small;
  }

  .errorlist {
    color: #eba613;
    font-size: small;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: #8b6fcb;
  }

  @media (prefers-color-scheme: dark) {
    body {
      background-color: #333;
      color: #ddd;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    strong,
    b {
      color: #eee;
    }

    a {
      color: #8cc2dd;
    }

    code {
      background-color: #777;
    }

    pre code {
      color: #ddd;
    }

    blockquote {
      color: #ccc;
    }

    textarea,
    input {
      background-color: #252525;
      color: #ddd;
    }

    .helptext {
      color: #aaa;
    }
  }

</style>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-STFZ9QMXGM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-STFZ9QMXGM');
</script>
</head>

<body>
  <header><a href="/" class="title">
  <h2>my opinion is my own</h2>
</a>
<nav>
<a href="/about/">About</a>
<a href="/blog/">Blog</a>
<a href="/index.xml">RSS</a>
<a href="/other/">Other</a>
</nav>
</header>
  <main>
<h1>parquet-toolsのインストール、及び操作方法のメモ</h1>

<p>
  <i>
    <time datetime='2021-11-02' pubdate>
      2021-11-02
    </time>
  </i>
</p>

<content>
  <h2 id="インストール">インストール</h2>
<h3 id="mavenjavaのインストール確認">maven、javaのインストール確認</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin ~<span style="color:#f92672">]</span>$ mvn -version
</span></span><span style="display:flex;"><span>Apache Maven 3.5.2 <span style="color:#f92672">(</span>138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T07:58:13Z<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Maven home: /usr/share/apache-maven
</span></span><span style="display:flex;"><span>Java version: 1.8.0_302, vendor: Red Hat, Inc.
</span></span><span style="display:flex;"><span>Java home: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.302.b08-0.amzn2.0.1.x86_64/jre
</span></span><span style="display:flex;"><span>Default locale: en_US, platform encoding: UTF-8
</span></span><span style="display:flex;"><span>OS name: <span style="color:#e6db74">&#34;linux&#34;</span>, version: <span style="color:#e6db74">&#34;4.14.248-189.473.amzn2.x86_64&#34;</span>, arch: <span style="color:#e6db74">&#34;amd64&#34;</span>, family: <span style="color:#e6db74">&#34;unix&#34;</span>
</span></span></code></pre></div><h3 id="資材のインストール">資材のインストール</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin ~<span style="color:#f92672">]</span>$ mkdir parquet
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin ~<span style="color:#f92672">]</span>$ cd parquet/
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin parquet<span style="color:#f92672">]</span>$ git clone https://github.com/apache/parquet-mr.git
</span></span><span style="display:flex;"><span>Cloning into <span style="color:#e6db74">&#39;parquet-mr&#39;</span>...
</span></span><span style="display:flex;"><span>remote: Enumerating objects: 68629, <span style="color:#66d9ef">done</span>.
</span></span><span style="display:flex;"><span>remote: Counting objects: 100% <span style="color:#f92672">(</span>1532/1532<span style="color:#f92672">)</span>, <span style="color:#66d9ef">done</span>.
</span></span><span style="display:flex;"><span>remote: Compressing objects: 100% <span style="color:#f92672">(</span>835/835<span style="color:#f92672">)</span>, <span style="color:#66d9ef">done</span>.
</span></span><span style="display:flex;"><span>remote: Total <span style="color:#ae81ff">68629</span> <span style="color:#f92672">(</span>delta 595<span style="color:#f92672">)</span>, reused <span style="color:#ae81ff">1163</span> <span style="color:#f92672">(</span>delta 394<span style="color:#f92672">)</span>, pack-reused <span style="color:#ae81ff">67097</span>
</span></span><span style="display:flex;"><span>Receiving objects: 100% <span style="color:#f92672">(</span>68629/68629<span style="color:#f92672">)</span>, 17.45 MiB | 18.62 MiB/s, <span style="color:#66d9ef">done</span>.
</span></span><span style="display:flex;"><span>Resolving deltas: 100% <span style="color:#f92672">(</span>40079/40079<span style="color:#f92672">)</span>, <span style="color:#66d9ef">done</span>.
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin parquet<span style="color:#f92672">]</span>$ cd ./parquet-mr/parquet-tools/
</span></span><span style="display:flex;"><span>-bash: cd: ./parquet-mr/parquet-tools/: No such file or directory
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin parquet<span style="color:#f92672">]</span>$ cd ./parquet-mr/
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin parquet-mr<span style="color:#f92672">]</span>$ ls -l
</span></span><span style="display:flex;"><span>total <span style="color:#ae81ff">156</span>
</span></span><span style="display:flex;"><span>-rwxrwxr-x <span style="color:#ae81ff">1</span> ec2-user ec2-user  <span style="color:#ae81ff">2178</span> Oct <span style="color:#ae81ff">20</span> 10:12 changelog.sh
</span></span><span style="display:flex;"><span>-rw-rw-r-- <span style="color:#ae81ff">1</span> ec2-user ec2-user <span style="color:#ae81ff">84314</span> Oct <span style="color:#ae81ff">20</span> 10:12 CHANGES.md
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">2</span> ec2-user ec2-user   <span style="color:#ae81ff">209</span> Oct <span style="color:#ae81ff">20</span> 10:12 dev
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">26</span> Oct <span style="color:#ae81ff">20</span> 10:12 doc
</span></span><span style="display:flex;"><span>-rw-rw-r-- <span style="color:#ae81ff">1</span> ec2-user ec2-user <span style="color:#ae81ff">11626</span> Oct <span style="color:#ae81ff">20</span> 10:12 LICENSE
</span></span><span style="display:flex;"><span>-rw-rw-r-- <span style="color:#ae81ff">1</span> ec2-user ec2-user  <span style="color:#ae81ff">3569</span> Oct <span style="color:#ae81ff">20</span> 10:12 NOTICE
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">32</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-arrow
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">69</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-avro
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">63</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-benchmarks
</span></span><span style="display:flex;"><span>-rw-rw-r-- <span style="color:#ae81ff">1</span> ec2-user ec2-user  <span style="color:#ae81ff">9486</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet_cascading.md
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">49</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-cli
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">52</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-column
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">52</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-common
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">52</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-encoding
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">32</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-format-structures
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">52</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-generator
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">69</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-hadoop
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">46</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-hadoop-bundle
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">49</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-jackson
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">52</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-pig
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">32</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-pig-bundle
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">69</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-protobuf
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">32</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-scala
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user    <span style="color:#ae81ff">69</span> Oct <span style="color:#ae81ff">20</span> 10:12 parquet-thrift
</span></span><span style="display:flex;"><span>-rw-rw-r-- <span style="color:#ae81ff">1</span> ec2-user ec2-user <span style="color:#ae81ff">23053</span> Oct <span style="color:#ae81ff">20</span> 10:12 pom.xml
</span></span><span style="display:flex;"><span>-rw-rw-r-- <span style="color:#ae81ff">1</span> ec2-user ec2-user  <span style="color:#ae81ff">3049</span> Oct <span style="color:#ae81ff">20</span> 10:12 PoweredBy.md
</span></span><span style="display:flex;"><span>-rw-rw-r-- <span style="color:#ae81ff">1</span> ec2-user ec2-user <span style="color:#ae81ff">10418</span> Oct <span style="color:#ae81ff">20</span> 10:12 README.md
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">2</span> ec2-user ec2-user    <span style="color:#ae81ff">25</span> Oct <span style="color:#ae81ff">20</span> 10:12 src
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin parquet-mr<span style="color:#f92672">]</span>$ git checkout apache-parquet-1.10.1
</span></span><span style="display:flex;"><span>Note: switching to <span style="color:#e6db74">&#39;apache-parquet-1.10.1&#39;</span>.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>You are in <span style="color:#e6db74">&#39;detached HEAD&#39;</span> state. You can look around, make experimental
</span></span><span style="display:flex;"><span>changes and commit them, and you can discard any commits you make in this
</span></span><span style="display:flex;"><span>state without impacting any branches by switching back to a branch.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>If you want to create a new branch to retain commits you create, you may
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span> so <span style="color:#f92672">(</span>now or later<span style="color:#f92672">)</span> by using -c with the switch command. Example:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  git switch -c &lt;new-branch-name&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Or undo this operation with:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  git switch -
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Turn off this advice by setting config variable advice.detachedHead to false
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>HEAD is now at a89df8f99 <span style="color:#f92672">[</span>maven-release-plugin<span style="color:#f92672">]</span> prepare release apache-parquet-1.10.1
</span></span></code></pre></div><h3 id="ビルド">ビルド</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin parquet-mr<span style="color:#f92672">]</span>$ cd parquet-tools/
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin parquet-tools<span style="color:#f92672">]</span>$ mvn clean package -Plocal
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> Scanning <span style="color:#66d9ef">for</span> projects...
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> -----------------------------------------------------------
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>～中略～
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>WARNING<span style="color:#f92672">]</span> See http://docs.codehaus.org/display/MAVENUSER/Shade+Plugin
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> Replacing original artifact with shaded artifact.
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> Replacing /home/ec2-user/parquet/parquet-mr/parquet-tools/target/parquet-tools-1.10.1.jar with /home/ec2-user/parquet/parquet-mr/parquet-tools/target/parquet-tools-1.10.1-shaded.jar
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> Dependency-reduced POM written at: /home/ec2-user/parquet/parquet-mr/parquet-tools/dependency-reduced-pom.xml
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> Dependency-reduced POM written at: /home/ec2-user/parquet/parquet-mr/parquet-tools/dependency-reduced-pom.xml
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> ------------------------------------------------------------------------
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> BUILD SUCCESS
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> ------------------------------------------------------------------------
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> Total time: 22.757 s
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> Finished at: 2021-10-20T01:13:55Z
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> Final Memory: 35M/377M
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>INFO<span style="color:#f92672">]</span> ------------------------------------------------------------------------
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin parquet-tools<span style="color:#f92672">]</span>$ 
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin parquet-tools<span style="color:#f92672">]</span>$ ls -l
</span></span><span style="display:flex;"><span>total <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>-rw-rw-r--  <span style="color:#ae81ff">1</span> ec2-user ec2-user <span style="color:#ae81ff">3172</span> Oct <span style="color:#ae81ff">20</span> 10:13 dependency-reduced-pom.xml
</span></span><span style="display:flex;"><span>-rw-rw-r--  <span style="color:#ae81ff">1</span> ec2-user ec2-user <span style="color:#ae81ff">4306</span> Oct <span style="color:#ae81ff">20</span> 10:12 pom.xml
</span></span><span style="display:flex;"><span>-rw-rw-r--  <span style="color:#ae81ff">1</span> ec2-user ec2-user <span style="color:#ae81ff">2354</span> Oct <span style="color:#ae81ff">20</span> 10:12 README.md
</span></span><span style="display:flex;"><span>-rw-rw-r--  <span style="color:#ae81ff">1</span> ec2-user ec2-user  <span style="color:#ae81ff">979</span> Oct <span style="color:#ae81ff">20</span> 10:12 REVIEWERS.md
</span></span><span style="display:flex;"><span>drwxrwxr-x  <span style="color:#ae81ff">4</span> ec2-user ec2-user   <span style="color:#ae81ff">30</span> Oct <span style="color:#ae81ff">20</span> 10:12 src
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">10</span> ec2-user ec2-user  <span style="color:#ae81ff">304</span> Oct <span style="color:#ae81ff">20</span> 10:13 target
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin parquet-tools<span style="color:#f92672">]</span>$ cd target/
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin target<span style="color:#f92672">]</span>$ ls -l
</span></span><span style="display:flex;"><span>total <span style="color:#ae81ff">42332</span>
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">4</span> ec2-user ec2-user       <span style="color:#ae81ff">33</span> Oct <span style="color:#ae81ff">20</span> 10:13 classes
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user       <span style="color:#ae81ff">25</span> Oct <span style="color:#ae81ff">20</span> 10:13 generated-sources
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user       <span style="color:#ae81ff">30</span> Oct <span style="color:#ae81ff">20</span> 10:13 generated-test-sources
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">2</span> ec2-user ec2-user       <span style="color:#ae81ff">28</span> Oct <span style="color:#ae81ff">20</span> 10:13 maven-archiver
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user       <span style="color:#ae81ff">35</span> Oct <span style="color:#ae81ff">20</span> 10:13 maven-status
</span></span><span style="display:flex;"><span>-rw-rw-r-- <span style="color:#ae81ff">1</span> ec2-user ec2-user    <span style="color:#ae81ff">81190</span> Oct <span style="color:#ae81ff">20</span> 10:13 original-parquet-tools-1.10.1.jar
</span></span><span style="display:flex;"><span>-rw-rw-r-- <span style="color:#ae81ff">1</span> ec2-user ec2-user <span style="color:#ae81ff">43242062</span> Oct <span style="color:#ae81ff">20</span> 10:13 parquet-tools-1.10.1.jar
</span></span><span style="display:flex;"><span>-rw-rw-r-- <span style="color:#ae81ff">1</span> ec2-user ec2-user    <span style="color:#ae81ff">11045</span> Oct <span style="color:#ae81ff">20</span> 10:13 parquet-tools-1.10.1-tests.jar
</span></span><span style="display:flex;"><span>-rw-rw-r-- <span style="color:#ae81ff">1</span> ec2-user ec2-user     <span style="color:#ae81ff">3124</span> Oct <span style="color:#ae81ff">20</span> 10:13 rat.txt
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">2</span> ec2-user ec2-user        <span style="color:#ae81ff">6</span> Oct <span style="color:#ae81ff">20</span> 10:13 surefire
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">2</span> ec2-user ec2-user     <span style="color:#ae81ff">4096</span> Oct <span style="color:#ae81ff">20</span> 10:13 surefire-reports
</span></span><span style="display:flex;"><span>drwxrwxr-x <span style="color:#ae81ff">3</span> ec2-user ec2-user       <span style="color:#ae81ff">17</span> Oct <span style="color:#ae81ff">20</span> 10:13 test-classes
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin target<span style="color:#f92672">]</span>$ 
</span></span></code></pre></div><h2 id="parquet-toolsの操作方法">parquet-toolsの操作方法</h2>
<h3 id="中身の確認">中身の確認</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ java -jar $HOME/parquet/parquet-mr/parquet-tools/target/parquet-tools-1.10.1.jar cat testdata.parquet
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> test1
</span></span><span style="display:flex;"><span>comment <span style="color:#f92672">=</span> ゎ
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>id <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> test2
</span></span><span style="display:flex;"><span>comment <span style="color:#f92672">=</span> が
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>id <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> test3
</span></span><span style="display:flex;"><span>comment <span style="color:#f92672">=</span> ス
</span></span></code></pre></div><h3 id="メタ情報の確認">メタ情報の確認</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ java -jar $HOME/parquet/parquet-mr/parquet-tools/target/parquet-tools-1.10.1.jar meta testdata.parquet
</span></span><span style="display:flex;"><span>file:        file:/home/ec2-user/pyarrow/testdata.parquet 
</span></span><span style="display:flex;"><span>creator:     parquet-cpp-arrow version 5.0.0 
</span></span><span style="display:flex;"><span>extra:       pandas <span style="color:#f92672">=</span> <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;index_columns&#34;</span>: <span style="color:#f92672">[{</span><span style="color:#e6db74">&#34;kind&#34;</span>: <span style="color:#e6db74">&#34;range&#34;</span>, <span style="color:#e6db74">&#34;name&#34;</span>: null, <span style="color:#e6db74">&#34;start&#34;</span>: 0, <span style="color:#e6db74">&#34;stop&#34;</span>: 3, <span style="color:#e6db74">&#34;step&#34;</span>: 1<span style="color:#f92672">}]</span>, <span style="color:#e6db74">&#34;column_indexes&#34;</span>: <span style="color:#f92672">[{</span><span style="color:#e6db74">&#34;name&#34;</span>: null, <span style="color:#e6db74">&#34;field_name&#34;</span>: null, <span style="color:#e6db74">&#34;pandas_type&#34;</span>: <span style="color:#e6db74">&#34;unicode&#34;</span>, <span style="color:#e6db74">&#34;numpy_type&#34;</span>: <span style="color:#e6db74">&#34;object&#34;</span>, <span style="color:#e6db74">&#34;metadata&#34;</span>: <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;encoding&#34;</span>: <span style="color:#e6db74">&#34;UTF-8&#34;</span><span style="color:#f92672">}}]</span>, <span style="color:#e6db74">&#34;columns&#34;</span>: <span style="color:#f92672">[{</span><span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;id&#34;</span>, <span style="color:#e6db74">&#34;field_name&#34;</span>: <span style="color:#e6db74">&#34;id&#34;</span>, <span style="color:#e6db74">&#34;pandas_type&#34;</span>: <span style="color:#e6db74">&#34;int64&#34;</span>, <span style="color:#e6db74">&#34;numpy_type&#34;</span>: <span style="color:#e6db74">&#34;int64&#34;</span>, <span style="color:#e6db74">&#34;metadata&#34;</span>: null<span style="color:#f92672">}</span>, <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;name&#34;</span>, <span style="color:#e6db74">&#34;field_name&#34;</span>: <span style="color:#e6db74">&#34;name&#34;</span>, <span style="color:#e6db74">&#34;pandas_type&#34;</span>: <span style="color:#e6db74">&#34;unicode&#34;</span>, <span style="color:#e6db74">&#34;numpy_type&#34;</span>: <span style="color:#e6db74">&#34;object&#34;</span>, <span style="color:#e6db74">&#34;metadata&#34;</span>: null<span style="color:#f92672">}</span>, <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;comment&#34;</span>, <span style="color:#e6db74">&#34;field_name&#34;</span>: <span style="color:#e6db74">&#34;comment&#34;</span>, <span style="color:#e6db74">&#34;pandas_type&#34;</span>: <span style="color:#e6db74">&#34;unicode&#34;</span>, <span style="color:#e6db74">&#34;numpy_type&#34;</span>: <span style="color:#e6db74">&#34;object&#34;</span>, <span style="color:#e6db74">&#34;metadata&#34;</span>: null<span style="color:#f92672">}]</span>, <span style="color:#e6db74">&#34;creator&#34;</span>: <span style="color:#f92672">{</span><span style="color:#e6db74">&#34;library&#34;</span>: <span style="color:#e6db74">&#34;pyarrow&#34;</span>, <span style="color:#e6db74">&#34;version&#34;</span>: <span style="color:#e6db74">&#34;5.0.0&#34;</span><span style="color:#f92672">}</span>, <span style="color:#e6db74">&#34;pandas_version&#34;</span>: <span style="color:#e6db74">&#34;1.0.5&#34;</span><span style="color:#f92672">}</span> 
</span></span><span style="display:flex;"><span>extra:       ARROW:schema <span style="color:#f92672">=</span> /////5ADAAAQAAAAAAAKAA4ABgAFAAgACgAAAAABBAAQAAAAAAAKAAwAAAAEAAgACgAAALwCAAAEAAAAAQAAAAwAAAAIAAwABAAIAAgAAAAIAAAAEAAAAAYAAABwYW5kYXMAAIUCAAB7ImluZGV4X2NvbHVtbnMiOiBbeyJraW5kIjogInJhbmdlIiwgIm5hbWUiOiBudWxsLCAic3RhcnQiOiAwLCAic3RvcCI6IDMsICJzdGVwIjogMX1dLCAiY29sdW1uX2luZGV4ZXMiOiBbeyJuYW1lIjogbnVsbCwgImZpZWxkX25hbWUiOiBudWxsLCAicGFuZGFzX3R5cGUiOiAidW5pY29kZSIsICJudW1weV90eXBlIjogIm9iamVjdCIsICJtZXRhZGF0YSI6IHsiZW5jb2RpbmciOiAiVVRGLTgifX1dLCAiY29sdW1ucyI6IFt7Im5hbWUiOiAiaWQiLCAiZmllbGRfbmFtZSI6ICJpZCIsICJwYW5kYXNfdHlwZSI6ICJpbnQ2NCIsICJudW1weV90eXBlIjogImludDY0IiwgIm1ldGFkYXRhIjogbnVsbH0sIHsibmFtZSI6ICJuYW1lIiwgImZpZWxkX25hbWUiOiAibmFtZSIsICJwYW5kYXNfdHlwZSI6ICJ1bmljb2RlIiwgIm51bXB5X3R5cGUiOiAib2JqZWN0IiwgIm1ldGFkYXRhIjogbnVsbH0sIHsibmFtZSI6ICJjb21tZW50IiwgImZpZWxkX25hbWUiOiAiY29tbWVudCIsICJwYW5kYXNfdHlwZSI6ICJ1bmljb2RlIiwgIm51bXB5X3R5cGUiOiAib2JqZWN0IiwgIm1ldGFkYXRhIjogbnVsbH1dLCAiY3JlYXRvciI6IHsibGlicmFyeSI6ICJweWFycm93IiwgInZlcnNpb24iOiAiNS4wLjAifSwgInBhbmRhc192ZXJzaW9uIjogIjEuMC41In0AAAADAAAAcAAAADAAAAAEAAAArP///wAAAQUQAAAAGAAAAAQAAAAAAAAABwAAAGNvbW1lbnQA2P///9T///8AAAEFEAAAABwAAAAEAAAAAAAAAAQAAABuYW1lAAAAAAQABAAEAAAAEAAUAAgABgAHAAwAAAAQABAAAAAAAAECEAAAABwAAAAEAAAAAAAAAAIAAABpZAAACAAMAAgABwAIAAAAAAAAAUAAAAA<span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>file schema: schema 
</span></span><span style="display:flex;"><span>--------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>id:          OPTIONAL INT64 R:0 D:1
</span></span><span style="display:flex;"><span>name:        OPTIONAL BINARY O:UTF8 R:0 D:1
</span></span><span style="display:flex;"><span>comment:     OPTIONAL BINARY O:UTF8 R:0 D:1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>row group 1: RC:3 TS:271 OFFSET:4 
</span></span><span style="display:flex;"><span>--------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>id:           INT64 UNCOMPRESSED DO:4 FPO:42 SZ:109/109/1.00 VC:3 ENC:PLAIN_DICTIONARY,RLE,PLAIN ST:<span style="color:#f92672">[</span>min: 1, max: 3, num_nulls: 0<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>name:         BINARY UNCOMPRESSED DO:205 FPO:246 SZ:86/86/1.00 VC:3 ENC:PLAIN_DICTIONARY,RLE,PLAIN ST:<span style="color:#f92672">[</span>min: test1, max: test3, num_nulls: 0<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>comment:      BINARY UNCOMPRESSED DO:361 FPO:396 SZ:76/76/1.00 VC:3 ENC:PLAIN_DICTIONARY,RLE,PLAIN ST:<span style="color:#f92672">[</span>min: が, max: ス, num_nulls: 0<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ 
</span></span></code></pre></div><h3 id="スキーマ情報の確認">スキーマ情報の確認</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ java -jar $HOME/parquet/parquet-mr/parquet-tools/target/parquet-tools-1.10.1.jar schema testdata.parquet
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>message schema <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  optional int64 id;
</span></span><span style="display:flex;"><span>  optional binary name <span style="color:#f92672">(</span>UTF8<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span>  optional binary comment <span style="color:#f92672">(</span>UTF8<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="ダンプ">ダンプ</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ java -jar $HOME/parquet/parquet-mr/parquet-tools/target/parquet-tools-1.10.1.jar dump testdata.parquet
</span></span><span style="display:flex;"><span>row group <span style="color:#ae81ff">0</span> 
</span></span><span style="display:flex;"><span>--------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>id:       INT64 UNCOMPRESSED DO:4 FPO:42 SZ:109/109/1.00 VC:3 ENC:RLE, <span style="color:#f92672">[</span>more<span style="color:#f92672">]</span>...
</span></span><span style="display:flex;"><span>name:     BINARY UNCOMPRESSED DO:205 FPO:246 SZ:86/86/1.00 VC:3 ENC:RL <span style="color:#f92672">[</span>more<span style="color:#f92672">]</span>...
</span></span><span style="display:flex;"><span>comment:  BINARY UNCOMPRESSED DO:361 FPO:396 SZ:76/76/1.00 VC:3 ENC:RL <span style="color:#f92672">[</span>more<span style="color:#f92672">]</span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    id TV<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span> RL<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> DL<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> DS:      <span style="color:#ae81ff">3</span> DE:PLAIN_DICTIONARY
</span></span><span style="display:flex;"><span>    ----------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>    page 0:                     DLE:RLE RLE:RLE VLE:PLAIN_DICTIONARY S <span style="color:#f92672">[</span>more<span style="color:#f92672">]</span>... VC:3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    name TV<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span> RL<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> DL<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> DS:    <span style="color:#ae81ff">3</span> DE:PLAIN_DICTIONARY
</span></span><span style="display:flex;"><span>    ----------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>    page 0:                     DLE:RLE RLE:RLE VLE:PLAIN_DICTIONARY S <span style="color:#f92672">[</span>more<span style="color:#f92672">]</span>... VC:3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    comment TV<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span> RL<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> DL<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> DS: <span style="color:#ae81ff">3</span> DE:PLAIN_DICTIONARY
</span></span><span style="display:flex;"><span>    ----------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>    page 0:                     DLE:RLE RLE:RLE VLE:PLAIN_DICTIONARY S <span style="color:#f92672">[</span>more<span style="color:#f92672">]</span>... VC:3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>INT64 id 
</span></span><span style="display:flex;"><span>--------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>*** row group <span style="color:#ae81ff">1</span> of 1, values <span style="color:#ae81ff">1</span> to <span style="color:#ae81ff">3</span> *** 
</span></span><span style="display:flex;"><span>value 1: R:0 D:1 V:1
</span></span><span style="display:flex;"><span>value 2: R:0 D:1 V:2
</span></span><span style="display:flex;"><span>value 3: R:0 D:1 V:3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>BINARY name 
</span></span><span style="display:flex;"><span>--------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>*** row group <span style="color:#ae81ff">1</span> of 1, values <span style="color:#ae81ff">1</span> to <span style="color:#ae81ff">3</span> *** 
</span></span><span style="display:flex;"><span>value 1: R:0 D:1 V:test1
</span></span><span style="display:flex;"><span>value 2: R:0 D:1 V:test2
</span></span><span style="display:flex;"><span>value 3: R:0 D:1 V:test3
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>BINARY comment 
</span></span><span style="display:flex;"><span>--------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>*** row group <span style="color:#ae81ff">1</span> of 1, values <span style="color:#ae81ff">1</span> to <span style="color:#ae81ff">3</span> *** 
</span></span><span style="display:flex;"><span>value 1: R:0 D:1 V:ゎ
</span></span><span style="display:flex;"><span>value 2: R:0 D:1 V:が
</span></span><span style="display:flex;"><span>value 3: R:0 D:1 V:ス
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ 
</span></span></code></pre></div><h3 id="行数の確認">行数の確認</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ java -jar $HOME/parquet/parquet-mr/parquet-tools/target/parquet-tools-1.10.1.jar rowcount testdata.parquet
</span></span><span style="display:flex;"><span>Total RowCount: <span style="color:#ae81ff">3</span>
</span></span></code></pre></div><h3 id="サイズ確認">サイズ確認</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ java -jar $HOME/parquet/parquet-mr/parquet-tools/target/parquet-tools-1.10.1.jar size testdata.parquet
</span></span><span style="display:flex;"><span>Total Size: <span style="color:#ae81ff">271</span> bytes
</span></span></code></pre></div><h3 id="マージ">マージ</h3>
<p>仮にこんな感じにパーティションごとに分かれているparquetがあったとして、、、</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ find pq -type f
</span></span><span style="display:flex;"><span>pq/id<span style="color:#f92672">=</span>1/ad317ec807644ad98298860e7fb9d041.snappy.parquet
</span></span><span style="display:flex;"><span>pq/id<span style="color:#f92672">=</span>2/ad317ec807644ad98298860e7fb9d041.snappy.parquet
</span></span><span style="display:flex;"><span>pq/id<span style="color:#f92672">=</span>3/ad317ec807644ad98298860e7fb9d041.snappy.parquet
</span></span></code></pre></div><p>一つのファイルには1行程度のサイズしかないとする(こんな分割方法はありえないけども・・・)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ java -jar $HOME/parquet/parquet-mr/parquet-tools/target/parquet-tools-1.10.1.jar cat pq/id<span style="color:#f92672">=</span>1/ad317ec807644ad98298860e7fb9d041.snappy.parquet
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> test1
</span></span><span style="display:flex;"><span>comment <span style="color:#f92672">=</span> ゎぶばあちあぬナクバ
</span></span></code></pre></div><p>下記でマージ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ java -jar $HOME/parquet/parquet-mr/parquet-tools/target/parquet-tools-1.10.1.jar merge pq/id<span style="color:#f92672">=</span>1/ad317ec807644ad98298860e7fb9d041.snappy.parquet pq/id<span style="color:#f92672">=</span>2/ad317ec807644ad98298860e7fb9d041.snappy.parquet pq/id<span style="color:#f92672">=</span>3/ad317ec807644ad98298860e7fb9d041.snappy.parquet merge.pq
</span></span><span style="display:flex;"><span>Warning: file pq/id<span style="color:#f92672">=</span>1/ad317ec807644ad98298860e7fb9d041.snappy.parquet is too small, length: <span style="color:#ae81ff">1899</span>
</span></span><span style="display:flex;"><span>Warning: file pq/id<span style="color:#f92672">=</span>2/ad317ec807644ad98298860e7fb9d041.snappy.parquet is too small, length: <span style="color:#ae81ff">1899</span>
</span></span><span style="display:flex;"><span>Warning: file pq/id<span style="color:#f92672">=</span>3/ad317ec807644ad98298860e7fb9d041.snappy.parquet is too small, length: <span style="color:#ae81ff">1899</span>
</span></span><span style="display:flex;"><span>Warning: you merged too small files. Although the size of the merged file is bigger, it STILL contains small row groups, thus you don<span style="color:#960050;background-color:#1e0010">&#39;</span>t have the advantage of big row groups, which usually leads to bad query performance!
</span></span></code></pre></div><h3 id="catで確認">catで確認</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ java -jar $HOME/parquet/parquet-mr/parquet-tools/target/parquet-tools-1.10.1.jar cat  merge.pq
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> test1
</span></span><span style="display:flex;"><span>comment <span style="color:#f92672">=</span> ゎぶばあちあぬナクバ
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> test2
</span></span><span style="display:flex;"><span>comment <span style="color:#f92672">=</span> がマうひバぴじクハぺ
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> test3
</span></span><span style="display:flex;"><span>comment <span style="color:#f92672">=</span> スみでてゥあッあけげ
</span></span></code></pre></div><h3 id="ヘルプ">ヘルプ</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#f92672">[</span>ec2-user@bastin pyarrow<span style="color:#f92672">]</span>$ java -jar $HOME/parquet/parquet-mr/parquet-tools/target/parquet-tools-1.10.1.jar help
</span></span><span style="display:flex;"><span>Unknown command: help
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>parquet-tools cat:
</span></span><span style="display:flex;"><span>Prints the content of a Parquet file. The output contains only the data, no
</span></span><span style="display:flex;"><span>metadata is displayed
</span></span><span style="display:flex;"><span>usage: parquet-tools cat <span style="color:#f92672">[</span>option...<span style="color:#f92672">]</span> &lt;input&gt;
</span></span><span style="display:flex;"><span>where option is one of:
</span></span><span style="display:flex;"><span>       --debug     Enable debug output
</span></span><span style="display:flex;"><span>    -h,--help      Show this help string
</span></span><span style="display:flex;"><span>    -j,--json      Show records in JSON format.
</span></span><span style="display:flex;"><span>       --no-color  Disable color output even <span style="color:#66d9ef">if</span> supported
</span></span><span style="display:flex;"><span>where &lt;input&gt; is the parquet file to print to stdout
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>parquet-tools head:
</span></span><span style="display:flex;"><span>Prints the first n record of the Parquet file
</span></span><span style="display:flex;"><span>usage: parquet-tools head <span style="color:#f92672">[</span>option...<span style="color:#f92672">]</span> &lt;input&gt;
</span></span><span style="display:flex;"><span>where option is one of:
</span></span><span style="display:flex;"><span>       --debug          Enable debug output
</span></span><span style="display:flex;"><span>    -h,--help           Show this help string
</span></span><span style="display:flex;"><span>    -n,--records &lt;arg&gt;  The number of records to show <span style="color:#f92672">(</span>default: 5<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>       --no-color       Disable color output even <span style="color:#66d9ef">if</span> supported
</span></span><span style="display:flex;"><span>where &lt;input&gt; is the parquet file to print to stdout
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>parquet-tools schema:
</span></span><span style="display:flex;"><span>Prints the schema of Parquet file<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>usage: parquet-tools schema <span style="color:#f92672">[</span>option...<span style="color:#f92672">]</span> &lt;input&gt;
</span></span><span style="display:flex;"><span>where option is one of:
</span></span><span style="display:flex;"><span>    -d,--detailed  Show detailed information about the schema.
</span></span><span style="display:flex;"><span>       --debug     Enable debug output
</span></span><span style="display:flex;"><span>    -h,--help      Show this help string
</span></span><span style="display:flex;"><span>       --no-color  Disable color output even <span style="color:#66d9ef">if</span> supported
</span></span><span style="display:flex;"><span>where &lt;input&gt; is the parquet file containing the schema to show
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>parquet-tools meta:
</span></span><span style="display:flex;"><span>Prints the metadata of Parquet file<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>usage: parquet-tools meta <span style="color:#f92672">[</span>option...<span style="color:#f92672">]</span> &lt;input&gt;
</span></span><span style="display:flex;"><span>where option is one of:
</span></span><span style="display:flex;"><span>       --debug     Enable debug output
</span></span><span style="display:flex;"><span>    -h,--help      Show this help string
</span></span><span style="display:flex;"><span>       --no-color  Disable color output even <span style="color:#66d9ef">if</span> supported
</span></span><span style="display:flex;"><span>where &lt;input&gt; is the parquet file to print to stdout
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>parquet-tools dump:
</span></span><span style="display:flex;"><span>Prints the content and metadata of a Parquet file
</span></span><span style="display:flex;"><span>usage: parquet-tools dump <span style="color:#f92672">[</span>option...<span style="color:#f92672">]</span> &lt;input&gt;
</span></span><span style="display:flex;"><span>where option is one of:
</span></span><span style="display:flex;"><span>    -c,--column &lt;arg&gt;  Dump only the given column, can be specified more than
</span></span><span style="display:flex;"><span>                       once
</span></span><span style="display:flex;"><span>    -d,--disable-data  Do not dump column data
</span></span><span style="display:flex;"><span>       --debug         Enable debug output
</span></span><span style="display:flex;"><span>    -h,--help          Show this help string
</span></span><span style="display:flex;"><span>    -m,--disable-meta  Do not dump row group and page metadata
</span></span><span style="display:flex;"><span>    -n,--disable-crop  Do not crop the output based on console width
</span></span><span style="display:flex;"><span>       --no-color      Disable color output even <span style="color:#66d9ef">if</span> supported
</span></span><span style="display:flex;"><span>where &lt;input&gt; is the parquet file to print to stdout
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>parquet-tools merge:
</span></span><span style="display:flex;"><span>Merges multiple Parquet files into one. The command doesn<span style="color:#960050;background-color:#1e0010">&#39;</span>t merge row groups,
</span></span><span style="display:flex;"><span>just places one after the other. When used to merge many small files, the
</span></span><span style="display:flex;"><span>resulting file will still contain small row groups, which usually leads to bad
</span></span><span style="display:flex;"><span>query performance.
</span></span><span style="display:flex;"><span>usage: parquet-tools merge <span style="color:#f92672">[</span>option...<span style="color:#f92672">]</span> &lt;input&gt; <span style="color:#f92672">[</span>&lt;input&gt; ...<span style="color:#f92672">]</span> &lt;output&gt;
</span></span><span style="display:flex;"><span>where option is one of:
</span></span><span style="display:flex;"><span>       --debug     Enable debug output
</span></span><span style="display:flex;"><span>    -h,--help      Show this help string
</span></span><span style="display:flex;"><span>       --no-color  Disable color output even <span style="color:#66d9ef">if</span> supported
</span></span><span style="display:flex;"><span>where &lt;input&gt; is the source parquet files/directory to be merged
</span></span><span style="display:flex;"><span>   &lt;output&gt; is the destination parquet file
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>parquet-tools rowcount:
</span></span><span style="display:flex;"><span>Prints the count of rows in Parquet file<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>usage: parquet-tools rowcount <span style="color:#f92672">[</span>option...<span style="color:#f92672">]</span> &lt;input&gt;
</span></span><span style="display:flex;"><span>where option is one of:
</span></span><span style="display:flex;"><span>    -d,--detailed  Detailed rowcount of each matching file
</span></span><span style="display:flex;"><span>       --debug     Enable debug output
</span></span><span style="display:flex;"><span>    -h,--help      Show this help string
</span></span><span style="display:flex;"><span>       --no-color  Disable color output even <span style="color:#66d9ef">if</span> supported
</span></span><span style="display:flex;"><span>where &lt;input&gt; is the parquet file to count rows to stdout
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>parquet-tools size:
</span></span><span style="display:flex;"><span>Prints the size of Parquet file<span style="color:#f92672">(</span>s<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>usage: parquet-tools size <span style="color:#f92672">[</span>option...<span style="color:#f92672">]</span> &lt;input&gt;
</span></span><span style="display:flex;"><span>where option is one of:
</span></span><span style="display:flex;"><span>    -d,--detailed      Detailed size of each matching file
</span></span><span style="display:flex;"><span>       --debug         Enable debug output
</span></span><span style="display:flex;"><span>    -h,--help          Show this help string
</span></span><span style="display:flex;"><span>       --no-color      Disable color output even <span style="color:#66d9ef">if</span> supported
</span></span><span style="display:flex;"><span>    -p,--pretty        Pretty size
</span></span><span style="display:flex;"><span>    -u,--uncompressed  Uncompressed size
</span></span><span style="display:flex;"><span>where &lt;input&gt; is the parquet file to get size &amp; human readable size to stdout
</span></span></code></pre></div>
</content>
---

<p>関連しているかもしれない記事</p>
 
<ul>
  
  <li><a href="/dell-xps-8900-recovery-lost-power/">DELL XPS 8900にて電源が入らない状況から回復した方法</a></li>
  
  <li><a href="/thinkpad-wireless-keyboard-2-track-point-setting/">ThinkPad ワイヤレス キーボードII でトラックポイントの調整をする方法</a></li>
  
  <li><a href="/speedtest-cli-visualize-wifi-env/">speedtest-cliを使用してWifi環境の回線速度の可視化</a></li>
  
  <li><a href="/buy-thinkpad-x13-gen2-amd/">ThinkPad X13 Gen 2 AMD を購入しました</a></li>
  
  <li><a href="/how-to-know-the-update-information-of-the-site-without-rss/">RSSがないサイトの更新情報を受け取る方法</a></li>
  
</ul>

<br>

<p>
  
  <a href="https://zatoima.github.io/blog/%E3%81%9D%E3%81%AE%E4%BB%96/">#その他</a>
  
</p>


  </main>
  <footer>Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo ʕ•ᴥ•ʔ Bear</a>
</footer>

    
</body>

</html>
