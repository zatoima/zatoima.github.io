<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://zatoima.github.io/favicon.ico" />
<title>AWS Backupã§EC2ã‚’å¾©å…ƒã—ã‚ˆã†ã¨ã—ãŸã¨ãã®æ¨©é™ä¸è¶³ã‚¨ãƒ©ãƒ¼ | my opinion is my own</title>
<meta name="title" content="AWS Backupã§EC2ã‚’å¾©å…ƒã—ã‚ˆã†ã¨ã—ãŸã¨ãã®æ¨©é™ä¸è¶³ã‚¨ãƒ©ãƒ¼" />
<meta name="description" content="" />
<meta name="keywords" content="AWS," />


<meta property="og:title" content="AWS Backupã§EC2ã‚’å¾©å…ƒã—ã‚ˆã†ã¨ã—ãŸã¨ãã®æ¨©é™ä¸è¶³ã‚¨ãƒ©ãƒ¼" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zatoima.github.io/aws-backup-ec2-restore-error/" /><meta property="og:image" content="https://zatoima.github.io/images/share.png"/><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2022-09-08T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-09-08T00:00:00+00:00" /><meta property="og:site_name" content="my opinion is my own" />




<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://zatoima.github.io/images/share.png"/>

<meta name="twitter:title" content="AWS Backupã§EC2ã‚’å¾©å…ƒã—ã‚ˆã†ã¨ã—ãŸã¨ãã®æ¨©é™ä¸è¶³ã‚¨ãƒ©ãƒ¼"/>
<meta name="twitter:description" content=""/>



<meta itemprop="name" content="AWS Backupã§EC2ã‚’å¾©å…ƒã—ã‚ˆã†ã¨ã—ãŸã¨ãã®æ¨©é™ä¸è¶³ã‚¨ãƒ©ãƒ¼">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2022-09-08T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-09-08T00:00:00+00:00" />
<meta itemprop="wordCount" content="90"><meta itemprop="image" content="https://zatoima.github.io/images/share.png"/>
<meta itemprop="keywords" content="AWS," />
<meta name="referrer" content="no-referrer-when-downgrade" />

  <link rel="alternate" type="text/plain" href="/llms.txt" title="LLMs.txt" />
  <link rel="alternate" type="text/plain" href="/llms-full.txt" title="LLMs-full.txt" />

  <script>
    (function(){
      var t = localStorage.getItem('theme');
      if (t === 'dark' || (!t && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.setAttribute('data-theme', 'dark');
      }
    })();
  </script><link rel="stylesheet" href="/css/zenn.css">

<script async src="https://www.googletagmanager.com/gtag/js?id=G-STFZ9QMXGM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-STFZ9QMXGM');
</script>
</head>

<body>
  <div class="site-wrapper">
    <header class="site-header">
      <div class="header-inner">
        <a href="/" class="site-logo">my opinion is my own</a>
        <nav class="header-nav">
<a href="/about/">About</a>
<a href="/blog/">Blog</a>
<a href="/index.xml">RSS</a>
<a href="/other/">Other</a>
<a href="/llms.txt" title="LLMs.txt - AI/LLMå‘ã‘ã‚µã‚¤ãƒˆæƒ…å ±">llms.txt</a>
</nav>
        <div class="header-actions">
          <button id="search-btn" class="header-icon-btn" aria-label="æ¤œç´¢">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
          </button>
          <button id="dark-mode-btn" class="header-icon-btn" aria-label="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿">ğŸŒ™</button>
          <button id="hamburger-btn" class="hamburger-btn" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼">
            <span></span><span></span><span></span>
          </button>
        </div>
      </div>
    </header>

    
    <div id="search-overlay" class="search-overlay">
      <div class="search-modal">
        <input type="text" id="search-input" class="search-input" placeholder="è¨˜äº‹ã‚’æ¤œç´¢... (Ctrl+K)" autocomplete="off">
        <div id="search-results" class="search-results"></div>
      </div>
    </div>

    
    <div id="nav-overlay" class="nav-overlay"></div>

    <main class="site-main">
<div class="article-layout">
  <article class="article-main">
    
    <nav class="breadcrumb" aria-label="ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆ">
  <a href="/">ãƒ›ãƒ¼ãƒ </a>
  <span class="breadcrumb-sep">&gt;</span>
  
  <a href="/blog/">Blog</a>
  <span class="breadcrumb-sep">&gt;</span>
  
  <span class="breadcrumb-current">AWS Backupã§EC2ã‚’å¾©å…ƒã—ã‚ˆã†ã¨ã—ãŸã¨ãã®æ¨©é™ä¸è¶³ã‚¨ãƒ©ãƒ¼</span>
</nav>

    
    <div class="article-card">
      <div class="article-header">
        <div class="article-emoji"><img src="/images/tags/aws.svg" alt="AWS" class="tag-icon" loading="lazy"></div>
        <h1>AWS Backupã§EC2ã‚’å¾©å…ƒã—ã‚ˆã†ã¨ã—ãŸã¨ãã®æ¨©é™ä¸è¶³ã‚¨ãƒ©ãƒ¼</h1>
        
        <div class="article-meta">
          <time class="article-date" datetime='2022-09-08'>
            2022/09/08 ã«å…¬é–‹
          </time>
          
          
          
          <span class="reading-time">ğŸ“– ç´„1åˆ†</span>
        </div>
        <div class="article-tags">
          
          <a href="https://zatoima.github.io/blog/aws/" class="tag-badge"><img src="/images/tags/aws.svg" alt="AWS" class="tag-badge-icon" loading="lazy">AWS</a>
          
        </div>
        
      </div>
      <div class="article-content">
        <h3 id="ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸">ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>You are not authorized to perform this operation. Please consult the permissions associated with your AWS Backup role(s), and refer to the AWS Backup documentation for more details. Encoded authorization failure message: &lt;çœç•¥&gt;
</span></span></code></pre></div><p><code>aws sts decode-authorization-message --encoded-message &lt;ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸&gt;</code>ã§ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹ã€‚</p>
<h3 id="decodeãƒ¡ãƒƒã‚»ãƒ¼ã‚¸">Decodeãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;DecodedMessage&#34;</span>: <span style="color:#f1fa8c">&#34;{\&#34;allowed\&#34;:false,\&#34;explicitDeny\&#34;:false,\&#34;matchedStatements\&#34;:{\&#34;items\&#34;:[]},\&#34;failures\&#34;:{\&#34;items\&#34;:[]},\&#34;context\&#34;:{\&#34;principal\&#34;:{\&#34;id\&#34;:\&#34;AROAR23YLZYEOUMEHOE2O:AWSBackup-AWSBackupROLEEC2\&#34;,\&#34;arn\&#34;:\&#34;arn:aws:sts::xxxxxxxxxxxxx:assumed-role/AWSBackupROLEEC2/AWSBackup-AWSBackupROLEEC2\&#34;},\&#34;action\&#34;:\&#34;iam:PassRole\&#34;,\&#34;resource\&#34;:\&#34;arn:aws:iam::xxxxxxxxxxxxx:role/IAM_ROLE_EC2_Access\&#34;,\&#34;conditions\&#34;:{\&#34;items\&#34;:[{\&#34;key\&#34;:\&#34;aws:Region\&#34;,\&#34;values\&#34;:{\&#34;items\&#34;:[{\&#34;value\&#34;:\&#34;ap-northeast-1\&#34;}]}},{\&#34;key\&#34;:\&#34;aws:Service\&#34;,\&#34;values\&#34;:{\&#34;items\&#34;:[{\&#34;value\&#34;:\&#34;ec2\&#34;}]}},{\&#34;key\&#34;:\&#34;aws:Resource\&#34;,\&#34;values\&#34;:{\&#34;items\&#34;:[{\&#34;value\&#34;:\&#34;role/IAM_ROLE_EC2_Access\&#34;}]}},{\&#34;key\&#34;:\&#34;iam:RoleName\&#34;,\&#34;values\&#34;:{\&#34;items\&#34;:[{\&#34;value\&#34;:\&#34;IAM_ROLE_EC2_Access\&#34;}]}},{\&#34;key\&#34;:\&#34;aws:Type\&#34;,\&#34;values\&#34;:{\&#34;items\&#34;:[{\&#34;value\&#34;:\&#34;role\&#34;}]}},{\&#34;key\&#34;:\&#34;aws:Account\&#34;,\&#34;values\&#34;:{\&#34;items\&#34;:[{\&#34;value\&#34;:\&#34;xxxxxxxxxxxxx\&#34;}]}},{\&#34;key\&#34;:\&#34;aws:ARN\&#34;,\&#34;values\&#34;:{\&#34;items\&#34;:[{\&#34;value\&#34;:\&#34;arn:aws:iam::xxxxxxxxxxxxx:role/IAM_ROLE_EC2_Access\&#34;}]}}]}}}&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>iam:PassRole</code>ç³»ã§ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¦ã„ã‚‹ã‚ˆã†ã ã€‚</p>
<p>ä¸‹è¨˜è¨˜äº‹ã®é€šã‚Šã€è¿½åŠ ã®ãƒãƒªã‚·ãƒ¼ã‚’ã‚¢ã‚¿ãƒƒãƒã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>
<ul>
<li><a href="https://aws.amazon.com/jp/premiumsupport/knowledge-center/aws-backup-encoded-authorization-failure/">AWS Backup ã‚’ä½¿ç”¨ã—ã¦ Amazon EC2 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å¾©å…ƒã™ã‚‹ã¨ãã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸèªå¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</a></li>
<li><a href="https://dev.classmethod.jp/articles/tsnote-backup-restore-role/">EC2 ã® AMI ã‹ã‚‰ã¯å¾©å…ƒã§ãã‚‹ãŒã€AWS Backup ã‹ã‚‰å¾©å…ƒã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸéš›ã®å¯¾å‡¦æ–¹æ³• | DevelopersIO</a></li>
</ul>
<blockquote>
<p>å¯¾è±¡ã® EC2 ã‚’ç¢ºèªã™ã‚‹ã¨ã€IAM ãƒ­ãƒ¼ãƒ«ãŒã‚¢ã‚¿ãƒƒãƒã•ã‚Œã¦ã„ã¾ã—ãŸã€‚
ã“ã®å ´åˆã«ã¯å¾©å…ƒã™ã‚‹éš›ã«ã€æ–°ãŸã« IAM ãƒ­ãƒ¼ãƒ«ã‚’ã‚¢ã‚¿ãƒƒãƒã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ãã®ãŸã‚ã€AWS Backup ã‹ã‚‰å¾©å…ƒã™ã‚‹å ´åˆã«ã¯ã€ã€ŒAWS Backup ç”¨ã®ãƒ­ãƒ¼ãƒ«ã€ã«ä»¥ä¸‹ã®ã‚ˆã†ã«ã€ŒEC2 ã«ã‚¢ã‚¿ãƒƒãƒã™ã‚‹ãƒ­ãƒ¼ãƒ«ã‚’ PassRole ã§ãã‚‹ã€æ¨©é™ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;Version&#34;</span>: <span style="color:#f1fa8c">&#34;2012-10-17&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#ff79c6">&#34;Statement&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;Action&#34;</span>: <span style="color:#f1fa8c">&#34;iam:PassRole&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;Resource&#34;</span>: <span style="color:#f1fa8c">&#34;arn:aws:iam::111122223333:role/*&#34;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#ff79c6">&#34;Effect&#34;</span>: <span style="color:#f1fa8c">&#34;Allow&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
      </div>
    </div>

    
    
    <nav class="prev-next-nav">
      
      <a href="https://zatoima.github.io/python-azure-english-text-to-speech/" class="prev-next-link prev-link">
        <span class="prev-next-label">â† å‰ã®è¨˜äº‹</span>
        <span class="prev-next-title">Azure Text to Speechã§è‹±èªãƒ†ã‚­ã‚¹ãƒˆã‚’Pythonã§mp3åŒ–ã™ã‚‹</span>
      </a>
      
      
      <a href="https://zatoima.github.io/snowflake-certificate-snowpro-advanced-memo/" class="prev-next-link next-link">
        <span class="prev-next-label">æ¬¡ã®è¨˜äº‹ â†’</span>
        <span class="prev-next-title">SnowPro Advanced Architectå¯¾ç­–ãƒ¡ãƒ¢</span>
      </a>
      
    </nav>
    

    
<div class="share-buttons">
  <span class="share-label">å…±æœ‰:</span>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fzatoima.github.io%2faws-backup-ec2-restore-error%2f&text=AWS&#43;Backup%E3%81%A7EC2%E3%82%92%E5%BE%A9%E5%85%83%E3%81%97%E3%82%88%E3%81%86%E3%81%A8%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AE%E6%A8%A9%E9%99%90%E4%B8%8D%E8%B6%B3%E3%82%A8%E3%83%A9%E3%83%BC" target="_blank" rel="noopener noreferrer" class="share-btn share-twitter" aria-label="Xã§å…±æœ‰">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
  </a>
  <a href="https://b.hatena.ne.jp/entry/https://zatoima.github.io/aws-backup-ec2-restore-error/" target="_blank" rel="noopener noreferrer" class="share-btn share-hatena" aria-label="ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ ">B!</a>
</div>



<div class="related-articles">
  <h2 class="related-articles-title">é–¢é€£ã—ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„è¨˜äº‹</h2>
  <ul class="related-list">
    
    <li><a href="/aws-cost-management-action-error/">AWS ã‚³ã‚¹ãƒˆç®¡ç†ã®ãƒšãƒ¼ã‚¸ã§ã€Œã“ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹</a></li>
    
    <li><a href="/aws-dynamodb-to-aurora-postgresql-replication/">DynamoDBã‹ã‚‰Aurora PostgreSQLã¸ã®ãƒ‡ãƒ¼ã‚¿ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒã‚’ä½œæˆã™ã‚‹</a></li>
    
    <li><a href="/aws-aurora-postgresql-pg_settings-csv-output/">Aurora PostgreSQLã§pg_settingsã‚’CSVã§å‡ºåŠ›ã™ã‚‹</a></li>
    
    <li><a href="/aws-lamdba-vpc-eni-number-use/">Lambdaã‚’VPCã§ä½¿ç”¨ã™ã‚‹éš›ã®ENIæ•°</a></li>
    
    <li><a href="/aws-aurora-patch-apply-downtime-log/">Aurora PostgreSQLã«ãƒ‘ãƒƒãƒã‚’é©ç”¨ã—ãŸéš›ã®ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ãƒ­ã‚°</a></li>
    
  </ul>
</div>




<div class="post-tags">
  
  <a href="https://zatoima.github.io/blog/aws/" class="tag-badge"><img src="/images/tags/aws.svg" alt="AWS" class="tag-badge-icon" loading="lazy">AWS</a>
  
</div>


  </article>

  
  <aside class="article-sidebar">
    <div class="toc-container">
      <div class="toc-title">ç›®æ¬¡</div>
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸">ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</a></li>
        <li><a href="#decodeãƒ¡ãƒƒã‚»ãƒ¼ã‚¸">Decodeãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
  </aside>
  
</div>

    </main>

    <footer class="site-footer">
      <div class="footer-inner">
        <div class="footer-links">
          <a href="/">ãƒ›ãƒ¼ãƒ </a>
          <a href="/blog/">è¨˜äº‹ä¸€è¦§</a>
          <a href="/tags/">ã‚¿ã‚°ä¸€è¦§</a>
          <a href="/about/">About</a>
        </div>
        <div class="footer-copyright">Copyright Â© 2019, zatoima.</div>
      </div>
    </footer>
  </div>
  <script src="/js/lightbox.js" defer></script>
  <script src="/js/toc-highlight.js" defer></script>
  <script src="/js/code-copy.js" defer></script>
  <script src="/js/dark-mode.js" defer></script>
  <script src="/js/mobile-nav.js" defer></script>
  <script src="/js/search.js" defer></script>
</body>

</html>
