<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://zatoima.github.io/favicon.svg" />
<title>Visualizing PostgreSQL SQL Execution Plans (pev, gocmdpev) | my opinion is my own</title>
<meta name="title" content="Visualizing PostgreSQL SQL Execution Plans (pev, gocmdpev)" />
<meta name="description" content="" />
<meta name="keywords" content="AWS,PostgreSQL," />


<meta property="og:url" content="https://zatoima.github.io/en/aws-postgresql-execute-plan-visualization/">
  <meta property="og:site_name" content="my opinion is my own">
  <meta property="og:title" content="Visualizing PostgreSQL SQL Execution Plans (pev, gocmdpev)">
  <meta property="og:description" content="memo blog. Hugo on GitHub Pages">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2021-08-08T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-08-08T00:00:00+00:00">
    <meta property="article:tag" content="AWS">
    <meta property="article:tag" content="PostgreSQL">
    <meta property="og:image" content="https://zatoima.github.io/images/share.png">




  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://zatoima.github.io/images/share.png">
  <meta name="twitter:title" content="Visualizing PostgreSQL SQL Execution Plans (pev, gocmdpev)">
  <meta name="twitter:description" content="memo blog. Hugo on GitHub Pages">




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "\"Visualizing PostgreSQL SQL Execution Plans (pev, gocmdpev)\"",
  "description": "\"\"",
  "datePublished": "\"2021-08-08T00:00:00Z\"",
  "dateModified": "\"2021-08-08T00:00:00Z\"",
  "author": {
    "@type": "Person",
    "name": "\"zatoima\"",
    "url": "https://zatoima.github.io/about/"
  },
  "publisher": {
    "@type": "Person",
    "name": "\"zatoima\""
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "\"https://zatoima.github.io/en/aws-postgresql-execute-plan-visualization/\""
  },
  "inLanguage": "en",
  "wordCount":  666 ,
  "keywords": "[\"AWS\",\"PostgreSQL\"]"
}
</script>

<meta name="referrer" content="no-referrer-when-downgrade" />

  <link rel="alternate" type="text/plain" href="/llms.txt" title="LLMs.txt" />
  <link rel="alternate" type="text/plain" href="/llms-full.txt" title="LLMs-full.txt" />

  <script>
    (function(){
      var t = localStorage.getItem('theme');
      if (t === 'dark' || ((!t || t === 'system') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.setAttribute('data-theme', 'dark');
      }
    })();
  </script><link rel="stylesheet" href="/css/zenn.css">

<script async src="https://www.googletagmanager.com/gtag/js?id=G-STFZ9QMXGM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-STFZ9QMXGM');
</script>

    
    <link rel="alternate" hreflang="ja" href="https://zatoima.github.io/aws-postgresql-execute-plan-visualization/" />
    
    <link rel="alternate" hreflang="en" href="https://zatoima.github.io/en/aws-postgresql-execute-plan-visualization/" />
  
</head>

<body>
  <a href="#main" class="skip-link">Skip to main content</a>
  <div class="reading-progress"></div>
  
  
  <div class="translation-notice">This is an English translation of a Japanese blog. Some content may not be fully translated.</div>
  
  <div class="site-wrapper">
    <header class="site-header">
      <div class="header-inner">
        <a href="/en/" class="site-logo">my opinion is my own</a>
        <nav class="header-nav">
<a href="/about/">About</a>
<a href="/en/blog/">Blog</a>
<a href="/index.xml">RSS</a>
<a href="/other/">Other</a>
<a href="/llms.txt" title="LLMs.txt - Site info for AI/LLM">llms.txt</a>
</nav>
        <div class="header-actions">
          <button id="search-btn" class="header-icon-btn" aria-label="Search">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
          </button>
          <button id="dark-mode-btn" class="header-icon-btn" aria-label="Toggle dark mode" data-label-light="Light" data-label-dark="Dark" data-label-system="System">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          </button><div class="lang-switcher">
  <button id="lang-btn" class="header-icon-btn" aria-label="Switch language">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
  </button>
  <div id="lang-dropdown" class="lang-dropdown">
    
    <a href="https://zatoima.github.io/" class="lang-dropdown-item" lang="ja">
      Êó•Êú¨Ë™û
    </a>
    
    <a href="https://zatoima.github.io/en/" class="lang-dropdown-item active" lang="en">
      English
    </a>
    
  </div>
</div>
<button id="hamburger-btn" class="hamburger-btn" aria-label="Menu">
            <span></span><span></span><span></span>
          </button>
        </div>
      </div>
    </header>

    
    <div id="search-overlay" class="search-overlay">
      <div class="search-modal">
        <input type="text" id="search-input" class="search-input" placeholder="Search articles... (Ctrl&#43;K)" autocomplete="off" data-min-chars="Please enter at least 2 characters" data-no-results="No results found">
        <div id="search-results" class="search-results"></div>
      </div>
    </div>

    
    <div id="nav-overlay" class="nav-overlay"></div>

    <main id="main" class="site-main">
<div class="article-layout">
  <article class="article-main">
    
    <nav class="breadcrumb" aria-label="Breadcrumb">
  <a href="/en/">Home</a>
  <span class="breadcrumb-sep">&gt;</span>
  
  <a href="/blog/">Blog</a>
  <span class="breadcrumb-sep">&gt;</span>
  
  <span class="breadcrumb-current">Visualizing PostgreSQL SQL Execution ‚Ä¶</span>
</nav>

    
    <div class="article-card">
      <div class="article-header">
        <div class="article-emoji"><img src="/images/tags/aws.svg" alt="AWS" class="tag-icon" loading="lazy"></div>
        <h1>Visualizing PostgreSQL SQL Execution Plans (pev, gocmdpev)</h1>
        
        <div class="article-meta">
          <time class="article-date" datetime='2021-08-08'>
            Published on 2021/08/08
          </time>
          
          
          
          <span class="reading-time">üìñ 1 min read</span>
        </div>
        <div class="article-tags">
          
          <a href="https://zatoima.github.io/en/blog/aws/" class="tag-badge"><img src="/images/tags/aws.svg" alt="AWS" class="tag-badge-icon" loading="lazy">AWS</a>
          
          <a href="https://zatoima.github.io/en/blog/postgresql/" class="tag-badge"><img src="/images/tags/postgresql.svg" alt="PostgreSQL" class="tag-badge-icon" loading="lazy">PostgreSQL</a>
          
        </div>
        
      </div>
      <div class="article-content">
        <p>First, let&rsquo;s try gocmdpev.</p>
<h3 id="install-go">Install Go</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#ff79c6">[</span>ec2-user@bastin ~<span style="color:#ff79c6">]</span>$ sudo yum -y install go
</span></span><span style="display:flex;"><span>Loaded plugins: langpacks, priorities, update-motd
</span></span><span style="display:flex;"><span>amzn2-core                                                                                                                                                                                        | 3.7 kB  00:00:00
</span></span><span style="display:flex;"><span><span style="color:#bd93f9">228</span> packages excluded due to repository priority protections
</span></span><span style="display:flex;"><span>Resolving Dependencies
</span></span><span style="display:flex;"><span>--&gt; Running transaction check
</span></span><span style="display:flex;"><span>~<span style="color:#ff79c6">(</span>omitted<span style="color:#ff79c6">)</span>~
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Installed:
</span></span><span style="display:flex;"><span>  golang.x86_64 0:1.15.14-1.amzn2.0.1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Dependency Installed:
</span></span><span style="display:flex;"><span>  apr.x86_64 0:1.6.3-5.amzn2.0.2        apr-util.x86_64 0:1.6.1-5.amzn2.0.2     apr-util-bdb.x86_64 0:1.6.1-5.amzn2.0.2     golang-bin.x86_64 0:1.15.14-1.amzn2.0.1     golang-src.noarch 0:1.15.14-1.amzn2.0.1
</span></span><span style="display:flex;"><span>  mercurial.x86_64 0:2.6.2-10.amzn2     neon.x86_64 0:0.30.0-3.amzn2.0.2        pakchois.x86_64 0:0.4-10.amzn2.0.2          subversion.x86_64 0:1.7.14-16.amzn2.0.1     subversion-libs.x86_64 0:1.7.14-16.amzn2.0.1
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Complete!
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span>ec2-user@bastin ~<span style="color:#ff79c6">]</span>$
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span>ec2-user@bastin ~<span style="color:#ff79c6">]</span>$ go version
</span></span><span style="display:flex;"><span>go version go1.15.14 linux/amd64
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#ff79c6">[</span>ec2-user@bastin ~<span style="color:#ff79c6">]</span>$ go get -u github.com/simon-engledew/gocmdpev
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span>ec2-user@bastin ~<span style="color:#ff79c6">]</span>$ <span style="color:#8be9fd;font-style:italic">echo</span> <span style="color:#8be9fd;font-style:italic">$?</span>
</span></span><span style="display:flex;"><span><span style="color:#bd93f9">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">[</span>ec2-user@bastin ~<span style="color:#ff79c6">]</span>$ ./go/bin/gocmdpev --version
</span></span><span style="display:flex;"><span>1.0.0
</span></span></code></pre></div><h3 id="generate-test-data-for-visualization">Generate Test Data for Visualization</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>pgbench -i -s <span style="color:#bd93f9">100</span> -U postgres -h xxxx.cluster-xxxx.ap-northeast-1.rds.amazonaws.com pgbench
</span></span></code></pre></div><h3 id="test-sql">Test SQL</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>EXPLAIN <span style="color:#ff79c6">(</span>ANALYZE, COSTS, VERBOSE, BUFFERS, FORMAT JSON<span style="color:#ff79c6">)</span> SELECT t1.aid,t1.bid,t1.abalance,t2.bbalance FROM pgbench_accounts t1, pgbench_branches t2 where t1.bid<span style="color:#ff79c6">=</span>t2.bid ORDER BY t1.abalance DESC;
</span></span></code></pre></div><p>This SQL involves sorting and joins that are likely to be problematic.</p>
<p><img src="/en/aws-postgresql-execute-plan-visualization/image-20210806144117978.png" alt="image-20210806144117978"></p>
<p>With FORMAT specified, generate an execution plan to pass to gocmdpev.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>vi explain.sql
</span></span></code></pre></div><p>Write the following SQL to <code>explain.sql</code>. Specify <code>ANALYZE, COSTS, VERBOSE, BUFFERS, FORMAT JSON</code> as EXPLAIN options.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#ff79c6">EXPLAIN</span> (<span style="color:#ff79c6">ANALYZE</span>, COSTS, <span style="color:#ff79c6">VERBOSE</span>, BUFFERS, FORMAT JSON) <span style="color:#ff79c6">SELECT</span> t1.aid,t1.bid,t1.abalance,t2.bbalance <span style="color:#ff79c6">FROM</span> pgbench_accounts t1, pgbench_branches t2 <span style="color:#ff79c6">where</span> t1.bid<span style="color:#ff79c6">=</span>t2.bid <span style="color:#ff79c6">ORDER</span> <span style="color:#ff79c6">BY</span> t1.abalance <span style="color:#ff79c6">DESC</span>;
</span></span></code></pre></div><p>Execute the SQL and output the execution plan to <code>analyze.json</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>psql -h auroraserverlessv1.cluster-cm678nkt5thr.ap-northeast-1.rds.amazonaws.com -U postgres -d pgbench -qAt -f explain.sql &gt; analyze.json
</span></span></code></pre></div><p>Pass the output <code>analyze.json</code> to gocmdpev:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>cat analyze.json | gocmdpev
</span></span></code></pre></div><p>The output will look like the following. It displays where time is being spent with color coding, making it easier to analyze.</p>
<p><img src="/en/aws-postgresql-execute-plan-visualization/image-20210806144714670.png" alt="image-20210806144714670"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#ff79c6">[</span>ec2-user@bastin ~<span style="color:#ff79c6">]</span>$ cat analyze.json | gocmdpev
</span></span><span style="display:flex;"><span>‚óã Total Cost: 1,790,852.84
</span></span><span style="display:flex;"><span>‚óã Planning Time: 53.45 ms
</span></span><span style="display:flex;"><span>‚óã Execution Time: 7.92 s
</span></span><span style="display:flex;"><span>‚î¨
</span></span><span style="display:flex;"><span>‚îÇ
</span></span><span style="display:flex;"><span>‚îî‚îÄ‚å† Gather Merge  costliest   largest
</span></span><span style="display:flex;"><span>  ‚îÇ
</span></span><span style="display:flex;"><span>  ‚îÇ ‚óã Duration: 2.03 s <span style="color:#ff79c6">(</span>26%<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>  ‚îÇ ‚óã Cost: 962,873.54 <span style="color:#ff79c6">(</span>54%<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>  ‚îÇ ‚óã Rows: 10,000,000
</span></span><span style="display:flex;"><span>  ‚îÇ   rows Underestimated by 1.20x
</span></span><span style="display:flex;"><span>  ‚îú‚ñ∫  t1.aid + t1.bid + t1.abalance + t2.bbalance
</span></span><span style="display:flex;"><span>  ‚îÇ
</span></span><span style="display:flex;"><span>  ‚îî‚îÄ‚å† Sort  slowest
</span></span><span style="display:flex;"><span>    ‚îÇ Sorts a record <span style="color:#8be9fd;font-style:italic">set</span> based on the specified sort key.
</span></span><span style="display:flex;"><span>    ‚îÇ ‚óã Duration: 6.60 s <span style="color:#ff79c6">(</span>83%<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>    ‚îÇ ‚óã Cost: 610,973.3400000001 <span style="color:#ff79c6">(</span>34%<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>    ‚îÇ ‚óã Rows: 3,333,333
</span></span><span style="display:flex;"><span>    ‚îÇ   rows Overestimated by 1.25x
</span></span><span style="display:flex;"><span>    ‚îú‚ñ∫  t1.aid + t1.bid + t1.abalance + t2.bbalance
</span></span><span style="display:flex;"><span>    ‚îÇ
</span></span><span style="display:flex;"><span>    ‚îî‚îÄ‚å† Hash Join
</span></span><span style="display:flex;"><span>      ‚îÇ Joins to record sets by hashing one of them <span style="color:#ff79c6">(</span>using
</span></span><span style="display:flex;"><span>      ‚îÇ a Hash Scan<span style="color:#ff79c6">)</span>.
</span></span><span style="display:flex;"><span>      ‚îÇ ‚óã Duration: 4.88 s <span style="color:#ff79c6">(</span>62%<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>      ‚îÇ ‚óã Cost: 11,402.289999999979 <span style="color:#ff79c6">(</span>1%<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>      ‚îÇ ‚óã Rows: 3,333,333
</span></span><span style="display:flex;"><span>      ‚îÇ   Inner join
</span></span><span style="display:flex;"><span>      ‚îÇ   on <span style="color:#ff79c6">(</span>t1.bid <span style="color:#ff79c6">=</span> t2.bid<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>      ‚îÇ   rows Overestimated by 1.25x
</span></span><span style="display:flex;"><span>      ‚îú‚ñ∫  t1.aid + t1.bid + t1.abalance + t2.bbalance
</span></span><span style="display:flex;"><span>      ‚îÇ
</span></span><span style="display:flex;"><span>      ‚îú‚îÄ‚å† Seq Scan
</span></span><span style="display:flex;"><span>      ‚îÇ ‚îÇ Finds relevant records by sequentially
</span></span><span style="display:flex;"><span>      ‚îÇ ‚îÇ scanning the input record set. When reading
</span></span><span style="display:flex;"><span>      ‚îÇ ‚îÇ from a table, Seq Scans <span style="color:#ff79c6">(</span>unlike Index Scans<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>      ‚îÇ ‚îÇ perform a single <span style="color:#8be9fd;font-style:italic">read</span> operation <span style="color:#ff79c6">(</span>only the
</span></span><span style="display:flex;"><span>      ‚îÇ ‚îÇ table is <span style="color:#8be9fd;font-style:italic">read</span><span style="color:#ff79c6">)</span>.
</span></span><span style="display:flex;"><span>      ‚îÇ ‚îÇ ‚óã Duration: 5.12 s <span style="color:#ff79c6">(</span>65%<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>      ‚îÇ ‚îÇ ‚óã Cost: 205,601.67 <span style="color:#ff79c6">(</span>11%<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>      ‚îÇ ‚îÇ ‚óã Rows: 3,333,333
</span></span><span style="display:flex;"><span>      ‚îÇ ‚îÇ   on public.pgbench_accounts
</span></span><span style="display:flex;"><span>      ‚îÇ ‚îÇ   rows Overestimated by 1.25x
</span></span><span style="display:flex;"><span>      ‚îÇ ‚å°‚ñ∫ t1.aid + t1.bid + t1.abalance
</span></span><span style="display:flex;"><span>      ‚îÇ
</span></span><span style="display:flex;"><span>      ‚îî‚îÄ‚å† Hash
</span></span><span style="display:flex;"><span>        ‚îÇ Generates a <span style="color:#8be9fd;font-style:italic">hash</span> table from the records in the
</span></span><span style="display:flex;"><span>        ‚îÇ input recordset. Hash is used by Hash Join.
</span></span><span style="display:flex;"><span>        ‚îÇ ‚óã Duration: &lt;<span style="color:#bd93f9">1</span> ms <span style="color:#ff79c6">(</span>0%<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>        ‚îÇ ‚óã Cost: <span style="color:#bd93f9">0</span> <span style="color:#ff79c6">(</span>0%<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>        ‚îÇ ‚óã Rows: <span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span>        ‚îú‚ñ∫  t2.bbalance + t2.bid
</span></span><span style="display:flex;"><span>        ‚îÇ
</span></span><span style="display:flex;"><span>        ‚îî‚îÄ‚å† Seq Scan
</span></span><span style="display:flex;"><span>          ‚îÇ Finds relevant records by sequentially
</span></span><span style="display:flex;"><span>          ‚îÇ scanning the input record set. When reading
</span></span><span style="display:flex;"><span>          ‚îÇ from a table, Seq Scans <span style="color:#ff79c6">(</span>unlike Index Scans<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>          ‚îÇ perform a single <span style="color:#8be9fd;font-style:italic">read</span> operation <span style="color:#ff79c6">(</span>only the
</span></span><span style="display:flex;"><span>          ‚îÇ table is <span style="color:#8be9fd;font-style:italic">read</span><span style="color:#ff79c6">)</span>.
</span></span><span style="display:flex;"><span>          ‚îÇ ‚óã Duration: &lt;<span style="color:#bd93f9">1</span> ms <span style="color:#ff79c6">(</span>0%<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>          ‚îÇ ‚óã Cost: <span style="color:#bd93f9">2</span> <span style="color:#ff79c6">(</span>0%<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>          ‚îÇ ‚óã Rows: <span style="color:#bd93f9">100</span>
</span></span><span style="display:flex;"><span>          ‚îÇ   on public.pgbench_branches
</span></span><span style="display:flex;"><span>          ‚å°‚ñ∫ t2.bbalance + t2.bid
</span></span></code></pre></div><p>There is also a visualization tool called pev. It may be more intuitive and easier to view. You can choose between them depending on whether you want to check via CLI or GUI. Like gocmdpev, it can visualize plans by loading <code>ANALYZE, COSTS, VERBOSE, BUFFERS, FORMAT JSON</code> output.</p>
<blockquote>
<p><a href="https://github.com/AlexTatiyants/pev" target="_blank" rel="noopener noreferrer">https://github.com/AlexTatiyants/pev</a>
</p>
<p><a href="http://tatiyants.com/pev/#/plans/new" target="_blank" rel="noopener noreferrer">http://tatiyants.com/pev/#/plans/new</a>
</p>
</blockquote>
<p>As stated below, it processes locally, but it&rsquo;s worth being cautious just in case:</p>
<blockquote>
<p>DISCLAIMER: Pev stores your plans locally (localStorage) and will not send them anywhere.</p>
</blockquote>
<p><img src="/en/aws-postgresql-execute-plan-visualization/image-20210806145019217.png" alt="image-20210806145019217"></p>
<p><img src="/en/aws-postgresql-execute-plan-visualization/image-20210806145035249.png" alt="image-20210806145035249"></p>
<blockquote>
<p>Make PostgreSQL EXPLAIN easier to read with pev and gocmdpev | gocmdpev <a href="https://wonderwall.hatenablog.com/entry/2017/09/13/220000" target="_blank" rel="noopener noreferrer">https://wonderwall.hatenablog.com/entry/2017/09/13/220000</a>
</p>
</blockquote>

      </div>
    </div>

    
    
    
    <a href="https://github.com/zatoima/zatoima.github.io/edit/main/content/blog/2021-08-08-PostgreSQL%e3%81%aeSQL%e5%ae%9f%e8%a1%8c%e8%a8%88%e7%94%bb%e3%81%ae%e5%8f%af%e8%a6%96%e5%8c%96%ef%bc%88pev%e3%80%81gocmdpev%ef%bc%89/index.md" target="_blank" rel="noopener noreferrer" class="github-edit-link">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
      Suggest an edit on GitHub
    </a>
    
    

    
    
    <nav class="prev-next-nav">
      
      <a href="https://zatoima.github.io/en/aws-aurora-aws-cli-create-cluster-instance/" class="prev-next-link prev-link">
        <span class="prev-next-label">‚Üê Previous article</span>
        <span class="prev-next-title">Creating Aurora PostgreSQL with AWS CLI</span>
      </a>
      
      
      <a href="https://zatoima.github.io/en/alexa-change-word-voice-control-piyolog/" class="prev-next-link next-link">
        <span class="prev-next-label">Next article ‚Üí</span>
        <span class="prev-next-title">Handling Voice Input Errors in Alexa&#39;s PiyoLog ‚Ä¶</span>
      </a>
      
    </nav>
    

    
<div class="share-buttons">
  <span class="share-label">Share:</span>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fzatoima.github.io%2fen%2faws-postgresql-execute-plan-visualization%2f&text=Visualizing&#43;PostgreSQL&#43;SQL&#43;Execution&#43;Plans&#43;%28pev%2C&#43;gocmdpev%29" target="_blank" rel="noopener noreferrer" class="share-btn share-twitter" aria-label="Share on X">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
  </a>
  <a href="https://b.hatena.ne.jp/entry/https://zatoima.github.io/en/aws-postgresql-execute-plan-visualization/" target="_blank" rel="noopener noreferrer" class="share-btn share-hatena" aria-label="Add to Hatena Bookmark">B!</a>
</div>



<div class="related-articles">
  <h2 class="related-articles-title">Related articles</h2>
  <ul class="related-list">
    
    <li><a href="/en/aws-aurora-postgresql-hammerdb-benchmark.html">Running HammerDB TPC-C Against Aurora PostgreSQL</a></li>
    
    <li><a href="/en/aws-postgresql-rdsproxy-failover.html">Performing Failover of Aurora PostgreSQL Using RDS Proxy</a></li>
    
    <li><a href="/en/aws-aurora-aws-cli-create-cluster-instance/">Creating Aurora PostgreSQL with AWS CLI</a></li>
    
    <li><a href="/en/aws-ec2-python-selenium-install.html">Setting Up Python &#43; Selenium on Amazon EC2</a></li>
    
    <li><a href="/en/aws-kms-import-key.html">Notes and Considerations for BYOK-Imported KMS Keys</a></li>
    
  </ul>
</div>




<div class="post-tags">
  
  <a href="https://zatoima.github.io/en/blog/aws/" class="tag-badge"><img src="/images/tags/aws.svg" alt="AWS" class="tag-badge-icon" loading="lazy">AWS</a>
  
  <a href="https://zatoima.github.io/en/blog/postgresql/" class="tag-badge"><img src="/images/tags/postgresql.svg" alt="PostgreSQL" class="tag-badge-icon" loading="lazy">PostgreSQL</a>
  
</div>


  </article>

  
  <aside class="article-sidebar">
    <div class="toc-container">
      <div class="toc-title">Table of Contents</div>
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#install-go">Install Go</a></li>
        <li><a href="#generate-test-data-for-visualization">Generate Test Data for Visualization</a></li>
        <li><a href="#test-sql">Test SQL</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
  </aside>
  
</div>

    </main>

    <footer class="site-footer">
      <div class="footer-inner">
        <div class="footer-disclaimer">The contents of this blog are my personal views and do not represent the official views of any company or organization I am affiliated with.</div>
        <div class="footer-links">
          <a href="/en/">Home</a>
          <a href="/en/blog/">Articles</a>
          <a href="/en/tags/">Tags</a>
          <a href="/en/about/">About</a>
        </div>
        <div class="footer-social">
          <a href="https://github.com/zatoima" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
          </a>
          <a href="https://x.com/zatoima1" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
          </a>
          <a href="/index.xml" aria-label="RSS">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19.01 7.38 20 6.18 20C5 20 4 19.01 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1z"/></svg>
          </a>
        </div>
        <div class="footer-copyright">Copyright ¬© 2019, zatoima.</div>
        <div class="footer-disclaimer">memo blog. Hugo on GitHub Pages</div>
        <div class="footer-disclaimer">The contents of this blog are my personal views and do not represent the official views of any company or organization I am affiliated with.</div>
      </div>
    </footer>
  </div>
  <script src="/js/lightbox.js" defer></script>
  <script src="/js/toc-highlight.js" defer></script>
  <script src="/js/code-copy.js" defer></script>
  <script src="/js/dark-mode.js" defer></script>
  <script src="/js/mobile-nav.js" defer></script>
  <script src="/js/search.js" defer></script>
  <script src="/js/reading-progress.js" defer></script>
  <script src="/js/lang-detect.js" defer></script>
  <script src="/js/lang-switcher.js" defer></script>
</body>

</html>
