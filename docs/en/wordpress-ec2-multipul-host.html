<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://zatoima.github.io/favicon.svg" />
<title>How to Host Multiple WordPress Sites on a Single EC2 Instance | my opinion is my own</title>
<meta name="title" content="How to Host Multiple WordPress Sites on a Single EC2 Instance" />
<meta name="description" content="" />
<meta name="keywords" content="WordPress,AWS,EC2," />


<meta property="og:url" content="https://zatoima.github.io/en/wordpress-ec2-multipul-host.html">
  <meta property="og:site_name" content="my opinion is my own">
  <meta property="og:title" content="How to Host Multiple WordPress Sites on a Single EC2 Instance">
  <meta property="og:description" content="memo blog. Hugo on GitHub Pages">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2020-02-13T00:00:00+00:00">
    <meta property="article:modified_time" content="2020-02-13T00:00:00+00:00">
    <meta property="article:tag" content="WordPress">
    <meta property="article:tag" content="AWS">
    <meta property="article:tag" content="EC2">
    <meta property="og:image" content="https://zatoima.github.io/images/share.png">




  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://zatoima.github.io/images/share.png">
  <meta name="twitter:title" content="How to Host Multiple WordPress Sites on a Single EC2 Instance">
  <meta name="twitter:description" content="memo blog. Hugo on GitHub Pages">




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "\"How to Host Multiple WordPress Sites on a Single EC2 Instance\"",
  "description": "\"\"",
  "datePublished": "\"2020-02-13T00:00:00Z\"",
  "dateModified": "\"2020-02-13T00:00:00Z\"",
  "author": {
    "@type": "Person",
    "name": "\"zatoima\"",
    "url": "https://zatoima.github.io/about/"
  },
  "publisher": {
    "@type": "Person",
    "name": "\"zatoima\""
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "\"https://zatoima.github.io/en/wordpress-ec2-multipul-host.html\""
  },
  "inLanguage": "en",
  "wordCount":  369 ,
  "keywords": "[\"WordPress\",\"AWS\",\"EC2\"]"
}
</script>

<meta name="referrer" content="no-referrer-when-downgrade" />

  <link rel="alternate" type="text/plain" href="/llms.txt" title="LLMs.txt" />
  <link rel="alternate" type="text/plain" href="/llms-full.txt" title="LLMs-full.txt" />

  <script>
    (function(){
      var t = localStorage.getItem('theme');
      if (t === 'dark' || ((!t || t === 'system') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.setAttribute('data-theme', 'dark');
      }
    })();
  </script><link rel="stylesheet" href="/css/zenn.css">

<script async src="https://www.googletagmanager.com/gtag/js?id=G-STFZ9QMXGM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-STFZ9QMXGM');
</script>

    
    <link rel="alternate" hreflang="ja" href="https://zatoima.github.io/wordpress-ec2-multipul-host.html" />
    
    <link rel="alternate" hreflang="en" href="https://zatoima.github.io/en/wordpress-ec2-multipul-host.html" />
  
</head>

<body>
  <a href="#main" class="skip-link">Skip to main content</a>
  <div class="reading-progress"></div>
  
  
  <div class="translation-notice">This is an English translation of a Japanese blog. Some content may not be fully translated.</div>
  
  <div class="site-wrapper">
    <header class="site-header">
      <div class="header-inner">
        <a href="/en/" class="site-logo">my opinion is my own</a>
        <nav class="header-nav">
<a href="/about/">About</a>
<a href="/en/blog/">Blog</a>
<a href="/index.xml">RSS</a>
<a href="/other/">Other</a>
<a href="/llms.txt" title="LLMs.txt - Site info for AI/LLM">llms.txt</a>
</nav>
        <div class="header-actions">
          <button id="search-btn" class="header-icon-btn" aria-label="Search">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
          </button>
          <button id="dark-mode-btn" class="header-icon-btn" aria-label="Toggle dark mode" data-label-light="Light" data-label-dark="Dark" data-label-system="System">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          </button><div class="lang-switcher">
  <button id="lang-btn" class="header-icon-btn" aria-label="Switch language">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
  </button>
  <div id="lang-dropdown" class="lang-dropdown">
    
    <a href="https://zatoima.github.io/" class="lang-dropdown-item" lang="ja">
      Êó•Êú¨Ë™û
    </a>
    
    <a href="https://zatoima.github.io/en/" class="lang-dropdown-item active" lang="en">
      English
    </a>
    
  </div>
</div>
<button id="hamburger-btn" class="hamburger-btn" aria-label="Menu">
            <span></span><span></span><span></span>
          </button>
        </div>
      </div>
    </header>

    
    <div id="search-overlay" class="search-overlay">
      <div class="search-modal">
        <input type="text" id="search-input" class="search-input" placeholder="Search articles... (Ctrl&#43;K)" autocomplete="off" data-min-chars="Please enter at least 2 characters" data-no-results="No results found">
        <div id="search-results" class="search-results"></div>
      </div>
    </div>

    
    <div id="nav-overlay" class="nav-overlay"></div>

    <main id="main" class="site-main">
<div class="article-layout">
  <article class="article-main">
    
    <nav class="breadcrumb" aria-label="Breadcrumb">
  <a href="/en/">Home</a>
  <span class="breadcrumb-sep">&gt;</span>
  
  <a href="/blog/">Blog</a>
  <span class="breadcrumb-sep">&gt;</span>
  
  <span class="breadcrumb-current">How to Host Multiple WordPress Sites on ‚Ä¶</span>
</nav>

    
    <div class="article-card">
      <div class="article-header">
        <div class="article-emoji">üìù</div>
        <h1>How to Host Multiple WordPress Sites on a Single EC2 Instance</h1>
        
        <div class="article-meta">
          <time class="article-date" datetime='2020-02-13'>
            Published on 2020/02/13
          </time>
          
          
          
          <span class="reading-time">üìñ 1 min read</span>
        </div>
        <div class="article-tags">
          
          <a href="https://zatoima.github.io/en/blog/wordpress/" class="tag-badge">WordPress</a>
          
          <a href="https://zatoima.github.io/en/blog/aws/" class="tag-badge"><img src="/images/tags/aws.svg" alt="AWS" class="tag-badge-icon" loading="lazy">AWS</a>
          
          <a href="https://zatoima.github.io/en/blog/ec2/" class="tag-badge"><img src="/images/tags/ec2.svg" alt="EC2" class="tag-badge-icon" loading="lazy">EC2</a>
          
        </div>
        
      </div>
      <div class="article-content">
        <h3 id="introduction">Introduction</h3>
<p>I once wanted to host multiple WordPress sites on a t2.micro instance. Since I couldn&rsquo;t find much information about this online, I&rsquo;m writing this note.</p>
<p>The reasons were:</p>
<ul>
<li>Each site has low traffic, low importance, and low load, so I want to operate within the t2.micro free tier as much as possible.</li>
<li>Setting up a separate EC2 instance for each WordPress site is not ideal cost-wise (even with t2.micro).</li>
<li>Managing multiple instances is a hassle.</li>
</ul>
<h3 id="approach">Approach</h3>
<p>Several methods seemed possible:</p>
<ol>
<li>WordPress multisite feature</li>
<li>Running multiple Apache (web server) and DB instances</li>
<li>Using Apache&rsquo;s VirtualHost feature</li>
</ol>
<h4 id="1-wordpress-multisite-feature">1. WordPress Multisite Feature</h4>
<p>With WordPress&rsquo;s multisite feature, you can only choose between subdirectory and subdomain formats; it doesn&rsquo;t appear possible to &ldquo;operate multiple domains on a single WordPress&rdquo; (though I might be wrong).</p>
<h5 id="subdirectory-format">Subdirectory format</h5>
<p><a href="http://example.com/blog1/" target="_blank" rel="noopener noreferrer">http://example.com/blog1/</a>
</p>
<p><a href="http://example.com/blog2/" target="_blank" rel="noopener noreferrer">http://example.com/blog2/</a>
</p>
<h5 id="subdomain-format">Subdomain format</h5>
<p><a href="http://blog1.example.com/" target="_blank" rel="noopener noreferrer">http://blog1.example.com/</a>
</p>
<p><a href="http://blog2.example.com/" target="_blank" rel="noopener noreferrer">http://blog2.example.com/</a>
</p>
<h4 id="2-running-multiple-apache-and-db-instances">2. Running Multiple Apache and DB Instances</h4>
<p>Option 2 seemed like it would consume too many resources for a t2.micro setup, so I wanted to avoid it.</p>
<p>At first, I thought it would be necessary to run multiple Apache instances and have them listen on different ports, but option 3&rsquo;s VirtualHost feature allows control by the URL being accessed.</p>
<!-- raw HTML omitted -->
<h4 id="3-using-apaches-virtualhost-feature">3. Using Apache&rsquo;s VirtualHost Feature</h4>
<p>In the end, I was able to use the database layer and Apache&rsquo;s VirtualHost feature.</p>
<!-- raw HTML omitted -->
<h3 id="configuration-steps">Configuration Steps</h3>
<h4 id="add-a-database-in-mysql">Add a Database in MySQL</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#ff79c6">create</span> <span style="color:#ff79c6">database</span> wp2;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">grant</span> <span style="color:#ff79c6">all</span> <span style="color:#ff79c6">privileges</span> <span style="color:#ff79c6">on</span> <span style="color:#ff79c6">`</span>wp2<span style="color:#ff79c6">`</span>.<span style="color:#ff79c6">*</span> <span style="color:#ff79c6">to</span> <span style="color:#f1fa8c">&#39;wp2&#39;</span><span style="color:#ff79c6">@</span><span style="color:#f1fa8c">&#39;localhost&#39;</span> IDENTIFIED <span style="color:#ff79c6">BY</span> <span style="color:#f1fa8c">&#39;xxxxxxxx&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">show</span> grants <span style="color:#ff79c6">for</span> wp2<span style="color:#ff79c6">@</span>localhost;
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">SELECT</span> <span style="color:#ff79c6">host</span>, <span style="color:#ff79c6">user</span> <span style="color:#ff79c6">FROM</span> mysql.<span style="color:#ff79c6">user</span>;
</span></span></code></pre></div><h4 id="create-an-apache-directory">Create an Apache Directory</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mkdir -p /var/www/html1
</span></span></code></pre></div><h4 id="configure-apache-for-multiple-sites">Configure Apache for Multiple Sites</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>vi /etc/httpd/conf/httpd.conf
</span></span></code></pre></div><p>Add the following configuration.</p>
<p>Anyone accessing <code>example1.com</code> (as listed in ServerName) will see the page at <code>/var/www/html/</code>, while anyone accessing <code>example2.com</code> will see the page at <code>/var/www/html1/</code>. Note: Apache version is 2.4.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  DocumentRoot /var/www/html/
</span></span><span style="display:flex;"><span>  ServerName example1.com:80
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;VirtualHost *:80&gt;
</span></span><span style="display:flex;"><span>  DocumentRoot /var/www/html1/
</span></span><span style="display:flex;"><span>  ServerName example2.com:80
</span></span><span style="display:flex;"><span>&lt;/VirtualHost&gt;
</span></span></code></pre></div><p>From here, it&rsquo;s the same as a normal WordPress installation. Please refer to my &ldquo;Install WordPress&rdquo; article.</p>
<blockquote>
<p>Installing WordPress on EC2 | my opinion is my own <a href="https://zatoima.github.io/wordpress-ec2-install.html" target="_blank" rel="noopener noreferrer">https://zatoima.github.io/wordpress-ec2-install.html</a>
</p>
</blockquote>
<h2 id="final-notes">Final Notes</h2>
<p>Since Apache and MySQL are shared, if any trouble occurs, both sites will be affected together. If the importance of the sites increases, it may be worth considering hosting them on separate instances.</p>

      </div>
    </div>

    
    
    
    <a href="https://github.com/zatoima/zatoima.github.io/edit/main/content/blog/2020-02-13-1%e3%81%a4%e3%81%aeEC2%e3%82%a4%e3%83%b3%e3%82%b9%e3%82%bf%e3%83%b3%e3%82%b9%e4%b8%8a%e3%81%abWordPress%e3%82%92%e8%a4%87%e6%95%b0%e3%83%9b%e3%82%b9%e3%83%88%e3%81%99%e3%82%8b%e6%96%b9%e6%b3%95/index.md" target="_blank" rel="noopener noreferrer" class="github-edit-link">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
      Suggest an edit on GitHub
    </a>
    
    

    
    
    <nav class="prev-next-nav">
      
      <a href="https://zatoima.github.io/en/ec2-netkeiba-scraper.html" class="prev-next-link prev-link">
        <span class="prev-next-label">‚Üê Previous article</span>
        <span class="prev-next-title">Getting JRA Race Information Using ‚Ä¶</span>
      </a>
      
      
      <a href="https://zatoima.github.io/en/aws-postgresql-rdsproxy-failover.html" class="prev-next-link next-link">
        <span class="prev-next-label">Next article ‚Üí</span>
        <span class="prev-next-title">Performing Failover of Aurora PostgreSQL Using RDS ‚Ä¶</span>
      </a>
      
    </nav>
    

    
<div class="share-buttons">
  <span class="share-label">Share:</span>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fzatoima.github.io%2fen%2fwordpress-ec2-multipul-host.html&text=How&#43;to&#43;Host&#43;Multiple&#43;WordPress&#43;Sites&#43;on&#43;a&#43;Single&#43;EC2&#43;Instance" target="_blank" rel="noopener noreferrer" class="share-btn share-twitter" aria-label="Share on X">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
  </a>
  <a href="https://b.hatena.ne.jp/entry/https://zatoima.github.io/en/wordpress-ec2-multipul-host.html" target="_blank" rel="noopener noreferrer" class="share-btn share-hatena" aria-label="Add to Hatena Bookmark">B!</a>
</div>



<div class="related-articles">
  <h2 class="related-articles-title">Related articles</h2>
  <ul class="related-list">
    
    <li><a href="/en/aws-neptune-create-instance-execute-query-try.html">From Creating an Amazon Neptune Instance to Loading Data and Executing Queries</a></li>
    
    <li><a href="/en/aws-rds-oneliner-get.html">Getting RDS DB Parameters with a One-liner</a></li>
    
    <li><a href="/en/aws-rds-oracle-datapump-import.html">Importing into RDS (Oracle) with Data Pump</a></li>
    
  </ul>
</div>




<div class="post-tags">
  
  <a href="https://zatoima.github.io/en/blog/wordpress/" class="tag-badge">WordPress</a>
  
  <a href="https://zatoima.github.io/en/blog/aws/" class="tag-badge"><img src="/images/tags/aws.svg" alt="AWS" class="tag-badge-icon" loading="lazy">AWS</a>
  
  <a href="https://zatoima.github.io/en/blog/ec2/" class="tag-badge"><img src="/images/tags/ec2.svg" alt="EC2" class="tag-badge-icon" loading="lazy">EC2</a>
  
</div>


  </article>

  
  <aside class="article-sidebar">
    <div class="toc-container">
      <div class="toc-title">Table of Contents</div>
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#introduction">Introduction</a></li>
        <li><a href="#approach">Approach</a>
          <ul>
            <li><a href="#1-wordpress-multisite-feature">1. WordPress Multisite Feature</a></li>
            <li><a href="#2-running-multiple-apache-and-db-instances">2. Running Multiple Apache and DB Instances</a></li>
            <li><a href="#3-using-apaches-virtualhost-feature">3. Using Apache&rsquo;s VirtualHost Feature</a></li>
          </ul>
        </li>
        <li><a href="#configuration-steps">Configuration Steps</a>
          <ul>
            <li><a href="#add-a-database-in-mysql">Add a Database in MySQL</a></li>
            <li><a href="#create-an-apache-directory">Create an Apache Directory</a></li>
            <li><a href="#configure-apache-for-multiple-sites">Configure Apache for Multiple Sites</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#final-notes">Final Notes</a></li>
  </ul>
</nav>
    </div>
  </aside>
  
</div>

    </main>

    <footer class="site-footer">
      <div class="footer-inner">
        <div class="footer-disclaimer">The contents of this blog are my personal views and do not represent the official views of any company or organization I am affiliated with.</div>
        <div class="footer-links">
          <a href="/en/">Home</a>
          <a href="/en/blog/">Articles</a>
          <a href="/en/tags/">Tags</a>
          <a href="/en/about/">About</a>
        </div>
        <div class="footer-social">
          <a href="https://github.com/zatoima" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
          </a>
          <a href="https://x.com/zatoima1" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
          </a>
          <a href="/index.xml" aria-label="RSS">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19.01 7.38 20 6.18 20C5 20 4 19.01 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1z"/></svg>
          </a>
        </div>
        <div class="footer-copyright">Copyright ¬© 2019, zatoima.</div>
        <div class="footer-disclaimer">memo blog. Hugo on GitHub Pages</div>
        <div class="footer-disclaimer">The contents of this blog are my personal views and do not represent the official views of any company or organization I am affiliated with.</div>
      </div>
    </footer>
  </div>
  <script src="/js/lightbox.js" defer></script>
  <script src="/js/toc-highlight.js" defer></script>
  <script src="/js/code-copy.js" defer></script>
  <script src="/js/dark-mode.js" defer></script>
  <script src="/js/mobile-nav.js" defer></script>
  <script src="/js/search.js" defer></script>
  <script src="/js/reading-progress.js" defer></script>
  <script src="/js/lang-detect.js" defer></script>
  <script src="/js/lang-switcher.js" defer></script>
</body>

</html>
