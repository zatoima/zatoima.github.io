<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://zatoima.github.io/images/favicon.ico" />
<title>Oracle Partiotionオプションの代替策(View&#43;Trigger)を試してみる | my opinion is my own</title>
<meta name="title" content="Oracle Partiotionオプションの代替策(View&#43;Trigger)を試してみる" />
<meta name="description" content="" />
<meta name="keywords" content="Oracle,EE,SE2,RDS," />


<meta property="og:url" content="https://zatoima.github.io/oracle-ee-se2-partition-trigger-view.html">
  <meta property="og:site_name" content="my opinion is my own">
  <meta property="og:title" content="Oracle Partiotionオプションの代替策(View&#43;Trigger)を試してみる">
  <meta property="og:description" content="memo blog">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2021-04-27T00:00:00+00:00">
    <meta property="article:modified_time" content="2021-04-27T00:00:00+00:00">
    <meta property="article:tag" content="Oracle">
    <meta property="article:tag" content="EE">
    <meta property="article:tag" content="SE2">
    <meta property="article:tag" content="RDS">
    <meta property="og:image" content="https://zatoima.github.io/images/share.png">



<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://zatoima.github.io/images/share.png"><meta name="twitter:title" content="Oracle Partiotionオプションの代替策(View&#43;Trigger)を試してみる">
<meta name="twitter:description" content="">




  <meta itemprop="name" content="Oracle Partiotionオプションの代替策(View&#43;Trigger)を試してみる">
  <meta itemprop="description" content="memo blog">
  <meta itemprop="datePublished" content="2021-04-27T00:00:00+00:00">
  <meta itemprop="dateModified" content="2021-04-27T00:00:00+00:00">
  <meta itemprop="wordCount" content="4850">
  <meta itemprop="image" content="https://zatoima.github.io/images/share.png">
  <meta itemprop="keywords" content="Oracle,EE,SE2,RDS">
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  body {
    font-family: Verdana, sans-serif;
    margin: auto;
    padding: 20px;
    max-width: 720px;
    text-align: left;
    background-color: #fff;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: #444;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  strong,
  b {
    color: #222;
  }

  a {
    color: #3273dc;
     
  }

  .title {
    text-decoration: none;
    border: 0;
  }

  .title span {
    font-weight: 400;
  }

  nav a {
    margin-right: 10px;
  }

  textarea {
    width: 100%;
    font-size: 16px;
  }

  input {
    font-size: 16px;
  }

  content {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  img {
    max-width: 100%;
  }

  code {
    padding: 2px 5px;
    background-color: #f2f2f2;
  }

  pre code {
    color: #222;
    display: block;
    padding: 20px;
    white-space: pre-wrap;
    font-size: 14px;
    overflow-x: auto;
  }

  div.highlight pre {
    background-color: initial;
    color: initial;
  }

  div.highlight code {
    background-color: unset;
    color: unset;
  }

  blockquote {
    border-left: 1px solid #999;
    color: #222;
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px;
    text-align: center;
  }

  .helptext {
    color: #777;
    font-size: small;
  }

  .errorlist {
    color: #eba613;
    font-size: small;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: #8b6fcb;
  }

  @media (prefers-color-scheme: dark) {
    body {
      background-color: #333;
      color: #ddd;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    strong,
    b {
      color: #eee;
    }

    a {
      color: #8cc2dd;
    }

    code {
      background-color: #777;
    }

    pre code {
      color: #ddd;
    }

    blockquote {
      color: #ccc;
    }

    textarea,
    input {
      background-color: #252525;
      color: #ddd;
    }

    .helptext {
      color: #aaa;
    }
  }

</style>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-STFZ9QMXGM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-STFZ9QMXGM');
</script>
</head>

<body>
  <header><a href="/" class="title">
  <h2>my opinion is my own</h2>
</a>
<nav>
<a href="/about/">About</a>
<a href="/blog/">Blog</a>
<a href="/index.xml">RSS</a>
<a href="/other/">Other</a>
</nav>
</header>
  <main>
<h1>Oracle Partiotionオプションの代替策(View&#43;Trigger)を試してみる</h1>

<p>
  <i>
    <time datetime='2021-04-27' pubdate>
      2021-04-27
    </time>
  </i>
</p>

<content>
  <h3 id="はじめに">はじめに</h3>
<p>下記に検討した内容の続きとして、Oracle Partitionの代替案というのをやってみた。</p>
<blockquote>
<p>Oracle Enterprise EditionからStandard Editionへのダウングレード検討メモ | my opinion is my own <a href="https://zatoima.github.io/oracle-ee-se2-migration-to-aws-rds-for-oracle.html">https://zatoima.github.io/oracle-ee-se2-migration-to-aws-rds-for-oracle.html</a></p>
</blockquote>
<p>大規模テーブルや履歴データなどはパーティション機能を使うことはよくあるが、Oracle EEからSE2へのダウングレードを検討する場合は、Partitionオプションを使用できないため、どうにかする必要がある。</p>
<p><img src="image-20210424204828292.png" alt="image-20210424204828292"></p>
<p>パーティションを使う理由というのはいくつかあって、下記が代表的なメリットとして考えられる。</p>
<ol>
<li>パーティションプルーニングを行うことでの性能向上</li>
<li>パーティション単位でパラレル化出来ることによる性能向上
<ul>
<li>複数パーティションに跨って検索する場合に有効</li>
</ul>
</li>
<li>パーティション単位でドロップ出来ることでの運用性向上
<ul>
<li>これが出来ない場合は、DELETE文を発行する必要があり、IO的にも時間的にも厳しい</li>
</ul>
</li>
</ol>
<p>少し調べてみるといくつかの代替策が見つかったので、今回はその代替案を実施してみる。参考にしたのはこのあたり。この記事では疑似パーティションと呼ぶ</p>
<blockquote>
<p>Implementing table partitioning in Oracle Standard Edition: Part 1 | AWS Database Blog <a href="https://aws.amazon.com/jp/blogs/database/implementing-table-partitioning-in-oracle-standard-edition-part-1/">https://aws.amazon.com/jp/blogs/database/implementing-table-partitioning-in-oracle-standard-edition-part-1/</a></p>
<p>Partitioning and Oracle Standard Edition | Oracle FAQ <a href="https://www.orafaq.com/node/2992">https://www.orafaq.com/node/2992</a></p>
<p>Oracle Partitioning and Standard Edition | the gruffdba <a href="https://gruffdba.wordpress.com/2018/08/05/oracle-partitioning-and-standard-edition/">https://gruffdba.wordpress.com/2018/08/05/oracle-partitioning-and-standard-edition/</a></p>
<p>Oracle SEでINSERT TRIGGERとVIEWで作るパーティション - kenken0807_DBメモ <a href="https://kenken0807.hatenablog.com/entry/2015/07/21/161333">https://kenken0807.hatenablog.com/entry/2015/07/21/161333</a></p>
</blockquote>
<h3 id="パーティション代替の仕組みのイメージ図">パーティション代替の仕組みのイメージ図</h3>
<p>下記の図に書いている通り、TriggerとViewを使用した代替案となる。この方法はOracleでPartitionが実装されている前（Oracle 7時代？）はこの方法であり、PostgreSQLの9.6以前は継承とトリガーを使った方式になっていてこのイメージ図に近い。</p>
<p>疑似パーティションテーブル郡を増やす場合には、TableやView定義、及びTriggerの修正が必要となってくるので運用面で大丈夫かは別途確認する必要がある。</p>
<!-- raw HTML omitted -->
<p>ポイントとしては次の通り（ここではレンジパーティションをイメージ）</p>
<ul>
<li>各年月単位に区切ったデータが入るテーブルを複数用意する</li>
<li>SELECTやDML（INSERT、UPDATED、DELETE）の対象先テーブルはVIEWとなる
<ul>
<li>VIEWは各テーブルをUNION ALLでJOINした定義とする</li>
</ul>
</li>
<li>DML（ここではINSERT）が飛んできた時にTriggerを起動し、対象の年月がどのパーティションに入るべきかをIF文、CASE文等で判別し、各テーブルに入れる</li>
<li>VIEWに索引付与ということは出来ないので、必然的にローカル索引となる。（＝パーティションで使用出来ていたグローバル索引は付与出来ない）</li>
<li>パーティションキーにローカル索引を作成する</li>
</ul>
<h3 id="流れ">流れ</h3>
<p>この方法を試すにあたり、移行元（EEのパーティション表構成）と移行先の環境（疑似パーティション構成）での性能検証比較を主にやりたかったので下記の流れで実施する。</p>
<ol>
<li>
<p>EEのパーティション表を使用</p>
<ul>
<li>大容量テーブルを作ってEEのパーティション機能を使って性能の簡易検証を実施</li>
<li>パーティション有り無し、索引有り無しを検証</li>
</ul>
</li>
<li>
<p>疑似パーティションを使用</p>
<ul>
<li>
<p>環境構成は <code>1.EEのパーティション表を使用</code> と一緒。パーティション部分を疑似パーティション構成とする</p>
</li>
<li>
<p>疑似パーティション有り無し、索引有り無しを検証</p>
</li>
</ul>
</li>
</ol>
<h3 id="eeのパーティション表を使用">EEのパーティション表を使用</h3>
<p>環境作成からスタート</p>
<h3 id="ユーザ作成">ユーザ作成</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">user</span> TESTPART;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">user</span> TESTPART identified <span style="color:#66d9ef">by</span> oracle;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">grant</span> dba <span style="color:#66d9ef">to</span> TESTPART;
</span></span><span style="display:flex;"><span>conn testpart<span style="color:#f92672">/</span>oracle<span style="color:#f92672">@</span>rdsoraclev19c.xxxx.ap<span style="color:#f92672">-</span>northeast<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>.rds.amazonaws.com:<span style="color:#ae81ff">1521</span><span style="color:#f92672">/</span>ora19c
</span></span></code></pre></div><ul>
<li>
<h5 id="パーティション有り索引無しパターン">パーティション有り、索引無しパターン</h5>
</li>
</ul>
<p>パーティションテーブルを作成</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_EE_PART(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>PARTITION <span style="color:#66d9ef">BY</span> RANGE(ymd)
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  PARTITION ymd_p00 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2010/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p01 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2011/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p02 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2012/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p03 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2013/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p04 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2014/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p05 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2015/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p06 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2016/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p07 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2017/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p08 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2018/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p09 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2019/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p10 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2020/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p11 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2021/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>))
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>100万件のデータ作成</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#75715e">/*+ APPEND */</span> <span style="color:#66d9ef">INTO</span> PARTTEST_EE_PART NOLOGGING
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span>  parttest_seq.nextval,
</span></span><span style="display:flex;"><span>  TO_DATE(<span style="color:#e6db74">&#39;20100101&#39;</span>,<span style="color:#e6db74">&#39;YYYYMMDD&#39;</span>) <span style="color:#f92672">+</span><span style="color:#66d9ef">MOD</span>(<span style="color:#66d9ef">ABS</span>(DBMS_RANDOM.RANDOM()),TO_DATE(<span style="color:#e6db74">&#39;20200101&#39;</span>,<span style="color:#e6db74">&#39;YYYYMMDD&#39;</span>)<span style="color:#f92672">-</span>TO_DATE(<span style="color:#e6db74">&#39;20100101&#39;</span>,<span style="color:#e6db74">&#39;YYYYMMDD&#39;</span>)) DT
</span></span><span style="display:flex;"><span>  ,DBMS_RANDOM.STRING(<span style="color:#e6db74">&#39;X&#39;</span>, <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span>  ,<span style="color:#e6db74">&#39;あいうえおかきくけこさしすせそ&#39;</span>
</span></span><span style="display:flex;"><span>  ,TO_CHAR(<span style="color:#66d9ef">ABS</span>(DBMS_RANDOM.RANDOM()),<span style="color:#e6db74">&#39;FM0000000000&#39;</span>) CD
</span></span><span style="display:flex;"><span>  ,<span style="color:#66d9ef">MOD</span>(DBMS_RANDOM.RANDOM(),<span style="color:#ae81ff">100000</span>) KIN
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span>
</span></span><span style="display:flex;"><span>(<span style="color:#66d9ef">SELECT</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">FROM</span> ALL_CATALOG <span style="color:#66d9ef">WHERE</span> ROWNUM <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">1000</span>) 
</span></span><span style="display:flex;"><span>,(<span style="color:#66d9ef">SELECT</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">FROM</span> ALL_CATALOG <span style="color:#66d9ef">WHERE</span> ROWNUM <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">commit</span>;
</span></span></code></pre></div><p>データをInsert ~ Selectで増幅（たくさん）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_EE_PART NOLOGGING <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> PARTTEST_EE_PART;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">commit</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_EE_PART;
</span></span></code></pre></div><p>約1億件ちょっと</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_EE_PART;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) 
</span></span><span style="display:flex;"><span>____________ 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">128000000</span> 
</span></span></code></pre></div><p>num_rowsを確認するために統計情報収集</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> DBMS_STATS.GATHER_TABLE_STATS(ownname<span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;TESTPART&#39;</span>,tabname<span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;PARTTEST_EE_PART&#39;</span>,<span style="color:#66d9ef">cascade</span><span style="color:#f92672">=&gt;</span><span style="color:#66d9ef">false</span>,DEGREE <span style="color:#f92672">=&gt;</span><span style="color:#ae81ff">4</span>);
</span></span></code></pre></div><p>パーティションごとの件数を確認</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span>
</span></span><span style="display:flex;"><span>    TABLE_OWNER
</span></span><span style="display:flex;"><span>    ,<span style="color:#66d9ef">TABLE_NAME</span>
</span></span><span style="display:flex;"><span>    ,PARTITION_NAME
</span></span><span style="display:flex;"><span>    ,NUM_ROWS
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span>
</span></span><span style="display:flex;"><span>    ALL_TAB_PARTITIONS
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;PARTTEST_EE_PART&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">TABLE_NAME</span>;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">2</span>      TABLE_OWNER
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">3</span>      ,<span style="color:#66d9ef">TABLE_NAME</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">4</span>      ,PARTITION_NAME
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">5</span>      ,NUM_ROWS
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">6</span>  <span style="color:#66d9ef">from</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">7</span>      ALL_TAB_PARTITIONS
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">8</span>  <span style="color:#66d9ef">where</span> <span style="color:#66d9ef">table_name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;PARTTEST_EE_PART&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">9</span>  <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span>
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">10</span>      <span style="color:#66d9ef">TABLE_NAME</span>;
</span></span><span style="display:flex;"><span>   TABLE_OWNER          <span style="color:#66d9ef">TABLE_NAME</span>    PARTITION_NAME    NUM_ROWS 
</span></span><span style="display:flex;"><span>______________ ___________________ _________________ ___________ 
</span></span><span style="display:flex;"><span>TESTPART       PARTTEST_EE_PART    YMD_P00                     <span style="color:#ae81ff">0</span> 
</span></span><span style="display:flex;"><span>TESTPART       PARTTEST_EE_PART    YMD_P01              <span style="color:#ae81ff">12830976</span> 
</span></span><span style="display:flex;"><span>TESTPART       PARTTEST_EE_PART    YMD_P02              <span style="color:#ae81ff">12804736</span> 
</span></span><span style="display:flex;"><span>TESTPART       PARTTEST_EE_PART    YMD_P03              <span style="color:#ae81ff">12837760</span> 
</span></span><span style="display:flex;"><span>TESTPART       PARTTEST_EE_PART    YMD_P04              <span style="color:#ae81ff">12809088</span> 
</span></span><span style="display:flex;"><span>TESTPART       PARTTEST_EE_PART    YMD_P05              <span style="color:#ae81ff">12786176</span> 
</span></span><span style="display:flex;"><span>TESTPART       PARTTEST_EE_PART    YMD_P06              <span style="color:#ae81ff">12755840</span> 
</span></span><span style="display:flex;"><span>TESTPART       PARTTEST_EE_PART    YMD_P07              <span style="color:#ae81ff">12817408</span> 
</span></span><span style="display:flex;"><span>TESTPART       PARTTEST_EE_PART    YMD_P08              <span style="color:#ae81ff">12797184</span> 
</span></span><span style="display:flex;"><span>TESTPART       PARTTEST_EE_PART    YMD_P09              <span style="color:#ae81ff">12803072</span> 
</span></span><span style="display:flex;"><span>TESTPART       PARTTEST_EE_PART    YMD_P10              <span style="color:#ae81ff">12757760</span> 
</span></span><span style="display:flex;"><span>TESTPART       PARTTEST_EE_PART    YMD_P11                     <span style="color:#ae81ff">0</span> 
</span></span></code></pre></div><p>この環境で下記SQLをパーティションありなし、索引ありなしで時間を計測。2年分に跨るデータの件数を確認。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> rdsadmin.rdsadmin_util.flush_shared_pool;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> rdsadmin.rdsadmin_util.flush_buffer_cache;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> autotrace <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> timing <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_EE_PART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span></code></pre></div><p>実行結果</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_EE_PART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) 
</span></span><span style="display:flex;"><span>___________ 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">25941120</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Explain</span> Plan
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                PLAN_TABLE_OUTPUT 
</span></span><span style="display:flex;"><span>_________________________________________________________________________________________________________________ 
</span></span><span style="display:flex;"><span>Plan hash value: <span style="color:#ae81ff">2195020283</span>                                                                                       
</span></span><span style="display:flex;"><span>                                                                                                                  
</span></span><span style="display:flex;"><span><span style="color:#75715e">--------------------------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Id  <span style="color:#f92672">|</span> <span style="color:#66d9ef">Operation</span>                 <span style="color:#f92672">|</span> Name             <span style="color:#f92672">|</span> <span style="color:#66d9ef">Rows</span>  <span style="color:#f92672">|</span> Bytes <span style="color:#f92672">|</span> Cost (<span style="color:#f92672">%</span>CPU)<span style="color:#f92672">|</span> Time     <span style="color:#f92672">|</span> Pstart<span style="color:#f92672">|</span> Pstop <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">--------------------------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">STATEMENT</span>          <span style="color:#f92672">|</span>                  <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>   <span style="color:#ae81ff">192</span>K  (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">08</span> <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>  SORT <span style="color:#66d9ef">AGGREGATE</span>           <span style="color:#f92672">|</span>                  <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span>   PARTITION RANGE ITERATOR<span style="color:#f92672">|</span>                  <span style="color:#f92672">|</span>    <span style="color:#ae81ff">26</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">198</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">192</span>K  (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">08</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">11</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span>    <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span>      <span style="color:#f92672">|</span> PARTTEST_EE_PART <span style="color:#f92672">|</span>    <span style="color:#ae81ff">26</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">198</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">192</span>K  (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">08</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">11</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">--------------------------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                                  
</span></span><span style="display:flex;"><span>Predicate Information (identified <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">operation</span> id):                                                               
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------------------------------------------------                                                               
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                                  
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">3</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39;               
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Statistics</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>             <span style="color:#ae81ff">249</span>  CPU used <span style="color:#66d9ef">by</span> this <span style="color:#66d9ef">session</span>
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">250</span>  CPU used <span style="color:#66d9ef">when</span> <span style="color:#66d9ef">call</span> started
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">865</span>  DB time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">3</span>  Requests <span style="color:#66d9ef">to</span><span style="color:#f92672">/</span><span style="color:#66d9ef">from</span> client
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">10</span>  enqueue releases
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">10</span>  enqueue requests
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">5028</span>  non<span style="color:#f92672">-</span>idle wait <span style="color:#66d9ef">count</span>
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">621</span>  non<span style="color:#f92672">-</span>idle wait time
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">200</span>  opened cursors cumulative
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  opened cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">5567</span>  physical <span style="color:#66d9ef">read</span> total IO requests
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">5504</span>  physical <span style="color:#66d9ef">read</span> total multi block requests
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  pinned cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">9</span>  process <span style="color:#66d9ef">last</span> non<span style="color:#f92672">-</span>idle time
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">460</span>  <span style="color:#66d9ef">recursive</span> calls
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">2</span>  <span style="color:#66d9ef">recursive</span> cpu <span style="color:#66d9ef">usage</span>
</span></span><span style="display:flex;"><span>          <span style="color:#ae81ff">701356</span>  <span style="color:#66d9ef">session</span> logical <span style="color:#66d9ef">reads</span>
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">621</span>  <span style="color:#66d9ef">user</span> I<span style="color:#f92672">/</span>O wait time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">4</span>  <span style="color:#66d9ef">user</span> calls
</span></span><span style="display:flex;"><span>Elapsed: <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">08</span>.<span style="color:#ae81ff">748</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> 
</span></span></code></pre></div><ul>
<li>
<h5 id="パーティション無し索引無しパターン">パーティション無し、索引無しパターン</h5>
</li>
</ul>
<p>非パーティション表を作成して、データを同一とする</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_EE_NONPART(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_EE_NONPART NOLOGGING <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> PARTTEST_EE_PART;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_EE_PART;
</span></span></code></pre></div><p>時間を計測</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> rdsadmin.rdsadmin_util.flush_shared_pool;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> rdsadmin.rdsadmin_util.flush_buffer_cache;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> autotrace <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> timing <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_EE_NONPART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_EE_NONPART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) 
</span></span><span style="display:flex;"><span>___________ 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">25941120</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Explain</span> Plan
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                            PLAN_TABLE_OUTPUT 
</span></span><span style="display:flex;"><span>_____________________________________________________________________________________________ 
</span></span><span style="display:flex;"><span>Plan hash value: <span style="color:#ae81ff">3084685461</span>                                                                   
</span></span><span style="display:flex;"><span>                                                                                              
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Id  <span style="color:#f92672">|</span> <span style="color:#66d9ef">Operation</span>          <span style="color:#f92672">|</span> Name                <span style="color:#f92672">|</span> <span style="color:#66d9ef">Rows</span>  <span style="color:#f92672">|</span> Bytes <span style="color:#f92672">|</span> Cost (<span style="color:#f92672">%</span>CPU)<span style="color:#f92672">|</span> Time     <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">STATEMENT</span>   <span style="color:#f92672">|</span>                     <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>   <span style="color:#ae81ff">635</span>K  (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">25</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>  SORT <span style="color:#66d9ef">AGGREGATE</span>    <span style="color:#f92672">|</span>                     <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span>   <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_EE_NONPART <span style="color:#f92672">|</span>    <span style="color:#ae81ff">26</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">198</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">635</span>K  (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">25</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                              
</span></span><span style="display:flex;"><span>Predicate Information (identified <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">operation</span> id):                                           
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------------------------------------------------                                           
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                              
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">2</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>)                
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))           
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Statistics</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#ae81ff">1077</span>  CPU used <span style="color:#66d9ef">by</span> this <span style="color:#66d9ef">session</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">1078</span>  CPU used <span style="color:#66d9ef">when</span> <span style="color:#66d9ef">call</span> started
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">3105</span>  DB time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">3</span>  Requests <span style="color:#66d9ef">to</span><span style="color:#f92672">/</span><span style="color:#66d9ef">from</span> client
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">5</span>  enqueue releases
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">5</span>  enqueue requests
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">15184</span>  non<span style="color:#f92672">-</span>idle wait <span style="color:#66d9ef">count</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2045</span>  non<span style="color:#f92672">-</span>idle wait time
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">42</span>  opened cursors cumulative
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  opened cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">18335</span>  physical <span style="color:#66d9ef">read</span> total IO requests
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">18288</span>  physical <span style="color:#66d9ef">read</span> total multi block requests
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  pinned cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">31</span>  process <span style="color:#66d9ef">last</span> non<span style="color:#f92672">-</span>idle time
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">115</span>  <span style="color:#66d9ef">recursive</span> calls
</span></span><span style="display:flex;"><span>         <span style="color:#ae81ff">4667336</span>  <span style="color:#66d9ef">session</span> logical <span style="color:#66d9ef">reads</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2045</span>  <span style="color:#66d9ef">user</span> I<span style="color:#f92672">/</span>O wait time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">4</span>  <span style="color:#66d9ef">user</span> calls
</span></span><span style="display:flex;"><span>Elapsed: <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">31</span>.<span style="color:#ae81ff">136</span>
</span></span></code></pre></div><ul>
<li>
<h5 id="パーティション有り索引有りパターン">パーティション有り、索引有りパターン</h5>
</li>
</ul>
<p>索引作成</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">index</span> PARTTEST_EE_PART_IDX;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_EE_PART_IDX <span style="color:#66d9ef">ON</span> PARTTEST_EE_PART(ymd) <span style="color:#66d9ef">local</span> nologging parallel <span style="color:#ae81ff">4</span>;
</span></span></code></pre></div><p>実行結果</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">set</span> autotrace <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span>Autotrace Enabled
</span></span><span style="display:flex;"><span>Shows the execution plan <span style="color:#66d9ef">as</span> well <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">statistics</span> <span style="color:#66d9ef">of</span> the <span style="color:#66d9ef">statement</span>.
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">set</span> timing <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_EE_PART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) 
</span></span><span style="display:flex;"><span>___________ 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">25941120</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Explain</span> Plan
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                                                       PLAN_TABLE_OUTPUT 
</span></span><span style="display:flex;"><span>________________________________________________________________________________________________________________________________________________________ 
</span></span><span style="display:flex;"><span>Plan hash value: <span style="color:#ae81ff">2795901320</span>                                                                                                                              
</span></span><span style="display:flex;"><span>                                                                                                                                                         
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Id  <span style="color:#f92672">|</span> <span style="color:#66d9ef">Operation</span>                       <span style="color:#f92672">|</span> Name                 <span style="color:#f92672">|</span> <span style="color:#66d9ef">Rows</span>  <span style="color:#f92672">|</span> Bytes <span style="color:#f92672">|</span> Cost (<span style="color:#f92672">%</span>CPU)<span style="color:#f92672">|</span> Time     <span style="color:#f92672">|</span> Pstart<span style="color:#f92672">|</span> Pstop <span style="color:#f92672">|</span>    TQ  <span style="color:#f92672">|</span><span style="color:#66d9ef">IN</span><span style="color:#f92672">-</span><span style="color:#66d9ef">OUT</span><span style="color:#f92672">|</span> PQ Distrib <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">STATEMENT</span>                <span style="color:#f92672">|</span>                      <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">69179</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>        <span style="color:#f92672">|</span>      <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>  SORT <span style="color:#66d9ef">AGGREGATE</span>                 <span style="color:#f92672">|</span>                      <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>        <span style="color:#f92672">|</span>      <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span>   PX COORDINATOR                <span style="color:#f92672">|</span>                      <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>        <span style="color:#f92672">|</span>      <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span>    PX SEND QC (RANDOM)          <span style="color:#f92672">|</span> :TQ10000             <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> P<span style="color:#f92672">-&gt;</span>S <span style="color:#f92672">|</span> QC (RAND)  <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span>     SORT <span style="color:#66d9ef">AGGREGATE</span>              <span style="color:#f92672">|</span>                      <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">5</span> <span style="color:#f92672">|</span>      PX PARTITION RANGE ITERATOR<span style="color:#f92672">|</span>                      <span style="color:#f92672">|</span>    <span style="color:#ae81ff">26</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">198</span>M<span style="color:#f92672">|</span> <span style="color:#ae81ff">69179</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">11</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWC <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">6</span> <span style="color:#f92672">|</span>       <span style="color:#66d9ef">INDEX</span> RANGE SCAN          <span style="color:#f92672">|</span> PARTTEST_EE_PART_IDX <span style="color:#f92672">|</span>    <span style="color:#ae81ff">26</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">198</span>M<span style="color:#f92672">|</span> <span style="color:#ae81ff">69179</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>    <span style="color:#ae81ff">11</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                                                                         
</span></span><span style="display:flex;"><span>Predicate Information (identified <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">operation</span> id):                                                                                                      
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------------------------------------------------                                                                                                      
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                                                                         
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">6</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">access</span>(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd                   
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">              hh24:mi:ss&#39;</span>))                                                                                                                              
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Statistics</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>             <span style="color:#ae81ff">277</span>  CPU used <span style="color:#66d9ef">by</span> this <span style="color:#66d9ef">session</span>
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">3</span>  CPU used <span style="color:#66d9ef">when</span> <span style="color:#66d9ef">call</span> started
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">3654</span>  DB time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">3</span>  Requests <span style="color:#66d9ef">to</span><span style="color:#f92672">/</span><span style="color:#66d9ef">from</span> client
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">6</span>  enqueue conversions
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">18</span>  enqueue releases
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">21</span>  enqueue requests
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">1770</span>  <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">call</span> idle wait time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">3</span>  messages sent
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">68920</span>  non<span style="color:#f92672">-</span>idle wait <span style="color:#66d9ef">count</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">1704</span>  non<span style="color:#f92672">-</span>idle wait time
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">318</span>  opened cursors cumulative
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  opened cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">68894</span>  physical <span style="color:#66d9ef">read</span> total IO requests
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  pinned cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">9</span>  process <span style="color:#66d9ef">last</span> non<span style="color:#f92672">-</span>idle time
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">779</span>  <span style="color:#66d9ef">recursive</span> calls
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">277</span>  <span style="color:#66d9ef">recursive</span> cpu <span style="color:#66d9ef">usage</span>
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">69883</span>  <span style="color:#66d9ef">session</span> logical <span style="color:#66d9ef">reads</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">1703</span>  <span style="color:#66d9ef">user</span> I<span style="color:#f92672">/</span>O wait time
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">16</span>  <span style="color:#66d9ef">user</span> calls
</span></span><span style="display:flex;"><span>Elapsed: <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">09</span>.<span style="color:#ae81ff">506</span>
</span></span></code></pre></div><ul>
<li>
<h5 id="パーティション無し索引有りパターン">パーティション無し、索引有りパターン</h5>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">index</span> PARTTEST_EE_NONPART_IDX;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_EE_NONPART_IDX <span style="color:#66d9ef">ON</span> PARTTEST_EE_NONPART(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span></code></pre></div><p>実行結果</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_EE_NONPART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) 
</span></span><span style="display:flex;"><span>___________ 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">25941120</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Explain</span> Plan
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                               PLAN_TABLE_OUTPUT 
</span></span><span style="display:flex;"><span>________________________________________________________________________________________________ 
</span></span><span style="display:flex;"><span>Plan hash value: <span style="color:#ae81ff">1281488453</span>                                                                      
</span></span><span style="display:flex;"><span>                                                                                                 
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Id  <span style="color:#f92672">|</span> <span style="color:#66d9ef">Operation</span>         <span style="color:#f92672">|</span> Name                    <span style="color:#f92672">|</span> <span style="color:#66d9ef">Rows</span>  <span style="color:#f92672">|</span> Bytes <span style="color:#f92672">|</span> Cost (<span style="color:#f92672">%</span>CPU)<span style="color:#f92672">|</span> Time     <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">STATEMENT</span>  <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">76083</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>  SORT <span style="color:#66d9ef">AGGREGATE</span>   <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span>   <span style="color:#66d9ef">INDEX</span> RANGE SCAN<span style="color:#f92672">|</span> PARTTEST_EE_NONPART_IDX <span style="color:#f92672">|</span>    <span style="color:#ae81ff">33</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">290</span>M<span style="color:#f92672">|</span> <span style="color:#ae81ff">76083</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                 
</span></span><span style="display:flex;"><span>Predicate Information (identified <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">operation</span> id):                                              
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------------------------------------------------                                              
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">2</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">access</span>(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                  
</span></span><span style="display:flex;"><span>                                                                                                 
</span></span><span style="display:flex;"><span>Note                                                                                             
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----                                                                                            
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#f92672">-</span> <span style="color:#66d9ef">dynamic</span> <span style="color:#66d9ef">statistics</span> used: <span style="color:#66d9ef">dynamic</span> sampling (<span style="color:#66d9ef">level</span><span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)                                         
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Statistics</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>             <span style="color:#ae81ff">236</span>  CPU used <span style="color:#66d9ef">by</span> this <span style="color:#66d9ef">session</span>
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">237</span>  CPU used <span style="color:#66d9ef">when</span> <span style="color:#66d9ef">call</span> started
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2182</span>  DB time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">3</span>  Requests <span style="color:#66d9ef">to</span><span style="color:#f92672">/</span><span style="color:#66d9ef">from</span> client
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">5</span>  enqueue releases
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">5</span>  enqueue requests
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">68838</span>  non<span style="color:#f92672">-</span>idle wait <span style="color:#66d9ef">count</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2030</span>  non<span style="color:#f92672">-</span>idle wait time
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">25</span>  opened cursors cumulative
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  opened cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">68834</span>  physical <span style="color:#66d9ef">read</span> total IO requests
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  pinned cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">22</span>  process <span style="color:#66d9ef">last</span> non<span style="color:#f92672">-</span>idle time
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">82</span>  <span style="color:#66d9ef">recursive</span> calls
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  <span style="color:#66d9ef">recursive</span> cpu <span style="color:#66d9ef">usage</span>
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">68890</span>  <span style="color:#66d9ef">session</span> logical <span style="color:#66d9ef">reads</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2030</span>  <span style="color:#66d9ef">user</span> I<span style="color:#f92672">/</span>O wait time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">4</span>  <span style="color:#66d9ef">user</span> calls
</span></span><span style="display:flex;"><span>Elapsed: <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">21</span>.<span style="color:#ae81ff">901</span>
</span></span></code></pre></div><h3 id="結果">結果</h3>
<table>
<thead>
<tr>
<th></th>
<th>パーティションあり</th>
<th>パーティションなし</th>
</tr>
</thead>
<tbody>
<tr>
<td>索引あり</td>
<td>9.506</td>
<td>21.901</td>
</tr>
<tr>
<td>索引なし</td>
<td>8.748</td>
<td>31.136</td>
</tr>
</tbody>
</table>
<h5 id="疑似パーティションを使用">疑似パーティションを使用</h5>
<p>環境作成からスタート</p>
<h3 id="疑似パーティションのイメージ再掲">疑似パーティションのイメージ（再掲）</h3>
<!-- raw HTML omitted -->
<h5 id="パーティション表のイメージ">パーティション表のイメージ</h5>
<p>下記のようなパーティションを作りたい。（これを作るわけではない）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_EE_PART(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>PARTITION <span style="color:#66d9ef">BY</span> RANGE(ymd)
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  PARTITION ymd_p00 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2010/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p01 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2011/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p02 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2012/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p03 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2013/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p04 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2014/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p05 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2015/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p06 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2016/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p07 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2017/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p08 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2018/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p09 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2019/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p10 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2020/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>)),
</span></span><span style="display:flex;"><span>  PARTITION ymd_p11 <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span>(TO_DATE(<span style="color:#e6db74">&#39;2021/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>))
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>表で対比する場合は下記の通り。</p>
<table>
<thead>
<tr>
<th>パーティション名</th>
<th>テーブル</th>
</tr>
</thead>
<tbody>
<tr>
<td>ymd_p00</td>
<td>PARTTEST_SE_PART_1</td>
</tr>
<tr>
<td>ymd_p01</td>
<td>PARTTEST_SE_PART_2</td>
</tr>
<tr>
<td>ymd_p02</td>
<td>PARTTEST_SE_PART_3</td>
</tr>
<tr>
<td>ymd_p03</td>
<td>PARTTEST_SE_PART_4</td>
</tr>
<tr>
<td>ymd_p04</td>
<td>PARTTEST_SE_PART_5</td>
</tr>
<tr>
<td>ymd_p05</td>
<td>PARTTEST_SE_PART_6</td>
</tr>
<tr>
<td>ymd_p06</td>
<td>PARTTEST_SE_PART_7</td>
</tr>
<tr>
<td>ymd_p07</td>
<td>PARTTEST_SE_PART_8</td>
</tr>
<tr>
<td>ymd_p08</td>
<td>PARTTEST_SE_PART_9</td>
</tr>
<tr>
<td>ymd_p09</td>
<td>PARTTEST_SE_PART_10</td>
</tr>
<tr>
<td>ymd_p10</td>
<td>PARTTEST_SE_PART_11</td>
</tr>
<tr>
<td>ymd_p11</td>
<td>PARTTEST_SE_PART_12</td>
</tr>
</tbody>
</table>
<h5 id="テーブル作成疑似パーティションテーブル郡">テーブル作成（＝疑似パーティションテーブル郡）</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- Partition like table 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_PART_1
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Partition like table 2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_PART_2
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Partition like table 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_PART_3
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Partition like table 4
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_PART_4
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Partition like table 5
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_PART_5
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Partition like table 6
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_PART_6
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Partition like table 7
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_PART_7
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Partition like table 8
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_PART_8
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Partition like table 9
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_PART_9
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Partition like table 10
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_PART_10
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Partition like table 11
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_PART_11
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- Partition like table 12
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_PART_12
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><h5 id="ビューを作成">ビューを作成</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">VIEW</span> PARTTEST_SE_PART <span style="color:#66d9ef">AS</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_SE_PART_1 <span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_SE_PART_2 <span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_SE_PART_3 <span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_SE_PART_4 <span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_SE_PART_5 <span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_SE_PART_6 <span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_SE_PART_7 <span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_SE_PART_8 <span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_SE_PART_9 <span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_SE_PART_10 <span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_SE_PART_11 <span style="color:#66d9ef">UNION</span> <span style="color:#66d9ef">ALL</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_SE_PART_12
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>
</span></span></code></pre></div><h5 id="insert用のトリガーを作成">INSERT用のトリガーを作成</h5>
<p>今回はINSERT用のトリガーしか作っていないが、DELETEやUPDATEも入って来る場合はDMLに応じたトリガーが必要。今回は擬似的にレンジパーティションに作っているが、疑似リストパーティション、おそらく疑似ハッシュパーティションも出来るはず。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">OR</span> <span style="color:#66d9ef">REPLACE</span> <span style="color:#66d9ef">TRIGGER</span> PARTTEST_SE_PART_INSERT
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSTEAD</span> <span style="color:#66d9ef">OF</span> <span style="color:#66d9ef">INSERT</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ON</span> PARTTEST_SE_PART
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FOR</span> <span style="color:#66d9ef">EACH</span> <span style="color:#66d9ef">ROW</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">DECLARE</span>
</span></span><span style="display:flex;"><span>n_part date;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">BEGIN</span>
</span></span><span style="display:flex;"><span>  n_part :<span style="color:#f92672">=</span> :<span style="color:#66d9ef">NEW</span>.ymd;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">IF</span> n_part <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2009/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2010/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">THEN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART_1 <span style="color:#66d9ef">values</span>(:<span style="color:#66d9ef">new</span>.id,:<span style="color:#66d9ef">new</span>.ymd,:<span style="color:#66d9ef">new</span>.str1,:<span style="color:#66d9ef">new</span>.str2,:<span style="color:#66d9ef">new</span>.str3,:<span style="color:#66d9ef">new</span>.str4);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ELSIF</span> n_part <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2010/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2010/12/31&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">THEN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART_2 <span style="color:#66d9ef">values</span>(:<span style="color:#66d9ef">new</span>.id,:<span style="color:#66d9ef">new</span>.ymd,:<span style="color:#66d9ef">new</span>.str1,:<span style="color:#66d9ef">new</span>.str2,:<span style="color:#66d9ef">new</span>.str3,:<span style="color:#66d9ef">new</span>.str4);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ELSIF</span> n_part <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2011/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2011/12/31&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">THEN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART_3 <span style="color:#66d9ef">values</span>(:<span style="color:#66d9ef">new</span>.id,:<span style="color:#66d9ef">new</span>.ymd,:<span style="color:#66d9ef">new</span>.str1,:<span style="color:#66d9ef">new</span>.str2,:<span style="color:#66d9ef">new</span>.str3,:<span style="color:#66d9ef">new</span>.str4);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ELSIF</span> n_part <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2012/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2012/12/31&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">THEN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART_4 <span style="color:#66d9ef">values</span>(:<span style="color:#66d9ef">new</span>.id,:<span style="color:#66d9ef">new</span>.ymd,:<span style="color:#66d9ef">new</span>.str1,:<span style="color:#66d9ef">new</span>.str2,:<span style="color:#66d9ef">new</span>.str3,:<span style="color:#66d9ef">new</span>.str4);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ELSIF</span> n_part <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2013/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2013/12/31&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">THEN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART_5 <span style="color:#66d9ef">values</span>(:<span style="color:#66d9ef">new</span>.id,:<span style="color:#66d9ef">new</span>.ymd,:<span style="color:#66d9ef">new</span>.str1,:<span style="color:#66d9ef">new</span>.str2,:<span style="color:#66d9ef">new</span>.str3,:<span style="color:#66d9ef">new</span>.str4);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ELSIF</span> n_part <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2014/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2014/12/31&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">THEN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART_6 <span style="color:#66d9ef">values</span>(:<span style="color:#66d9ef">new</span>.id,:<span style="color:#66d9ef">new</span>.ymd,:<span style="color:#66d9ef">new</span>.str1,:<span style="color:#66d9ef">new</span>.str2,:<span style="color:#66d9ef">new</span>.str3,:<span style="color:#66d9ef">new</span>.str4);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ELSIF</span> n_part <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2015/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2015/12/31&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">THEN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART_7 <span style="color:#66d9ef">values</span>(:<span style="color:#66d9ef">new</span>.id,:<span style="color:#66d9ef">new</span>.ymd,:<span style="color:#66d9ef">new</span>.str1,:<span style="color:#66d9ef">new</span>.str2,:<span style="color:#66d9ef">new</span>.str3,:<span style="color:#66d9ef">new</span>.str4);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ELSIF</span> n_part <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2016/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2016/12/31&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">THEN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART_8 <span style="color:#66d9ef">values</span>(:<span style="color:#66d9ef">new</span>.id,:<span style="color:#66d9ef">new</span>.ymd,:<span style="color:#66d9ef">new</span>.str1,:<span style="color:#66d9ef">new</span>.str2,:<span style="color:#66d9ef">new</span>.str3,:<span style="color:#66d9ef">new</span>.str4);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ELSIF</span> n_part <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2017/12/31&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">THEN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART_9 <span style="color:#66d9ef">values</span>(:<span style="color:#66d9ef">new</span>.id,:<span style="color:#66d9ef">new</span>.ymd,:<span style="color:#66d9ef">new</span>.str1,:<span style="color:#66d9ef">new</span>.str2,:<span style="color:#66d9ef">new</span>.str3,:<span style="color:#66d9ef">new</span>.str4);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ELSIF</span> n_part <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2018/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2018/12/31&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">THEN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART_10 <span style="color:#66d9ef">values</span>(:<span style="color:#66d9ef">new</span>.id,:<span style="color:#66d9ef">new</span>.ymd,:<span style="color:#66d9ef">new</span>.str1,:<span style="color:#66d9ef">new</span>.str2,:<span style="color:#66d9ef">new</span>.str3,:<span style="color:#66d9ef">new</span>.str4);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ELSIF</span> n_part <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2019/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/12/31&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">THEN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART_11 <span style="color:#66d9ef">values</span>(:<span style="color:#66d9ef">new</span>.id,:<span style="color:#66d9ef">new</span>.ymd,:<span style="color:#66d9ef">new</span>.str1,:<span style="color:#66d9ef">new</span>.str2,:<span style="color:#66d9ef">new</span>.str3,:<span style="color:#66d9ef">new</span>.str4);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ELSIF</span> n_part <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2020/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2020/12/31&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>) <span style="color:#66d9ef">THEN</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART_12 <span style="color:#66d9ef">values</span>(:<span style="color:#66d9ef">new</span>.id,:<span style="color:#66d9ef">new</span>.ymd,:<span style="color:#66d9ef">new</span>.str1,:<span style="color:#66d9ef">new</span>.str2,:<span style="color:#66d9ef">new</span>.str3,:<span style="color:#66d9ef">new</span>.str4);
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">END</span> <span style="color:#66d9ef">IF</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">END</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>
</span></span></code></pre></div><h5 id="insertテスト">INSERTテスト</h5>
<p>試しに１件だけビューに対してINSERTを実施してみる。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART <span style="color:#66d9ef">values</span>(<span style="color:#ae81ff">1</span>,TO_DATE(<span style="color:#e6db74">&#39;2012/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>),DBMS_RANDOM.STRING(<span style="color:#e6db74">&#39;X&#39;</span>, <span style="color:#ae81ff">50</span>),<span style="color:#e6db74">&#39;あああああ&#39;</span>,<span style="color:#e6db74">&#39;AAAA&#39;</span>,<span style="color:#ae81ff">1</span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> PARTTEST_SE_PART <span style="color:#66d9ef">values</span>(<span style="color:#ae81ff">1</span>,TO_DATE(<span style="color:#e6db74">&#39;2012/01/01&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD&#39;</span>),DBMS_RANDOM.STRING(<span style="color:#e6db74">&#39;X&#39;</span>, <span style="color:#ae81ff">50</span>),<span style="color:#e6db74">&#39;あああああ&#39;</span>,<span style="color:#e6db74">&#39;AAAA&#39;</span>,<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">row</span> inserted.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Elapsed: <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>.<span style="color:#ae81ff">092</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">commit</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Commit</span> complete.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Elapsed: <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>.<span style="color:#ae81ff">004</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> PARTTEST_SE_PART;
</span></span><span style="display:flex;"><span>   ID          YMD                                                  STR1     STR2    STR3    STR4 
</span></span><span style="display:flex;"><span>_____ ____________ _____________________________________________________ ________ _______ _______ 
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">01</span><span style="color:#f92672">-</span>JAN<span style="color:#f92672">-</span><span style="color:#ae81ff">12</span>    XDB01K5LVWKZC5KH5XRRV6Z2UAGU40I3U06ZPQ1H0JV5H7RGEC    <span style="color:#960050;background-color:#1e0010">あああああ</span>    AAAA          <span style="color:#ae81ff">1</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Elapsed: <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>.<span style="color:#ae81ff">113</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> 
</span></span></code></pre></div><h5 id="ビューとテーブルの件数を確認">ビューとテーブルの件数を確認</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_1&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_2&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_3&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_3
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_4&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_4
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_5&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_5
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_6&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_6
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_7&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_7
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_8&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_8
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_9&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_9
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_10&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_10
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_11&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_11
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_12&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_12
</span></span><span style="display:flex;"><span>;
</span></span></code></pre></div><p>正常にパーティションテーブルに入っていることを確認</p>
<pre tabindex="0"><code>    &#39;PARTTEST_SE_PART&#39;    ROWCOUNT 
______________________ ___________ 
PARTTEST_SE_PART                 1 
PARTTEST_SE_PART_1               0 
PARTTEST_SE_PART_2               0 
PARTTEST_SE_PART_3               0 
PARTTEST_SE_PART_4               1 
PARTTEST_SE_PART_5               0 
PARTTEST_SE_PART_6               0 
PARTTEST_SE_PART_7               0 
PARTTEST_SE_PART_8               0 
PARTTEST_SE_PART_9               0 
PARTTEST_SE_PART_10              0 
PARTTEST_SE_PART_11              0 
PARTTEST_SE_PART_12              0 

13 rows selected. 
</code></pre><h5 id="データ作成">データ作成</h5>
<p>前半で検証したパーティションテーブルからデータを抽出する</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_PART_1 NOLLOGING <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_EE_PART PARTITION(ymd_p00);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_PART_2 NOLLOGING <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_EE_PART PARTITION(ymd_p01);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_PART_3 NOLLOGING <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_EE_PART PARTITION(ymd_p02);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_PART_4 NOLLOGING <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_EE_PART PARTITION(ymd_p03);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_PART_5 NOLLOGING <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_EE_PART PARTITION(ymd_p04);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_PART_6 NOLLOGING <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_EE_PART PARTITION(ymd_p05);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_PART_7 NOLLOGING <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_EE_PART PARTITION(ymd_p06);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_PART_8 NOLLOGING <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_EE_PART PARTITION(ymd_p07);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_PART_9 NOLLOGING <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_EE_PART PARTITION(ymd_p08);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_PART_10 NOLLOGING <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_EE_PART PARTITION(ymd_p09);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_PART_11 NOLLOGING <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_EE_PART PARTITION(ymd_p10);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_PART_12 NOLLOGING <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> PARTTEST_EE_PART PARTITION(ymd_p11);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">commit</span>;
</span></span></code></pre></div><h5 id="データ件数の確認">データ件数の確認</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTBL_MAIN
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_1&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_1
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_2&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_3&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_3
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_4&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_4
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_5&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_5
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_6&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_6
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_7&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_7
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_8&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_8
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_9&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_9
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_10&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_10
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_11&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_11
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_12&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_12
</span></span><span style="display:flex;"><span>;
</span></span></code></pre></div><h3 id="簡易性能検証">簡易性能検証</h3>
<p>一つの疑似パーティションに約3000万件のデータで全体で1億2万件のデータが可能されている。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTBL_MAIN
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">2</span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">3</span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_1&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_1
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">4</span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">5</span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_2&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_2
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">6</span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">7</span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_3&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_3
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">8</span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">9</span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_4&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_4
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">10</span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">11</span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_5&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_5
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">12</span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">13</span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_6&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_6
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">14</span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">15</span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_7&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_7
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">16</span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">17</span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_8&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_8
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">18</span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">19</span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_9&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_9
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">20</span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">21</span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_10&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_10
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">22</span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">23</span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_11&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_11
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">24</span>  <span style="color:#66d9ef">union</span> <span style="color:#66d9ef">all</span>
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">25</span>  <span style="color:#66d9ef">select</span> <span style="color:#e6db74">&#39;PARTTEST_SE_PART_12&#39;</span>,<span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) rowcount <span style="color:#66d9ef">from</span> PARTTEST_SE_PART_12
</span></span><span style="display:flex;"><span> <span style="color:#ae81ff">26</span>  ;
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#39;PARTTEST_SE_PART&#39;</span>      ROWCOUNT 
</span></span><span style="display:flex;"><span>______________________ _____________ 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART          <span style="color:#ae81ff">2017394688</span> 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART_1                 <span style="color:#ae81ff">0</span> 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART_2          <span style="color:#ae81ff">12830976</span> 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART_3          <span style="color:#ae81ff">12804736</span> 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART_4          <span style="color:#ae81ff">12837760</span> 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART_5          <span style="color:#ae81ff">12809088</span> 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART_6          <span style="color:#ae81ff">12786176</span> 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART_7          <span style="color:#ae81ff">12755840</span> 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART_8          <span style="color:#ae81ff">12817408</span> 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART_9          <span style="color:#ae81ff">12797184</span> 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART_10         <span style="color:#ae81ff">12803072</span> 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART_11         <span style="color:#ae81ff">12757760</span> 
</span></span><span style="display:flex;"><span>PARTTEST_SE_PART_12                <span style="color:#ae81ff">0</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">13</span> <span style="color:#66d9ef">rows</span> selected. 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> 
</span></span></code></pre></div><p>パーティション表でも疑似パーティションでもない普通のテーブルを作成</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">drop</span> <span style="color:#66d9ef">table</span> PARTTEST_SE_NONPART;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> PARTTEST_SE_NONPART
</span></span><span style="display:flex;"><span>(
</span></span><span style="display:flex;"><span>  id number,
</span></span><span style="display:flex;"><span>  ymd DATE,
</span></span><span style="display:flex;"><span>  str1 VARCHAR(<span style="color:#ae81ff">120</span>),
</span></span><span style="display:flex;"><span>  str2 VARCHAR(<span style="color:#ae81ff">500</span>),
</span></span><span style="display:flex;"><span>  str3 VARCHAR2(<span style="color:#ae81ff">10</span>),
</span></span><span style="display:flex;"><span>  str4 NUMBER(<span style="color:#ae81ff">9</span>,<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> <span style="color:#75715e">/*+ PARALLEL (4)) */</span> PARTTEST_SE_NONPART NOLOGGING <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> PARTTEST_SE_PART;
</span></span></code></pre></div><h5 id="疑似パーティション有り索引無しパターン">疑似パーティション有り、索引無しパターン</h5>
<p>ここから実際に簡易的な性能検証を実施してみる。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> rdsadmin.rdsadmin_util.flush_shared_pool;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> rdsadmin.rdsadmin_util.flush_buffer_cache;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> autotrace <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> timing <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> pages <span style="color:#ae81ff">2000</span> lin <span style="color:#ae81ff">2000</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_SE_PART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span></code></pre></div><p>実行結果</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_SE_PART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) 
</span></span><span style="display:flex;"><span>___________ 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">25941120</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Explain</span> Plan
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                              PLAN_TABLE_OUTPUT 
</span></span><span style="display:flex;"><span>_______________________________________________________________________________________________ 
</span></span><span style="display:flex;"><span>Plan hash value: <span style="color:#ae81ff">2206839629</span>                                                                     
</span></span><span style="display:flex;"><span>                                                                                                
</span></span><span style="display:flex;"><span><span style="color:#75715e">--------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Id  <span style="color:#f92672">|</span> <span style="color:#66d9ef">Operation</span>            <span style="color:#f92672">|</span> Name                <span style="color:#f92672">|</span> <span style="color:#66d9ef">Rows</span>  <span style="color:#f92672">|</span> Bytes <span style="color:#f92672">|</span> Cost (<span style="color:#f92672">%</span>CPU)<span style="color:#f92672">|</span> Time     <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">--------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">STATEMENT</span>     <span style="color:#f92672">|</span>                     <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>   <span style="color:#ae81ff">642</span>K  (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">26</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>  SORT <span style="color:#66d9ef">AGGREGATE</span>      <span style="color:#f92672">|</span>                     <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span>   <span style="color:#66d9ef">VIEW</span>               <span style="color:#f92672">|</span> PARTTEST_SE_PART    <span style="color:#f92672">|</span>    <span style="color:#ae81ff">27</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">239</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">642</span>K  (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">26</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span>    <span style="color:#66d9ef">UNION</span><span style="color:#f92672">-</span><span style="color:#66d9ef">ALL</span>         <span style="color:#f92672">|</span>                     <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span>     <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_PART_1  <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">2</span>   (<span style="color:#ae81ff">0</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">5</span> <span style="color:#f92672">|</span>     <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_PART_2  <span style="color:#f92672">|</span>  <span style="color:#ae81ff">2606</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">23454</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">64292</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">6</span> <span style="color:#f92672">|</span>     <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_PART_3  <span style="color:#f92672">|</span>  <span style="color:#ae81ff">2606</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">23454</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">64298</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">7</span> <span style="color:#f92672">|</span>     <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_PART_4  <span style="color:#f92672">|</span>  <span style="color:#ae81ff">2606</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">23454</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">64280</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>     <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_PART_5  <span style="color:#f92672">|</span>  <span style="color:#ae81ff">2606</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">23454</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">64293</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>     <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_PART_6  <span style="color:#f92672">|</span>  <span style="color:#ae81ff">2606</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">23454</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">64298</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">|</span>     <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_PART_7  <span style="color:#f92672">|</span>  <span style="color:#ae81ff">2606</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">23454</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">64269</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">11</span> <span style="color:#f92672">|</span>     <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_PART_8  <span style="color:#f92672">|</span>  <span style="color:#ae81ff">2606</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">23454</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">64273</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">12</span> <span style="color:#f92672">|</span>     <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_PART_9  <span style="color:#f92672">|</span>  <span style="color:#ae81ff">9594</span>K<span style="color:#f92672">|</span>    <span style="color:#ae81ff">82</span>M<span style="color:#f92672">|</span> <span style="color:#ae81ff">64294</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">13</span> <span style="color:#f92672">|</span>     <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_PART_10 <span style="color:#f92672">|</span>    <span style="color:#ae81ff">13</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">113</span>M<span style="color:#f92672">|</span> <span style="color:#ae81ff">64287</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">14</span> <span style="color:#f92672">|</span>     <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_PART_11 <span style="color:#f92672">|</span>  <span style="color:#ae81ff">5094</span>K<span style="color:#f92672">|</span>    <span style="color:#ae81ff">43</span>M<span style="color:#f92672">|</span> <span style="color:#ae81ff">64294</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">03</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">15</span> <span style="color:#f92672">|</span>     <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_PART_12 <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">2</span>   (<span style="color:#ae81ff">0</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">--------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                
</span></span><span style="display:flex;"><span>Predicate Information (identified <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">operation</span> id):                                             
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------------------------------------------------                                             
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">4</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>              
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">5</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>              
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">6</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>              
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">7</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>              
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">8</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>              
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">9</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>              
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                 
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">10</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>              
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                 
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">11</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>              
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                 
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">12</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>              
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                 
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">13</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>              
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                 
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">14</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>              
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                 
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">15</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span>              
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                 
</span></span><span style="display:flex;"><span>                                                                                                
</span></span><span style="display:flex;"><span>Note                                                                                            
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----                                                                                           
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#f92672">-</span> <span style="color:#66d9ef">dynamic</span> <span style="color:#66d9ef">statistics</span> used: <span style="color:#66d9ef">dynamic</span> sampling (<span style="color:#66d9ef">level</span><span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)                                        
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Statistics</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#ae81ff">1600</span>  CPU used <span style="color:#66d9ef">by</span> this <span style="color:#66d9ef">session</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">1601</span>  CPU used <span style="color:#66d9ef">when</span> <span style="color:#66d9ef">call</span> started
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">3853</span>  DB time
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">42</span>  Requests <span style="color:#66d9ef">to</span><span style="color:#f92672">/</span><span style="color:#66d9ef">from</span> client
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">30</span>  enqueue releases
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">30</span>  enqueue requests
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">19833</span>  non<span style="color:#f92672">-</span>idle wait <span style="color:#66d9ef">count</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2523</span>  non<span style="color:#f92672">-</span>idle wait time
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">210</span>  opened cursors cumulative
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  opened cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">19782</span>  physical <span style="color:#66d9ef">read</span> total IO requests
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">18766</span>  physical <span style="color:#66d9ef">read</span> total multi block requests
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">38</span>  process <span style="color:#66d9ef">last</span> non<span style="color:#f92672">-</span>idle time
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">444</span>  <span style="color:#66d9ef">recursive</span> calls
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">8</span>  <span style="color:#66d9ef">recursive</span> cpu <span style="color:#66d9ef">usage</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ae81ff">2340871</span>  <span style="color:#66d9ef">session</span> logical <span style="color:#66d9ef">reads</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2524</span>  <span style="color:#66d9ef">user</span> I<span style="color:#f92672">/</span>O wait time
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">43</span>  <span style="color:#66d9ef">user</span> calls
</span></span><span style="display:flex;"><span>Elapsed: <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">39</span>.<span style="color:#ae81ff">026</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> 
</span></span></code></pre></div><h5 id="疑似パーティション無し索引無しパターン">疑似パーティション無し、索引無しパターン</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> rdsadmin.rdsadmin_util.flush_shared_pool;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> rdsadmin.rdsadmin_util.flush_buffer_cache;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> autotrace <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> timing <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> pages <span style="color:#ae81ff">2000</span> lin <span style="color:#ae81ff">2000</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_SE_NONPART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span></code></pre></div><p>実行結果</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">set</span> timing <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">set</span> pages <span style="color:#ae81ff">2000</span> lin <span style="color:#ae81ff">2000</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_SE_NONPART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) 
</span></span><span style="display:flex;"><span>___________ 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">25941120</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Explain</span> Plan
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                            PLAN_TABLE_OUTPUT 
</span></span><span style="display:flex;"><span>_____________________________________________________________________________________________ 
</span></span><span style="display:flex;"><span>Plan hash value: <span style="color:#ae81ff">145121306</span>                                                                    
</span></span><span style="display:flex;"><span>                                                                                              
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Id  <span style="color:#f92672">|</span> <span style="color:#66d9ef">Operation</span>          <span style="color:#f92672">|</span> Name                <span style="color:#f92672">|</span> <span style="color:#66d9ef">Rows</span>  <span style="color:#f92672">|</span> Bytes <span style="color:#f92672">|</span> Cost (<span style="color:#f92672">%</span>CPU)<span style="color:#f92672">|</span> Time     <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">STATEMENT</span>   <span style="color:#f92672">|</span>                     <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>   <span style="color:#ae81ff">635</span>K  (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">25</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>  SORT <span style="color:#66d9ef">AGGREGATE</span>    <span style="color:#f92672">|</span>                     <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span>   <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">ACCESS</span> <span style="color:#66d9ef">FULL</span><span style="color:#f92672">|</span> PARTTEST_SE_NONPART <span style="color:#f92672">|</span>    <span style="color:#ae81ff">36</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">314</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">635</span>K  (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">25</span> <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                              
</span></span><span style="display:flex;"><span>Predicate Information (identified <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">operation</span> id):                                           
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------------------------------------------------                                           
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                              
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">2</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>)                
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))           
</span></span><span style="display:flex;"><span>                                                                                              
</span></span><span style="display:flex;"><span>Note                                                                                          
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----                                                                                         
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#f92672">-</span> <span style="color:#66d9ef">dynamic</span> <span style="color:#66d9ef">statistics</span> used: <span style="color:#66d9ef">dynamic</span> sampling (<span style="color:#66d9ef">level</span><span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)                                      
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Statistics</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>             <span style="color:#ae81ff">818</span>  CPU used <span style="color:#66d9ef">by</span> this <span style="color:#66d9ef">session</span>
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">819</span>  CPU used <span style="color:#66d9ef">when</span> <span style="color:#66d9ef">call</span> started
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">3118</span>  DB time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">3</span>  Requests <span style="color:#66d9ef">to</span><span style="color:#f92672">/</span><span style="color:#66d9ef">from</span> client
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">4</span>  enqueue conversions
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">13</span>  enqueue releases
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">13</span>  enqueue requests
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  enqueue waits
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">15903</span>  non<span style="color:#f92672">-</span>idle wait <span style="color:#66d9ef">count</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2319</span>  non<span style="color:#f92672">-</span>idle wait time
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">50</span>  opened cursors cumulative
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  opened cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">21147</span>  physical <span style="color:#66d9ef">read</span> total IO requests
</span></span><span style="display:flex;"><span>           <span style="color:#ae81ff">18288</span>  physical <span style="color:#66d9ef">read</span> total multi block requests
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  pinned cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">32</span>  process <span style="color:#66d9ef">last</span> non<span style="color:#f92672">-</span>idle time
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">142</span>  <span style="color:#66d9ef">recursive</span> calls
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">7</span>  <span style="color:#66d9ef">recursive</span> cpu <span style="color:#66d9ef">usage</span>
</span></span><span style="display:flex;"><span>         <span style="color:#ae81ff">2339571</span>  <span style="color:#66d9ef">session</span> logical <span style="color:#66d9ef">reads</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2319</span>  <span style="color:#66d9ef">user</span> I<span style="color:#f92672">/</span>O wait time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">4</span>  <span style="color:#66d9ef">user</span> calls
</span></span><span style="display:flex;"><span>Elapsed: <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">31</span>.<span style="color:#ae81ff">506</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> 
</span></span></code></pre></div><h5 id="索引を使用">索引を使用</h5>
<p>ローカル索引のように各疑似パーティションテーブルに索引を付ける。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_PART_1_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_PART_1(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_PART_2_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_PART_2(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_PART_3_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_PART_3(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_PART_4_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_PART_4(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_PART_5_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_PART_5(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_PART_6_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_PART_6(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_PART_7_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_PART_7(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_PART_8_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_PART_8(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_PART_9_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_PART_9(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_PART_10_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_PART_10(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_PART_11_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_PART_11(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_PART_12_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_PART_12(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">index</span> PARTTEST_SE_NONPART_IDX <span style="color:#66d9ef">ON</span> PARTTEST_SE_NONPART(ymd) nologging parallel <span style="color:#ae81ff">4</span>;
</span></span></code></pre></div><ul>
<li>
<h5 id="疑似パーティション有り索引有りパターン">疑似パーティション有り、索引有りパターン</h5>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> rdsadmin.rdsadmin_util.flush_shared_pool;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> rdsadmin.rdsadmin_util.flush_buffer_cache;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> autotrace <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> timing <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> pages <span style="color:#ae81ff">2000</span> lin <span style="color:#ae81ff">2000</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_SE_PART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_SE_PART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) 
</span></span><span style="display:flex;"><span>___________ 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">25941120</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Explain</span> Plan
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                                      PLAN_TABLE_OUTPUT 
</span></span><span style="display:flex;"><span>_______________________________________________________________________________________________________________________________________ 
</span></span><span style="display:flex;"><span>Plan hash value: <span style="color:#ae81ff">1340602939</span>                                                                                                             
</span></span><span style="display:flex;"><span>                                                                                                                                        
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------------------------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Id  <span style="color:#f92672">|</span> <span style="color:#66d9ef">Operation</span>                   <span style="color:#f92672">|</span> Name                    <span style="color:#f92672">|</span> <span style="color:#66d9ef">Rows</span>  <span style="color:#f92672">|</span> Bytes <span style="color:#f92672">|</span> Cost (<span style="color:#f92672">%</span>CPU)<span style="color:#f92672">|</span> Time     <span style="color:#f92672">|</span>    TQ  <span style="color:#f92672">|</span><span style="color:#66d9ef">IN</span><span style="color:#f92672">-</span><span style="color:#66d9ef">OUT</span><span style="color:#f92672">|</span> PQ Distrib <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------------------------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">STATEMENT</span>            <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">28333</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">02</span> <span style="color:#f92672">|</span>        <span style="color:#f92672">|</span>      <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>  SORT <span style="color:#66d9ef">AGGREGATE</span>             <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>        <span style="color:#f92672">|</span>      <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span>   PX COORDINATOR            <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>        <span style="color:#f92672">|</span>      <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span>    PX SEND QC (RANDOM)      <span style="color:#f92672">|</span> :TQ10000                <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> P<span style="color:#f92672">-&gt;</span>S <span style="color:#f92672">|</span> QC (RAND)  <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span>     SORT <span style="color:#66d9ef">AGGREGATE</span>          <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">5</span> <span style="color:#f92672">|</span>      <span style="color:#66d9ef">VIEW</span>                   <span style="color:#f92672">|</span> PARTTEST_SE_PART        <span style="color:#f92672">|</span>    <span style="color:#ae81ff">27</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">239</span>M<span style="color:#f92672">|</span> <span style="color:#ae81ff">28333</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">02</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">6</span> <span style="color:#f92672">|</span>       <span style="color:#66d9ef">UNION</span><span style="color:#f92672">-</span><span style="color:#66d9ef">ALL</span>             <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">7</span> <span style="color:#f92672">|</span>        PX SELECTOR          <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">8</span> <span style="color:#f92672">|</span>         <span style="color:#66d9ef">INDEX</span> RANGE SCAN    <span style="color:#f92672">|</span> PARTTEST_SE_PART_1_IDX  <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">0</span>   (<span style="color:#ae81ff">0</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>        PX SELECTOR          <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">10</span> <span style="color:#f92672">|</span>         <span style="color:#66d9ef">INDEX</span> RANGE SCAN    <span style="color:#f92672">|</span> PARTTEST_SE_PART_2_IDX  <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">2</span>   (<span style="color:#ae81ff">0</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">11</span> <span style="color:#f92672">|</span>        PX SELECTOR          <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">12</span> <span style="color:#f92672">|</span>         <span style="color:#66d9ef">INDEX</span> RANGE SCAN    <span style="color:#f92672">|</span> PARTTEST_SE_PART_3_IDX  <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">2</span>   (<span style="color:#ae81ff">0</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">13</span> <span style="color:#f92672">|</span>        PX SELECTOR          <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">14</span> <span style="color:#f92672">|</span>         <span style="color:#66d9ef">INDEX</span> RANGE SCAN    <span style="color:#f92672">|</span> PARTTEST_SE_PART_4_IDX  <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">2</span>   (<span style="color:#ae81ff">0</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">15</span> <span style="color:#f92672">|</span>        PX SELECTOR          <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">16</span> <span style="color:#f92672">|</span>         <span style="color:#66d9ef">INDEX</span> RANGE SCAN    <span style="color:#f92672">|</span> PARTTEST_SE_PART_5_IDX  <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">2</span>   (<span style="color:#ae81ff">0</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">17</span> <span style="color:#f92672">|</span>        PX SELECTOR          <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">18</span> <span style="color:#f92672">|</span>         <span style="color:#66d9ef">INDEX</span> RANGE SCAN    <span style="color:#f92672">|</span> PARTTEST_SE_PART_6_IDX  <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">2</span>   (<span style="color:#ae81ff">0</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">19</span> <span style="color:#f92672">|</span>        PX SELECTOR          <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">20</span> <span style="color:#f92672">|</span>         <span style="color:#66d9ef">INDEX</span> RANGE SCAN    <span style="color:#f92672">|</span> PARTTEST_SE_PART_7_IDX  <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">2</span>   (<span style="color:#ae81ff">0</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">21</span> <span style="color:#f92672">|</span>        PX SELECTOR          <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">22</span> <span style="color:#f92672">|</span>         <span style="color:#66d9ef">INDEX</span> RANGE SCAN    <span style="color:#f92672">|</span> PARTTEST_SE_PART_8_IDX  <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">2</span>   (<span style="color:#ae81ff">0</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">23</span> <span style="color:#f92672">|</span>        PX BLOCK ITERATOR    <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>  <span style="color:#ae81ff">9594</span>K<span style="color:#f92672">|</span>    <span style="color:#ae81ff">82</span>M<span style="color:#f92672">|</span>  <span style="color:#ae81ff">9447</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWC <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">24</span> <span style="color:#f92672">|</span>         <span style="color:#66d9ef">INDEX</span> FAST <span style="color:#66d9ef">FULL</span> SCAN<span style="color:#f92672">|</span> PARTTEST_SE_PART_9_IDX  <span style="color:#f92672">|</span>  <span style="color:#ae81ff">9594</span>K<span style="color:#f92672">|</span>    <span style="color:#ae81ff">82</span>M<span style="color:#f92672">|</span>  <span style="color:#ae81ff">9447</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">25</span> <span style="color:#f92672">|</span>        PX BLOCK ITERATOR    <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>    <span style="color:#ae81ff">13</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">113</span>M<span style="color:#f92672">|</span>  <span style="color:#ae81ff">9452</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWC <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">26</span> <span style="color:#f92672">|</span>         <span style="color:#66d9ef">INDEX</span> FAST <span style="color:#66d9ef">FULL</span> SCAN<span style="color:#f92672">|</span> PARTTEST_SE_PART_10_IDX <span style="color:#f92672">|</span>    <span style="color:#ae81ff">13</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">113</span>M<span style="color:#f92672">|</span>  <span style="color:#ae81ff">9452</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">27</span> <span style="color:#f92672">|</span>        PX BLOCK ITERATOR    <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>  <span style="color:#ae81ff">5094</span>K<span style="color:#f92672">|</span>    <span style="color:#ae81ff">43</span>M<span style="color:#f92672">|</span>  <span style="color:#ae81ff">9419</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWC <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">28</span> <span style="color:#f92672">|</span>         <span style="color:#66d9ef">INDEX</span> FAST <span style="color:#66d9ef">FULL</span> SCAN<span style="color:#f92672">|</span> PARTTEST_SE_PART_11_IDX <span style="color:#f92672">|</span>  <span style="color:#ae81ff">5094</span>K<span style="color:#f92672">|</span>    <span style="color:#ae81ff">43</span>M<span style="color:#f92672">|</span>  <span style="color:#ae81ff">9419</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>  <span style="color:#ae81ff">29</span> <span style="color:#f92672">|</span>        PX SELECTOR          <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span> <span style="color:#ae81ff">30</span> <span style="color:#f92672">|</span>         <span style="color:#66d9ef">INDEX</span> RANGE SCAN    <span style="color:#f92672">|</span> PARTTEST_SE_PART_12_IDX <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">0</span>   (<span style="color:#ae81ff">0</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">------------------------------------------------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                                                        
</span></span><span style="display:flex;"><span>Predicate Information (identified <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">operation</span> id):                                                                                     
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------------------------------------------------                                                                                     
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                                                        
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">8</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">access</span>(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                                
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">10</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">access</span>(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                                
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">12</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">access</span>(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                                
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">14</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">access</span>(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                                
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">16</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">access</span>(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                                
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">18</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">access</span>(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                                
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">20</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">access</span>(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                                
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">22</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">access</span>(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                                
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">24</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                                
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">26</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                                
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">28</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                                
</span></span><span style="display:flex;"><span>  <span style="color:#ae81ff">30</span> <span style="color:#f92672">-</span> <span style="color:#66d9ef">access</span>(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,               
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                                
</span></span><span style="display:flex;"><span>                                                                                                                                        
</span></span><span style="display:flex;"><span>Note                                                                                                                                    
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----                                                                                                                                   
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#f92672">-</span> <span style="color:#66d9ef">dynamic</span> <span style="color:#66d9ef">statistics</span> used: <span style="color:#66d9ef">dynamic</span> sampling (<span style="color:#66d9ef">level</span><span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)                                                                                
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Statistics</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>             <span style="color:#ae81ff">472</span>  CPU used <span style="color:#66d9ef">by</span> this <span style="color:#66d9ef">session</span>
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">6</span>  CPU used <span style="color:#66d9ef">when</span> <span style="color:#66d9ef">call</span> started
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">709</span>  DB time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">3</span>  Requests <span style="color:#66d9ef">to</span><span style="color:#f92672">/</span><span style="color:#66d9ef">from</span> client
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">8</span>  enqueue conversions
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">50</span>  enqueue releases
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">54</span>  enqueue requests
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">148</span>  <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">call</span> idle wait time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">2</span>  messages sent
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">1320</span>  non<span style="color:#f92672">-</span>idle wait <span style="color:#66d9ef">count</span>
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">93</span>  non<span style="color:#f92672">-</span>idle wait time
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">273</span>  opened cursors cumulative
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  opened cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">1290</span>  physical <span style="color:#66d9ef">read</span> total IO requests
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">922</span>  physical <span style="color:#66d9ef">read</span> total multi block requests
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  pinned cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">2</span>  process <span style="color:#66d9ef">last</span> non<span style="color:#f92672">-</span>idle time
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">557</span>  <span style="color:#66d9ef">recursive</span> calls
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">471</span>  <span style="color:#66d9ef">recursive</span> cpu <span style="color:#66d9ef">usage</span>
</span></span><span style="display:flex;"><span>          <span style="color:#ae81ff">113998</span>  <span style="color:#66d9ef">session</span> logical <span style="color:#66d9ef">reads</span>
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">93</span>  <span style="color:#66d9ef">user</span> I<span style="color:#f92672">/</span>O wait time
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">20</span>  <span style="color:#66d9ef">user</span> calls
</span></span><span style="display:flex;"><span>Elapsed: <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">01</span>.<span style="color:#ae81ff">856</span>
</span></span></code></pre></div><ul>
<li>
<h5 id="疑似パーティション無し索引有りパターン">疑似パーティション無し、索引有りパターン</h5>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> rdsadmin.rdsadmin_util.flush_shared_pool;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">exec</span> rdsadmin.rdsadmin_util.flush_buffer_cache;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> autotrace <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> timing <span style="color:#66d9ef">on</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> pages <span style="color:#ae81ff">2000</span> lin <span style="color:#ae81ff">2000</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_SE_NONPART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SQL</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">from</span> PARTTEST_SE_NONPART <span style="color:#66d9ef">where</span> ymd <span style="color:#66d9ef">between</span> to_date(<span style="color:#e6db74">&#39;2017/05/01 11:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>) <span style="color:#66d9ef">and</span> to_date(<span style="color:#e6db74">&#39;2019/05/11 12:00:00&#39;</span>,<span style="color:#e6db74">&#39;YYYY/MM/DD HH24:MI:SS&#39;</span>);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">COUNT</span>(<span style="color:#f92672">*</span>) 
</span></span><span style="display:flex;"><span>___________ 
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">25941120</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Explain</span> Plan
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                                    PLAN_TABLE_OUTPUT 
</span></span><span style="display:flex;"><span>_____________________________________________________________________________________________________________________________________ 
</span></span><span style="display:flex;"><span>Plan hash value: <span style="color:#ae81ff">2697818807</span>                                                                                                           
</span></span><span style="display:flex;"><span>                                                                                                                                      
</span></span><span style="display:flex;"><span><span style="color:#75715e">----------------------------------------------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span> Id  <span style="color:#f92672">|</span> <span style="color:#66d9ef">Operation</span>                 <span style="color:#f92672">|</span> Name                    <span style="color:#f92672">|</span> <span style="color:#66d9ef">Rows</span>  <span style="color:#f92672">|</span> Bytes <span style="color:#f92672">|</span> Cost (<span style="color:#f92672">%</span>CPU)<span style="color:#f92672">|</span> Time     <span style="color:#f92672">|</span>    TQ  <span style="color:#f92672">|</span><span style="color:#66d9ef">IN</span><span style="color:#f92672">-</span><span style="color:#66d9ef">OUT</span><span style="color:#f92672">|</span> PQ Distrib <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">----------------------------------------------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">STATEMENT</span>          <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">93390</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">04</span> <span style="color:#f92672">|</span>        <span style="color:#f92672">|</span>      <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>  SORT <span style="color:#66d9ef">AGGREGATE</span>           <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>        <span style="color:#f92672">|</span>      <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span>   PX COORDINATOR          <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>       <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>        <span style="color:#f92672">|</span>      <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span>    PX SEND QC (RANDOM)    <span style="color:#f92672">|</span> :TQ10000                <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> P<span style="color:#f92672">-&gt;</span>S <span style="color:#f92672">|</span> QC (RAND)  <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">4</span> <span style="color:#f92672">|</span>     SORT <span style="color:#66d9ef">AGGREGATE</span>        <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>     <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span>     <span style="color:#ae81ff">9</span> <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>          <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span>   <span style="color:#ae81ff">5</span> <span style="color:#f92672">|</span>      PX BLOCK ITERATOR    <span style="color:#f92672">|</span>                         <span style="color:#f92672">|</span>    <span style="color:#ae81ff">36</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">314</span>M<span style="color:#f92672">|</span> <span style="color:#ae81ff">93390</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">04</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWC <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#f92672">|*</span>  <span style="color:#ae81ff">6</span> <span style="color:#f92672">|</span>       <span style="color:#66d9ef">INDEX</span> FAST <span style="color:#66d9ef">FULL</span> SCAN<span style="color:#f92672">|</span> PARTTEST_SE_NONPART_IDX <span style="color:#f92672">|</span>    <span style="color:#ae81ff">36</span>M<span style="color:#f92672">|</span>   <span style="color:#ae81ff">314</span>M<span style="color:#f92672">|</span> <span style="color:#ae81ff">93390</span>   (<span style="color:#ae81ff">1</span>)<span style="color:#f92672">|</span> <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">04</span> <span style="color:#f92672">|</span>  Q1,<span style="color:#ae81ff">00</span> <span style="color:#f92672">|</span> PCWP <span style="color:#f92672">|</span>            <span style="color:#f92672">|</span>    
</span></span><span style="display:flex;"><span><span style="color:#75715e">----------------------------------------------------------------------------------------------------------------------------------    
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                                                      
</span></span><span style="display:flex;"><span>Predicate Information (identified <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">operation</span> id):                                                                                   
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------------------------------------------------                                                                                   
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                                                                                                                                      
</span></span><span style="display:flex;"><span>   <span style="color:#ae81ff">6</span> <span style="color:#f92672">-</span> filter(<span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&gt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2017-05-01 11:00:00&#39;</span>, <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>) <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#34;YMD&#34;</span><span style="color:#f92672">&lt;=</span>TO_DATE(<span style="color:#e6db74">&#39; 2019-05-11 12:00:00&#39;</span>,             
</span></span><span style="display:flex;"><span>              <span style="color:#e6db74">&#39;syyyy-mm-dd hh24:mi:ss&#39;</span>))                                                                                              
</span></span><span style="display:flex;"><span>                                                                                                                                      
</span></span><span style="display:flex;"><span>Note                                                                                                                                  
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----                                                                                                                                 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#f92672">-</span> <span style="color:#66d9ef">dynamic</span> <span style="color:#66d9ef">statistics</span> used: <span style="color:#66d9ef">dynamic</span> sampling (<span style="color:#66d9ef">level</span><span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)                                                                              
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">Statistics</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>             <span style="color:#ae81ff">867</span>  CPU used <span style="color:#66d9ef">by</span> this <span style="color:#66d9ef">session</span>
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">2</span>  CPU used <span style="color:#66d9ef">when</span> <span style="color:#66d9ef">call</span> started
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">1853</span>  DB time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">3</span>  Requests <span style="color:#66d9ef">to</span><span style="color:#f92672">/</span><span style="color:#66d9ef">from</span> client
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">8</span>  enqueue conversions
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">16</span>  enqueue releases
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">20</span>  enqueue requests
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  enqueue waits
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">404</span>  <span style="color:#66d9ef">in</span> <span style="color:#66d9ef">call</span> idle wait time
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">2</span>  messages sent
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">1261</span>  non<span style="color:#f92672">-</span>idle wait <span style="color:#66d9ef">count</span>
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">577</span>  non<span style="color:#f92672">-</span>idle wait time
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">49</span>  opened cursors cumulative
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  opened cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2774</span>  physical <span style="color:#66d9ef">read</span> total IO requests
</span></span><span style="display:flex;"><span>            <span style="color:#ae81ff">2711</span>  physical <span style="color:#66d9ef">read</span> total multi block requests
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">1</span>  pinned cursors <span style="color:#66d9ef">current</span>
</span></span><span style="display:flex;"><span>               <span style="color:#ae81ff">4</span>  process <span style="color:#66d9ef">last</span> non<span style="color:#f92672">-</span>idle time
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">136</span>  <span style="color:#66d9ef">recursive</span> calls
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">866</span>  <span style="color:#66d9ef">recursive</span> cpu <span style="color:#66d9ef">usage</span>
</span></span><span style="display:flex;"><span>          <span style="color:#ae81ff">344724</span>  <span style="color:#66d9ef">session</span> logical <span style="color:#66d9ef">reads</span>
</span></span><span style="display:flex;"><span>             <span style="color:#ae81ff">576</span>  <span style="color:#66d9ef">user</span> I<span style="color:#f92672">/</span>O wait time
</span></span><span style="display:flex;"><span>              <span style="color:#ae81ff">20</span>  <span style="color:#66d9ef">user</span> calls
</span></span><span style="display:flex;"><span>Elapsed: <span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">00</span>:<span style="color:#ae81ff">04</span>.<span style="color:#ae81ff">011</span>
</span></span></code></pre></div><h3 id="結果-1">結果</h3>
<p>疑似パーティション有り、索引有りパターンの場合はインデックスを使うことで高速に検索が可能だった。<code>Predicate Information</code>を見れば分かる通り、インデックスを使ってAccess predicateになって不要な表を高速に処理している。（＝読み込んでいるブロック数が少ない）<code>Predicate Information</code>の<code>access</code>と<code>filter</code>の違いは次の通り。<code>access</code>とは、データに「アクセス」するために何かを使用していることを意味する。つまり、関連するデータにのみ「アクセス」する。<code>filter</code>とは、必要以上のデータを取得し、取得後にフィルタリングする。フィルタはすべての行に適用され、フィルタを通過した行のみが送信される。</p>
<p>（あと、疑似パーティションなし/索引ありのパターンにおいて、オプティマイザの気持ちになれず、INDEX FAST FULL SCANが走っている理由がパッと思いつかなかった。）</p>
<table>
<thead>
<tr>
<th></th>
<th>疑似パーティションあり</th>
<th>疑似パーティションなし</th>
</tr>
</thead>
<tbody>
<tr>
<td>索引あり</td>
<td>1.856</td>
<td>4.011</td>
</tr>
<tr>
<td>索引なし</td>
<td>39.026</td>
<td>31.506</td>
</tr>
</tbody>
</table>
<h3 id="全体的な結果">全体的な結果</h3>
<p>今回のケースではパーティション構成と疑似パーティションで大きな違いが見られないどころか、疑似パーティションありの方がインデックスを使うことにより高速に処理出来た。ざっくりと疑似パーティション構成の動作や設定方法を理解出来たので一旦、検証メモとしては以上。運用面でどうするか、他の検索時にはどうなるか等検討は必要になるかと思う。</p>
<p>取得データ量やオプティマイザの実行計画次第で大きく性能値は変更されうるので一概に判断はしないが、運用面の検討も含めてPoCを経てパーティションオプションをどうするかを決めれば良いと感じた。</p>
<table>
<thead>
<tr>
<th></th>
<th>パーティションあり</th>
<th>パーティションなし</th>
</tr>
</thead>
<tbody>
<tr>
<td>索引あり</td>
<td>9.506</td>
<td>21.901</td>
</tr>
<tr>
<td>索引なし</td>
<td>8.748</td>
<td>31.136</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th></th>
<th>疑似パーティションあり</th>
<th>疑似パーティションなし</th>
</tr>
</thead>
<tbody>
<tr>
<td>索引あり</td>
<td>1.856</td>
<td>4.011</td>
</tr>
<tr>
<td>索引なし</td>
<td>39.026</td>
<td>31.506</td>
</tr>
</tbody>
</table>

</content>
---

<p>関連しているかもしれない記事</p>
 
<ul>
  
  <li><a href="/oracle-ee-se2-migration-to-aws-rds-for-oracle.html">Oracle Enterprise EditionからStandard Editionへのダウングレード検討メモ</a></li>
  
  <li><a href="/oracle-realtime-monitoring-sql.html">OracleのリアルタイムSQL監視</a></li>
  
  <li><a href="/aws-rds-oracle-datapump-import.html">RDS(Oracle)にData Pumpでインポートする</a></li>
  
  <li><a href="/oracle-19c-extended-varchar2.html">Oracle 19cで拡張VARCHAR2型を導入</a></li>
  
  <li><a href="/aws-aurora-failover-time-test/">Aurora PostgreSQLのフェイルオーバー時間の計測</a></li>
  
</ul>

<br>

<p>
  
  <a href="https://zatoima.github.io/blog/oracle/">#Oracle</a>
  
  <a href="https://zatoima.github.io/blog/ee/">#EE</a>
  
  <a href="https://zatoima.github.io/blog/se2/">#SE2</a>
  
  <a href="https://zatoima.github.io/blog/rds/">#RDS</a>
  
</p>


  </main>
  <footer>Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo ʕ•ᴥ•ʔ Bear</a>
</footer>

    
</body>

</html>
