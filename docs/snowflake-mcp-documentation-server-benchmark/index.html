<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="https://zatoima.github.io/favicon.svg" />
<title>Snowflake MCPドキュメントサーバー2種のベンチマーク比較 | my opinion is my own</title>
<meta name="title" content="Snowflake MCPドキュメントサーバー2種のベンチマーク比較" />
<meta name="description" content="" />
<meta name="keywords" content="MCP,Snowflake,Cortex Agent,CKE,ベンチマーク," />


<meta property="og:url" content="https://zatoima.github.io/snowflake-mcp-documentation-server-benchmark/">
  <meta property="og:site_name" content="my opinion is my own">
  <meta property="og:title" content="Snowflake MCPドキュメントサーバー2種のベンチマーク比較">
  <meta property="og:description" content="memo blog。GitHub Pagesとして構成されています。">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2026-02-26T00:00:00+00:00">
    <meta property="article:modified_time" content="2026-02-26T00:00:00+00:00">
    <meta property="article:tag" content="MCP">
    <meta property="article:tag" content="Snowflake">
    <meta property="article:tag" content="Cortex Agent">
    <meta property="article:tag" content="CKE">
    <meta property="article:tag" content="ベンチマーク">
    <meta property="og:image" content="https://zatoima.github.io/images/share.png">




  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://zatoima.github.io/images/share.png">
  <meta name="twitter:title" content="Snowflake MCPドキュメントサーバー2種のベンチマーク比較">
  <meta name="twitter:description" content="memo blog。GitHub Pagesとして構成されています。">




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "\"Snowflake MCPドキュメントサーバー2種のベンチマーク比較\"",
  "description": "\"\"",
  "datePublished": "\"2026-02-26T00:00:00Z\"",
  "dateModified": "\"2026-02-26T00:00:00Z\"",
  "author": {
    "@type": "Person",
    "name": "\"zatoima\"",
    "url": "https://zatoima.github.io/about/"
  },
  "publisher": {
    "@type": "Person",
    "name": "\"zatoima\""
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "\"https://zatoima.github.io/snowflake-mcp-documentation-server-benchmark/\""
  },
  "wordCount":  4411 ,
  "keywords": "[\"MCP\",\"Snowflake\",\"Cortex Agent\",\"CKE\",\"ベンチマーク\"]"
}
</script>

<meta name="referrer" content="no-referrer-when-downgrade" />

  <link rel="alternate" type="text/plain" href="/llms.txt" title="LLMs.txt" />
  <link rel="alternate" type="text/plain" href="/llms-full.txt" title="LLMs-full.txt" />

  <script>
    (function(){
      var t = localStorage.getItem('theme');
      if (t === 'dark' || ((!t || t === 'system') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.setAttribute('data-theme', 'dark');
      }
    })();
  </script><link rel="stylesheet" href="/css/zenn.css">

<script async src="https://www.googletagmanager.com/gtag/js?id=G-STFZ9QMXGM"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-STFZ9QMXGM');
</script>
</head>

<body>
  <a href="#main" class="skip-link">メインコンテンツへスキップ</a>
  <div class="reading-progress"></div>
  <div class="site-wrapper">
    <header class="site-header">
      <div class="header-inner">
        <a href="/" class="site-logo">my opinion is my own</a>
        <nav class="header-nav">
<a href="/about/">About</a>
<a href="/blog/">Blog</a>
<a href="/index.xml">RSS</a>
<a href="/other/">Other</a>
<a href="/llms.txt" title="LLMs.txt - AI/LLM向けサイト情報">llms.txt</a>
</nav>
        <div class="header-actions">
          <button id="search-btn" class="header-icon-btn" aria-label="検索">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
          </button>
          <button id="dark-mode-btn" class="header-icon-btn" aria-label="ダークモード切替">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          </button>
          <button id="hamburger-btn" class="hamburger-btn" aria-label="メニュー">
            <span></span><span></span><span></span>
          </button>
        </div>
      </div>
    </header>

    
    <div id="search-overlay" class="search-overlay">
      <div class="search-modal">
        <input type="text" id="search-input" class="search-input" placeholder="記事を検索... (Ctrl+K)" autocomplete="off">
        <div id="search-results" class="search-results"></div>
      </div>
    </div>

    
    <div id="nav-overlay" class="nav-overlay"></div>

    <main id="main" class="site-main">
<div class="article-layout">
  <article class="article-main">
    
    <nav class="breadcrumb" aria-label="パンくずリスト">
  <a href="/">ホーム</a>
  <span class="breadcrumb-sep">&gt;</span>
  
  <a href="/blog/">Blog</a>
  <span class="breadcrumb-sep">&gt;</span>
  
  <span class="breadcrumb-current">Snowflake MCPドキュメントサーバー2種のベンチマーク比較</span>
</nav>

    
    <div class="article-card">
      <div class="article-header">
        <div class="article-emoji"><img src="/images/tags/mcp.svg" alt="MCP" class="tag-icon" loading="lazy"></div>
        <h1>Snowflake MCPドキュメントサーバー2種のベンチマーク比較</h1>
        
        <div class="article-meta">
          <time class="article-date" datetime='2026-02-26'>
            2026/02/26 に公開
          </time>
          
          
          
          <span class="reading-time">📖 約8分</span>
        </div>
        <div class="article-tags">
          
          <a href="https://zatoima.github.io/blog/mcp/" class="tag-badge"><img src="/images/tags/mcp.svg" alt="MCP" class="tag-badge-icon" loading="lazy">MCP</a>
          
          <a href="https://zatoima.github.io/blog/snowflake/" class="tag-badge"><img src="/images/tags/snowflake.svg" alt="Snowflake" class="tag-badge-icon" loading="lazy">Snowflake</a>
          
          <a href="https://zatoima.github.io/blog/cortex-agent/" class="tag-badge">Cortex Agent</a>
          
          <a href="https://zatoima.github.io/blog/cke/" class="tag-badge">CKE</a>
          
          <a href="https://zatoima.github.io/blog/%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF/" class="tag-badge">ベンチマーク</a>
          
        </div>
        
      </div>
      <div class="article-content">
        <h2 id="はじめに">はじめに</h2>
<p>Snowflake公式ドキュメントの検索用MCPサーバーとして、<code>snowflake-documentation-assistant</code>と自作の<code>snowflake-docs</code>の2つを運用している。</p>
<div class="link-card">
    <a href="https://github.com/zatoima/snowflake-docs-mcp-server" target="_blank" rel="noopener noreferrer">
      <div class="link-card-body">
        <div class="link-card-text">
          <div class="link-card-title">GitHub - zatoima/snowflake-docs-mcp-server: MCP server for searching and retrieving Snowflake official documentation</div><div class="link-card-description">MCP server for searching and retrieving Snowflake official documentation - zatoima/snowflake-docs-mcp-server</div><div class="link-card-meta">
            <img class="link-card-favicon" src="https://www.google.com/s2/favicons?sz=32&amp;domain=github.com" alt="" loading="lazy" width="16" height="16">
            <span class="link-card-domain">github.com</span>
          </div>
        </div><div class="link-card-image">
            <img src="https://opengraph.githubassets.com/58ea2e91475f7d892b636a3bd79d8a5042ddd5faadedc8135ccb03b87a641a34/zatoima/snowflake-docs-mcp-server" alt="" loading="lazy">
          </div></div>
    </a>
  </div>
<p>自作のMCP Serverを作った理由としてはCKEのデプロイ無しにローカルで動作させているClaude Code、Cursor、Cortex Code CLIから参照させたいと思ったからだ。</p>
<p><code>snowflake-documentation-assistant</code>のバックエンドは、Snowflakeの<a href="https://docs.snowflake.com/en/user-guide/snowflake-cortex/cortex-agents">Cortex Agent</a>に<a href="https://docs.snowflake.com/en/user-guide/snowflake-cortex/cortex-knowledge-extensions/cke-overview">Cortex Knowledge Extension（CKE）</a>としてCortex Search Serviceを登録したものである。Cortex AgentはCortex Search（非構造化データ）やCortex Analyst（構造化データ）をツールとして統合し、LLMベースでオーケストレーションを行う仕組みで、これをMCPサーバーとしてラップし、Claude CodeやCursor、Cortex Code CLI等から呼び出す構成となっている。一方の<code>snowflake-docs</code>は公式サイトのAPIとスクレイピングをベースとした自作MCPサーバーである。</p>
<p>本記事では、10カテゴリ・20クエリ・5評価軸で包括的にベンチマークした結果をまとめる。</p>
<h2 id="構成詳細">構成詳細</h2>
<h3 id="方式a-snowflake-documentation-assistantcortex-agent--cke">方式A: snowflake-documentation-assistant（Cortex Agent + CKE）</h3>
<table>
  <thead>
      <tr>
          <th>項目</th>
          <th>詳細</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>識別子</td>
          <td><code>snowflake-documentation-assistant</code></td>
      </tr>
      <tr>
          <td>バックエンド</td>
          <td>Cortex Agent + Cortex Search Service（CKE）</td>
      </tr>
      <tr>
          <td>呼び出し方式</td>
          <td>MCPサーバーとしてClaude Code / Cursor / Cortex Code CLI等から利用</td>
      </tr>
      <tr>
          <td>検索方式</td>
          <td>セマンティック検索（ベクトル類似度 + テキストマッチ）</td>
      </tr>
      <tr>
          <td>ツール数</td>
          <td>1個</td>
      </tr>
      <tr>
          <td>対応言語</td>
          <td>英語のみ</td>
      </tr>
  </tbody>
</table>
<p>Cortex Agentに登録されたCortex Search Service（CKE）がバックエンドとして動作し、ドキュメントチャンクをセマンティック検索してスコア付きで返却する。Claude Code等からはMCPサーバー経由でこのCortex Agentを呼び出す形となる。</p>
<table>
  <thead>
      <tr>
          <th>パラメータ</th>
          <th>型</th>
          <th>デフォルト</th>
          <th>説明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>query</code> (必須)</td>
          <td>string</td>
          <td>-</td>
          <td>非構造化テキストクエリ</td>
      </tr>
      <tr>
          <td><code>columns</code></td>
          <td>array[string]</td>
          <td>全カラム</td>
          <td>返却カラムの指定</td>
      </tr>
      <tr>
          <td><code>filter</code></td>
          <td>object</td>
          <td>-</td>
          <td>Cortex Search フィルタ (<code>@eq</code>, <code>@contains</code>, <code>@gte</code>, <code>@lte</code>)</td>
      </tr>
      <tr>
          <td><code>limit</code></td>
          <td>integer</td>
          <td>10</td>
          <td>最大結果数</td>
      </tr>
  </tbody>
</table>
<p>特徴:</p>
<ul>
<li>1回の呼び出しでチャンク全文が返る（追加呼び出し不要）</li>
<li>セマンティック検索によりタイポ・表現揺れに対応</li>
<li>フィルタ機能（日付・数値・属性）あり</li>
<li>limit=5で約2,500-3,000トークン消費</li>
</ul>
<h3 id="方式b-snowflake-docs自作mcpサーバー">方式B: snowflake-docs（自作MCPサーバー）</h3>
<table>
  <thead>
      <tr>
          <th>項目</th>
          <th>詳細</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>サーバー識別子</td>
          <td><code>user-snowflake-docs</code></td>
      </tr>
      <tr>
          <td>GitHub</td>
          <td><a href="https://github.com/zatoima/snowflake-docs-mcp-server">https://github.com/zatoima/snowflake-docs-mcp-server</a></td>
      </tr>
      <tr>
          <td>基盤技術</td>
          <td>Snowflake公式サイト API + スクレイピング</td>
      </tr>
      <tr>
          <td>検索方式</td>
          <td>キーワード全文検索（公式検索API）</td>
      </tr>
      <tr>
          <td>ツール数</td>
          <td>5個</td>
      </tr>
      <tr>
          <td>対応言語</td>
          <td>英語・日本語 (<code>language</code> パラメータ)</td>
      </tr>
  </tbody>
</table>
<h4 id="ツール一覧">ツール一覧</h4>
<table>
  <thead>
      <tr>
          <th>#</th>
          <th>ツール名</th>
          <th>用途</th>
          <th>主要パラメータ</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1</td>
          <td><code>search_snowflake_docs</code></td>
          <td>キーワード全文検索</td>
          <td><code>query</code>, <code>max_results</code>(1-20), <code>language</code>(&ldquo;en&rdquo;/&ldquo;ja&rdquo;), <code>include_headings</code></td>
      </tr>
      <tr>
          <td>2</td>
          <td><code>search_in_doc</code></td>
          <td>ページ内検索（関連セクション自動抽出）</td>
          <td><code>url</code>, <code>query</code>, <code>max_sections</code>(default 3), <code>max_length</code>(max 20000)</td>
      </tr>
      <tr>
          <td>3</td>
          <td><code>get_doc_toc</code></td>
          <td>見出し構造（目次）取得</td>
          <td><code>url</code></td>
      </tr>
      <tr>
          <td>4</td>
          <td><code>get_doc_section</code></td>
          <td>特定セクション取得</td>
          <td><code>url</code>, <code>section_id</code>, <code>include_code_blocks</code>, <code>max_length</code></td>
      </tr>
      <tr>
          <td>5</td>
          <td><code>get_doc_content</code></td>
          <td>ページ全文取得</td>
          <td><code>url</code>, <code>max_length</code>, <code>start_index</code>(ページネーション)</td>
      </tr>
  </tbody>
</table>
<p>推奨ワークフロー:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>search_snowflake_docs(include_headings=True)  ~200-400 tokens
</span></span><span style="display:flex;"><span>         |
</span></span><span style="display:flex;"><span>         v
</span></span><span style="display:flex;"><span>search_in_doc(url, query)                     ~600-900 tokens 追加
</span></span><span style="display:flex;"><span>         |
</span></span><span style="display:flex;"><span>         v
</span></span><span style="display:flex;"><span>合計 ~800-1,200 tokens で必要情報を取得
</span></span></code></pre></div><p>特徴:</p>
<ul>
<li>段階的取得で必要情報だけを効率的に取得</li>
<li>コードブロックはデフォルト除外（<code>include_code_blocks=True</code> で取得）</li>
<li>日本語ドキュメントをネイティブサポート</li>
<li>Knowledge Base記事も検索対象</li>
<li>ページネーション対応</li>
</ul>
<h3 id="アーキテクチャ比較">アーキテクチャ比較</h3>
<table>
  <thead>
      <tr>
          <th>比較項目</th>
          <th>方式A (Cortex Agent + CKE)</th>
          <th>方式B (snowflake-docs MCP)</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>種別</td>
          <td>MCPサーバー（バックエンド: Cortex Agent + CKE）</td>
          <td>MCPサーバー（自作）</td>
      </tr>
      <tr>
          <td>検索方式</td>
          <td>セマンティック（ベクトル類似度）</td>
          <td>キーワード（全文検索API）</td>
      </tr>
      <tr>
          <td>ツール数</td>
          <td>1</td>
          <td>5</td>
      </tr>
      <tr>
          <td>呼び出し回数</td>
          <td>1回で完結</td>
          <td>1-3回の段階的取得</td>
      </tr>
      <tr>
          <td>典型的トークン消費数</td>
          <td>~2,500-3,000 (limit=5)</td>
          <td>~200-400 (検索のみ), ~800-1,200 (2段階)</td>
      </tr>
      <tr>
          <td>日本語対応</td>
          <td>非対応</td>
          <td>対応</td>
      </tr>
      <tr>
          <td>コード例取得</td>
          <td>チャンクに含まれれば自動</td>
          <td><code>include_code_blocks=True</code> で明示指定</td>
      </tr>
      <tr>
          <td>フィルタリング</td>
          <td>Cortex Searchフィルタ</td>
          <td>なし</td>
      </tr>
      <tr>
          <td>ソース範囲</td>
          <td>公式ドキュメント + SnowConvert</td>
          <td>公式ドキュメント + Knowledge Base</td>
      </tr>
      <tr>
          <td>粒度制御</td>
          <td>limit（チャンク数）のみ</td>
          <td>max_results, max_sections, max_length, section_id</td>
      </tr>
  </tbody>
</table>
<h2 id="評価方法">評価方法</h2>
<h3 id="スコアリング方式">スコアリング方式</h3>
<p>各クエリの検索結果に対するスコアリングはLLM-as-a-Judge方式を採用した。Claude Opus 4.6が検索結果を評価し、5軸それぞれに1-5のスコアを付与している。人間による採点ではないため、評価の一貫性は高いが、主観的な判断が入る軸（特にノイズ率・ソース品質）については留意が必要である。</p>
<h3 id="評価軸5軸各1-5スコア">評価軸（5軸、各1-5スコア）</h3>
<table>
  <thead>
      <tr>
          <th>軸</th>
          <th>定義</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>精度 (Accuracy)</td>
          <td>求めている情報が結果に含まれているか</td>
      </tr>
      <tr>
          <td>完全性 (Completeness)</td>
          <td>追加呼び出しなしで回答に十分な情報があるか</td>
      </tr>
      <tr>
          <td>ノイズ率 (Noise)</td>
          <td>無関係な結果の混入度合い (5=ノイズなし)</td>
      </tr>
      <tr>
          <td>コンテキスト効率 (Efficiency)</td>
          <td>トークン消費に対する情報価値の比率</td>
      </tr>
      <tr>
          <td>ソース品質 (Source)</td>
          <td>公式リファレンスが上位に来るか</td>
      </tr>
  </tbody>
</table>
<h3 id="スコア定義1-5">スコア定義（1-5）</h3>
<table>
  <thead>
      <tr>
          <th>スコア</th>
          <th>精度</th>
          <th>完全性</th>
          <th>ノイズ率</th>
          <th>コンテキスト効率</th>
          <th>ソース品質</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>5</td>
          <td>正確な公式情報を返す</td>
          <td>追加検索不要で回答可能</td>
          <td>無関係な結果なし</td>
          <td>最小トークンで必要情報を網羅</td>
          <td>公式リファレンスのみ</td>
      </tr>
      <tr>
          <td>4</td>
          <td>正確だが一部不足</td>
          <td>軽微な補足で回答可能</td>
          <td>無関係な結果が1-2件</td>
          <td>多少の冗長はあるが許容範囲</td>
          <td>公式が大半、一部KB記事混入</td>
      </tr>
      <tr>
          <td>3</td>
          <td>関連情報はあるが間接的</td>
          <td>追加検索が1回必要</td>
          <td>半数程度が無関係</td>
          <td>情報量に対しトークン消費がやや多い</td>
          <td>公式と非公式が混在</td>
      </tr>
      <tr>
          <td>2</td>
          <td>部分的にしか一致しない</td>
          <td>複数回の追加検索が必要</td>
          <td>大半が無関係</td>
          <td>冗長な情報が多い</td>
          <td>非公式情報が大半</td>
      </tr>
      <tr>
          <td>1</td>
          <td>求めている情報がない</td>
          <td>回答不可能</td>
          <td>ほぼ全て無関係</td>
          <td>トークン消費に見合う情報なし</td>
          <td>公式情報なし</td>
      </tr>
  </tbody>
</table>
<h3 id="テストカテゴリ10カテゴリ-x-2クエリ--20テスト">テストカテゴリ（10カテゴリ x 2クエリ = 20テスト）</h3>
<ol>
<li>SQL構文: CREATE DYNAMIC TABLE, MERGE INTO</li>
<li>概念・アーキテクチャ: micro-partitions, scaling policy</li>
<li>エラー: Object does not exist, lock timeout</li>
<li>新機能: Cortex Agent, Notebooks ML</li>
<li>ベストプラクティス: CSV loading, warehouse auto-suspend</li>
<li>セキュリティ: masking vs row access policy, network policy</li>
<li>パラメータ: STATEMENT_TIMEOUT, DATA_RETENTION_TIME</li>
<li>API/SDK: Snowpark saveAsTable, REST API</li>
<li>マイグレーション: Oracle PL/SQL, Redshift DISTKEY</li>
<li>日本語: ストリームとタスク, 外部ステージ</li>
</ol>
<h2 id="phase-1-20クエリ-スコアマトリクス">Phase 1: 20クエリ スコアマトリクス</h2>
<p>各クエリの内容は上記テストカテゴリを参照。スコアは各軸1-5で、合計は25点満点。</p>
<h3 id="方式a">方式A</h3>
<table>
  <thead>
      <tr>
          <th>#</th>
          <th>カテゴリ</th>
          <th>Acc</th>
          <th>Comp</th>
          <th>Noise</th>
          <th>Eff</th>
          <th>Src</th>
          <th>合計</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Q1</td>
          <td>SQL構文</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>3</td>
          <td>5</td>
          <td>23</td>
      </tr>
      <tr>
          <td>Q2</td>
          <td>SQL構文</td>
          <td>4</td>
          <td>4</td>
          <td>3</td>
          <td>2</td>
          <td>3</td>
          <td>16</td>
      </tr>
      <tr>
          <td>Q3</td>
          <td>概念</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>3</td>
          <td>5</td>
          <td>23</td>
      </tr>
      <tr>
          <td>Q4</td>
          <td>概念</td>
          <td>4</td>
          <td>4</td>
          <td>3</td>
          <td>3</td>
          <td>5</td>
          <td>19</td>
      </tr>
      <tr>
          <td>Q5</td>
          <td>エラー</td>
          <td>4</td>
          <td>4</td>
          <td>3</td>
          <td>2</td>
          <td>4</td>
          <td>17</td>
      </tr>
      <tr>
          <td>Q6</td>
          <td>エラー</td>
          <td>4</td>
          <td>4</td>
          <td>4</td>
          <td>2</td>
          <td>5</td>
          <td>19</td>
      </tr>
      <tr>
          <td>Q7</td>
          <td>新機能</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>3</td>
          <td>5</td>
          <td>23</td>
      </tr>
      <tr>
          <td>Q8</td>
          <td>新機能</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>3</td>
          <td>5</td>
          <td>23</td>
      </tr>
      <tr>
          <td>Q9</td>
          <td>BP</td>
          <td>4</td>
          <td>4</td>
          <td>3</td>
          <td>2</td>
          <td>3</td>
          <td>16</td>
      </tr>
      <tr>
          <td>Q10</td>
          <td>BP</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>3</td>
          <td>5</td>
          <td>23</td>
      </tr>
      <tr>
          <td>Q11</td>
          <td>セキュリティ</td>
          <td>3</td>
          <td>3</td>
          <td>3</td>
          <td>2</td>
          <td>4</td>
          <td>15</td>
      </tr>
      <tr>
          <td>Q12</td>
          <td>セキュリティ</td>
          <td>4</td>
          <td>4</td>
          <td>4</td>
          <td>2</td>
          <td>5</td>
          <td>19</td>
      </tr>
      <tr>
          <td>Q13</td>
          <td>パラメータ</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>3</td>
          <td>5</td>
          <td>23</td>
      </tr>
      <tr>
          <td>Q14</td>
          <td>パラメータ</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>3</td>
          <td>5</td>
          <td>23</td>
      </tr>
      <tr>
          <td>Q15</td>
          <td>API/SDK</td>
          <td>4</td>
          <td>4</td>
          <td>3</td>
          <td>2</td>
          <td>4</td>
          <td>17</td>
      </tr>
      <tr>
          <td>Q16</td>
          <td>API/SDK</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>3</td>
          <td>5</td>
          <td>23</td>
      </tr>
      <tr>
          <td>Q17</td>
          <td>移行</td>
          <td>4</td>
          <td>3</td>
          <td>3</td>
          <td>2</td>
          <td>4</td>
          <td>16</td>
      </tr>
      <tr>
          <td>Q18</td>
          <td>移行</td>
          <td>5</td>
          <td>5</td>
          <td>4</td>
          <td>2</td>
          <td>4</td>
          <td>20</td>
      </tr>
      <tr>
          <td>Q19</td>
          <td>日本語</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>5</td>
      </tr>
      <tr>
          <td>Q20</td>
          <td>日本語</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>1</td>
          <td>5</td>
      </tr>
      <tr>
          <td></td>
          <td><strong>平均</strong></td>
          <td><strong>4.1</strong></td>
          <td><strong>4.1</strong></td>
          <td><strong>3.8</strong></td>
          <td><strong>2.4</strong></td>
          <td><strong>4.2</strong></td>
          <td><strong>18.4</strong></td>
      </tr>
  </tbody>
</table>
<h3 id="方式b">方式B</h3>
<table>
  <thead>
      <tr>
          <th>#</th>
          <th>カテゴリ</th>
          <th>Acc</th>
          <th>Comp</th>
          <th>Noise</th>
          <th>Eff</th>
          <th>Src</th>
          <th>合計</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Q1</td>
          <td>SQL構文</td>
          <td>5</td>
          <td>2</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>22</td>
      </tr>
      <tr>
          <td>Q2</td>
          <td>SQL構文</td>
          <td>5</td>
          <td>2</td>
          <td>3</td>
          <td>5</td>
          <td>4</td>
          <td>19</td>
      </tr>
      <tr>
          <td>Q3</td>
          <td>概念</td>
          <td>5</td>
          <td>2</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>22</td>
      </tr>
      <tr>
          <td>Q4</td>
          <td>概念</td>
          <td>4</td>
          <td>2</td>
          <td>4</td>
          <td>5</td>
          <td>4</td>
          <td>19</td>
      </tr>
      <tr>
          <td>Q5</td>
          <td>エラー</td>
          <td>3</td>
          <td>2</td>
          <td>3</td>
          <td>5</td>
          <td>2</td>
          <td>15</td>
      </tr>
      <tr>
          <td>Q6</td>
          <td>エラー</td>
          <td>4</td>
          <td>2</td>
          <td>3</td>
          <td>5</td>
          <td>3</td>
          <td>17</td>
      </tr>
      <tr>
          <td>Q7</td>
          <td>新機能</td>
          <td>5</td>
          <td>2</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>22</td>
      </tr>
      <tr>
          <td>Q8</td>
          <td>新機能</td>
          <td>5</td>
          <td>2</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>22</td>
      </tr>
      <tr>
          <td>Q9</td>
          <td>BP</td>
          <td>5</td>
          <td>2</td>
          <td>4</td>
          <td>5</td>
          <td>4</td>
          <td>20</td>
      </tr>
      <tr>
          <td>Q10</td>
          <td>BP</td>
          <td>4</td>
          <td>2</td>
          <td>3</td>
          <td>5</td>
          <td>4</td>
          <td>18</td>
      </tr>
      <tr>
          <td>Q11</td>
          <td>セキュリティ</td>
          <td>5</td>
          <td>2</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>22</td>
      </tr>
      <tr>
          <td>Q12</td>
          <td>セキュリティ</td>
          <td>5</td>
          <td>2</td>
          <td>4</td>
          <td>5</td>
          <td>4</td>
          <td>20</td>
      </tr>
      <tr>
          <td>Q13</td>
          <td>パラメータ</td>
          <td>3</td>
          <td>2</td>
          <td>2</td>
          <td>5</td>
          <td>2</td>
          <td>14</td>
      </tr>
      <tr>
          <td>Q14</td>
          <td>パラメータ</td>
          <td>3</td>
          <td>2</td>
          <td>1</td>
          <td>5</td>
          <td>2</td>
          <td>13</td>
      </tr>
      <tr>
          <td>Q15</td>
          <td>API/SDK</td>
          <td>4</td>
          <td>2</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>21</td>
      </tr>
      <tr>
          <td>Q16</td>
          <td>API/SDK</td>
          <td>5</td>
          <td>2</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>22</td>
      </tr>
      <tr>
          <td>Q17</td>
          <td>移行</td>
          <td>5</td>
          <td>2</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>22</td>
      </tr>
      <tr>
          <td>Q18</td>
          <td>移行</td>
          <td>5</td>
          <td>2</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>22</td>
      </tr>
      <tr>
          <td>Q19</td>
          <td>日本語</td>
          <td>5</td>
          <td>2</td>
          <td>4</td>
          <td>5</td>
          <td>5</td>
          <td>21</td>
      </tr>
      <tr>
          <td>Q20</td>
          <td>日本語</td>
          <td>5</td>
          <td>2</td>
          <td>5</td>
          <td>5</td>
          <td>5</td>
          <td>22</td>
      </tr>
      <tr>
          <td></td>
          <td><strong>平均</strong></td>
          <td><strong>4.5</strong></td>
          <td><strong>2.0</strong></td>
          <td><strong>4.0</strong></td>
          <td><strong>5.0</strong></td>
          <td><strong>4.2</strong></td>
          <td><strong>19.8</strong></td>
      </tr>
  </tbody>
</table>
<h3 id="カテゴリ別集計">カテゴリ別集計</h3>
<p><img src="category-scores.png" alt="カテゴリ別スコア比較"></p>
<p>方式A優勢: 概念、エラー、新機能、ベストプラクティス、パラメータ（5カテゴリ）
方式B優勢: SQL構文、セキュリティ、API/SDK、マイグレーション、日本語（5カテゴリ）</p>
<h3 id="軸別集計">軸別集計</h3>
<p><img src="axis-radar.png" alt="評価軸別スコア比較"></p>
<h2 id="phase-2-深掘りワークフローテストsnowflake-docs">Phase 2: 深掘りワークフローテスト（snowflake-docs）</h2>
<p><code>search</code> + <code>search_in_doc</code> の2段階ワークフローで完全性がどう改善されるかを検証した。</p>
<p><img src="phase2-improvement.png" alt="Phase 2: 2段階ワークフローによる完全性の改善"></p>
<p><code>search_in_doc</code> を組み合わせると完全性が平均 2.0 → 4.6 に改善。追加コストは ~700-900 tokens。2段階ワークフロー合計は ~1,000-1,200 tokens で、方式A の ~2,500-3,000 tokens の約40%に収まる。</p>
<h2 id="phase-3-特殊ケーステスト">Phase 3: 特殊ケーステスト</h2>
<h3 id="曖昧クエリhow-to-connect">曖昧クエリ「how to connect」</h3>
<table>
  <thead>
      <tr>
          <th></th>
          <th>方式A</th>
          <th>方式B</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>結果</td>
          <td>Spark接続、CONNECT BY構文 → ほぼ無関係</td>
          <td>UiPath, DataGrip, Tableau接続 → 具体的</td>
      </tr>
      <tr>
          <td>精度</td>
          <td>1</td>
          <td>3</td>
      </tr>
  </tbody>
</table>
<h3 id="具体的クエリflatten-recursive-nested-json-array">具体的クエリ「FLATTEN RECURSIVE nested JSON array」</h3>
<table>
  <thead>
      <tr>
          <th></th>
          <th>方式A</th>
          <th>方式B</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>結果</td>
          <td>FLATTEN関数のコード例・パラメータ具体例</td>
          <td>FLATTENリファレンスページ + KB記事</td>
      </tr>
      <tr>
          <td>精度</td>
          <td>5</td>
          <td>5</td>
      </tr>
      <tr>
          <td>完全性</td>
          <td>5 (コード例含む)</td>
          <td>2 (excerpt のみ)</td>
      </tr>
  </tbody>
</table>
<h3 id="存在しない機能snowflake-graphql-api-endpoint">存在しない機能「Snowflake GraphQL API endpoint」</h3>
<table>
  <thead>
      <tr>
          <th></th>
          <th>方式A</th>
          <th>方式B</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>結果</td>
          <td>SQL API, Cortex Search REST API</td>
          <td>REST API, SQL API概要</td>
      </tr>
      <tr>
          <td>精度</td>
          <td>2</td>
          <td>3</td>
      </tr>
      <tr>
          <td>判定</td>
          <td>どちらも「存在しない」と明示しない</td>
          <td></td>
      </tr>
  </tbody>
</table>
<h3 id="タイポ含みクエリcreat-tabel-with-primery-key">タイポ含みクエリ「CREAT TABEL with primery key」</h3>
<table>
  <thead>
      <tr>
          <th></th>
          <th>方式A</th>
          <th>方式B</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>結果</td>
          <td>CREATE TABLE + PRIMARY KEY実例</td>
          <td>CREATE TABLE CONSTRAINT + リファレンス</td>
      </tr>
      <tr>
          <td>精度</td>
          <td>4</td>
          <td>5</td>
      </tr>
  </tbody>
</table>
<h3 id="特殊ケース集計">特殊ケース集計</h3>
<table>
  <thead>
      <tr>
          <th>テスト</th>
          <th>方式A</th>
          <th>方式B</th>
          <th>優勢</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>曖昧</td>
          <td>1</td>
          <td>3</td>
          <td>B</td>
      </tr>
      <tr>
          <td>具体的</td>
          <td>5</td>
          <td>5</td>
          <td>同点 (Aは完全性で優勢)</td>
      </tr>
      <tr>
          <td>存在しない機能</td>
          <td>2</td>
          <td>3</td>
          <td>B</td>
      </tr>
      <tr>
          <td>タイポ</td>
          <td>4</td>
          <td>5</td>
          <td>B</td>
      </tr>
  </tbody>
</table>
<h2 id="総合スコアカード">総合スコアカード</h2>
<h3 id="search-のみ1回呼び出し">search のみ（1回呼び出し）</h3>
<table>
  <thead>
      <tr>
          <th>評価軸</th>
          <th>方式A</th>
          <th>方式B</th>
          <th>優勢</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>精度</td>
          <td>4.1</td>
          <td>4.5</td>
          <td>B</td>
      </tr>
      <tr>
          <td>完全性</td>
          <td>4.1</td>
          <td>2.0</td>
          <td>A</td>
      </tr>
      <tr>
          <td>ノイズ率</td>
          <td>3.8</td>
          <td>4.0</td>
          <td>B</td>
      </tr>
      <tr>
          <td>効率</td>
          <td>2.4</td>
          <td>5.0</td>
          <td>B</td>
      </tr>
      <tr>
          <td>ソース品質</td>
          <td>4.2</td>
          <td>4.2</td>
          <td>同点</td>
      </tr>
      <tr>
          <td>日本語対応</td>
          <td>1.0</td>
          <td>5.0</td>
          <td>B</td>
      </tr>
      <tr>
          <td>特殊ケース耐性</td>
          <td>3.0</td>
          <td>4.0</td>
          <td>B</td>
      </tr>
  </tbody>
</table>
<h3 id="2段階ワークフローsearch--search_in_doc">2段階ワークフロー（search + search_in_doc）</h3>
<table>
  <thead>
      <tr>
          <th>評価軸</th>
          <th>方式A (1回)</th>
          <th>方式B (2回)</th>
          <th>優勢</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>精度</td>
          <td>4.1</td>
          <td>4.5</td>
          <td>B</td>
      </tr>
      <tr>
          <td>完全性</td>
          <td>4.1</td>
          <td>4.6</td>
          <td>B</td>
      </tr>
      <tr>
          <td>ノイズ率</td>
          <td>3.8</td>
          <td>4.0</td>
          <td>B</td>
      </tr>
      <tr>
          <td>効率</td>
          <td>2.4</td>
          <td>4.0</td>
          <td>B</td>
      </tr>
      <tr>
          <td>トークン消費</td>
          <td>~2,500-3,000</td>
          <td>~1,000-1,200</td>
          <td>B</td>
      </tr>
  </tbody>
</table>
<h2 id="検証から得られた所感">検証から得られた所感</h2>
<h3 id="1-日本語対応の決定的な差">1. 日本語対応の決定的な差</h3>
<p>方式Aは日本語クエリに対して全く関連のない結果を返した（text_matchスコア 0.0）。Cortex Search Serviceのインデックスが英語コンテンツのみで構成されていることが原因。方式Bは <code>language: &quot;ja&quot;</code> で日本語ドキュメントを正確に検索可能。</p>
<h3 id="2-完全性-vs-効率のトレードオフ">2. 完全性 vs 効率のトレードオフ</h3>
<p>方式Aは1回でチャンク全文を返すため「完全性」が高い（4.1）が、コンテキスト消費が2-3倍になる。方式Bは2段階ワークフローで同等以上の完全性（4.6）をより少ないトークンで達成可能。</p>
<h3 id="3-ソース多様性">3. ソース多様性</h3>
<p>方式BはKnowledge Base記事も検索対象に含む。トラブルシューティング系で有用だが、パラメータ関連ではKB記事が上位に来すぎて公式リファレンスが見つけにくい場合がある。</p>
<h3 id="4-snowconvertノイズ">4. SnowConvertノイズ</h3>
<p>方式Aはマイグレーション関連チャンク（SnowConvert: Oracle, Redshift等）が混入しやすい。SQL構文クエリで5件中3-4件がSnowConvertドキュメントになることがある。</p>
<h3 id="5-パラメータ検索">5. パラメータ検索</h3>
<p>方式Aはパラメータ名をチャンク内で直接マッチするため、<code>STATEMENT_TIMEOUT_IN_SECONDS</code> のような具体的パラメータの検索精度が高い。方式BではKB記事が上位に来る傾向がある。</p>
<h2 id="関連記事">関連記事</h2>
<div class="link-card">
    <a href="https://zatoima.github.io/snowflake-docs-mcp-server-architecture/" target="_blank" rel="noopener noreferrer">
      <div class="link-card-body">
        <div class="link-card-text">
          <div class="link-card-title">Snowflakeドキュメント検索MCPサーバーを作成した</div><div class="link-card-description">方式B（snowflake-docs）の技術的な仕組み（Next.jsのbuildId取得、検索API、HTML→Markdown変換）</div><div class="link-card-meta">
            <img class="link-card-favicon" src="https://www.google.com/s2/favicons?sz=32&amp;domain=zatoima.github.io" alt="" loading="lazy" width="16" height="16">
            <span class="link-card-domain">zatoima.github.io</span>
          </div>
        </div></div>
    </a>
  </div>
<div class="link-card">
    <a href="https://zatoima.github.io/mcp-server-context-usage-optimization/" target="_blank" rel="noopener noreferrer">
      <div class="link-card-body">
        <div class="link-card-text">
          <div class="link-card-title">ドキュメント系MCPサーバーのコンテキスト使用量を検証し改善した</div><div class="link-card-description">方式B（snowflake-docs）のコンテキスト使用量を実測し、改善した過程と結果</div><div class="link-card-meta">
            <img class="link-card-favicon" src="https://www.google.com/s2/favicons?sz=32&amp;domain=zatoima.github.io" alt="" loading="lazy" width="16" height="16">
            <span class="link-card-domain">zatoima.github.io</span>
          </div>
        </div></div>
    </a>
  </div>
<h2 id="参考資料">参考資料</h2>
<div class="link-card">
    <a href="https://docs.snowflake.com/en/user-guide/snowflake-cortex/cortex-agents" target="_blank" rel="noopener noreferrer">
      <div class="link-card-body">
        <div class="link-card-text">
          <div class="link-card-title">Cortex Agents | Snowflake Documentation</div><div class="link-card-meta">
            <img class="link-card-favicon" src="https://www.google.com/s2/favicons?sz=32&amp;domain=docs.snowflake.com" alt="" loading="lazy" width="16" height="16">
            <span class="link-card-domain">docs.snowflake.com</span>
          </div>
        </div></div>
    </a>
  </div>
<div class="link-card">
    <a href="https://docs.snowflake.com/en/user-guide/snowflake-cortex/cortex-knowledge-extensions/cke-overview" target="_blank" rel="noopener noreferrer">
      <div class="link-card-body">
        <div class="link-card-text">
          <div class="link-card-title">Cortex Knowledge Extensions | Snowflake Documentation</div><div class="link-card-meta">
            <img class="link-card-favicon" src="https://www.google.com/s2/favicons?sz=32&amp;domain=docs.snowflake.com" alt="" loading="lazy" width="16" height="16">
            <span class="link-card-domain">docs.snowflake.com</span>
          </div>
        </div></div>
    </a>
  </div>
<div class="link-card">
    <a href="https://docs.snowflake.com/en/user-guide/snowflake-cortex/cortex-search/cortex-search-overview" target="_blank" rel="noopener noreferrer">
      <div class="link-card-body">
        <div class="link-card-text">
          <div class="link-card-title">Cortex Search | Snowflake Documentation</div><div class="link-card-meta">
            <img class="link-card-favicon" src="https://www.google.com/s2/favicons?sz=32&amp;domain=docs.snowflake.com" alt="" loading="lazy" width="16" height="16">
            <span class="link-card-domain">docs.snowflake.com</span>
          </div>
        </div></div>
    </a>
  </div>
<div class="link-card">
    <a href="https://github.com/zatoima/snowflake-docs-mcp-server" target="_blank" rel="noopener noreferrer">
      <div class="link-card-body">
        <div class="link-card-text">
          <div class="link-card-title">GitHub - zatoima/snowflake-docs-mcp-server: MCP server for searching and retrieving Snowflake official documentation</div><div class="link-card-description">MCP server for searching and retrieving Snowflake official documentation - zatoima/snowflake-docs-mcp-server</div><div class="link-card-meta">
            <img class="link-card-favicon" src="https://www.google.com/s2/favicons?sz=32&amp;domain=github.com" alt="" loading="lazy" width="16" height="16">
            <span class="link-card-domain">github.com</span>
          </div>
        </div><div class="link-card-image">
            <img src="https://opengraph.githubassets.com/58ea2e91475f7d892b636a3bd79d8a5042ddd5faadedc8135ccb03b87a641a34/zatoima/snowflake-docs-mcp-server" alt="" loading="lazy">
          </div></div>
    </a>
  </div>

      </div>
    </div>

    
    
    
    <a href="https://github.com/zatoima/zatoima.github.io/edit/main/content/blog/2026-02-26-snowflake-mcp-documentation-server-benchmark/index.md" target="_blank" rel="noopener noreferrer" class="github-edit-link">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
      GitHubで編集を提案
    </a>
    
    

    
    
    <nav class="prev-next-nav">
      
      <a href="https://zatoima.github.io/claude-code-agent-teams-parallel-collaboration/" class="prev-next-link prev-link">
        <span class="prev-next-label">← 前の記事</span>
        <span class="prev-next-title">Claude Codeのエージェントチーム機能 - 複数エージェントによる並列協調作業</span>
      </a>
      
      
      <a href="https://zatoima.github.io/llm-papers-2026-02-26/" class="prev-next-link next-link">
        <span class="prev-next-label">次の記事 →</span>
        <span class="prev-next-title">LLM論文サーベイ（2026-02-26）</span>
      </a>
      
    </nav>
    

    
<div class="share-buttons">
  <span class="share-label">共有:</span>
  <a href="https://twitter.com/intent/tweet?url=https%3a%2f%2fzatoima.github.io%2fsnowflake-mcp-documentation-server-benchmark%2f&text=Snowflake&#43;MCP%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC2%E7%A8%AE%E3%81%AE%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF%E6%AF%94%E8%BC%83" target="_blank" rel="noopener noreferrer" class="share-btn share-twitter" aria-label="Xで共有">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
  </a>
  <a href="https://b.hatena.ne.jp/entry/https://zatoima.github.io/snowflake-mcp-documentation-server-benchmark/" target="_blank" rel="noopener noreferrer" class="share-btn share-hatena" aria-label="はてなブックマークに追加">B!</a>
</div>



<div class="related-articles">
  <h2 class="related-articles-title">関連しているかもしれない記事</h2>
  <ul class="related-list">
    
    <li><a href="/mcp-server-context-usage-optimization/">ドキュメント系MCPサーバーのコンテキスト使用量を検証し改善した</a></li>
    
    <li><a href="/snowflake-docs-mcp-server-architecture/">Snowflakeドキュメント検索MCPサーバーを作成した</a></li>
    
    <li><a href="/snowflake-directory-table-integration/">Snowflakeのディレクトリテーブルとメタデータ自動更新</a></li>
    
    <li><a href="/snowflake-snowcli-data-unload-upload/">SnowCLIを使用したデータのアンロード/アップロード</a></li>
    
    <li><a href="/snowflake-sql-api-try/">SQL APIを使用してSnowflakeにSQLを発行する</a></li>
    
  </ul>
</div>




<div class="post-tags">
  
  <a href="https://zatoima.github.io/blog/mcp/" class="tag-badge"><img src="/images/tags/mcp.svg" alt="MCP" class="tag-badge-icon" loading="lazy">MCP</a>
  
  <a href="https://zatoima.github.io/blog/snowflake/" class="tag-badge"><img src="/images/tags/snowflake.svg" alt="Snowflake" class="tag-badge-icon" loading="lazy">Snowflake</a>
  
  <a href="https://zatoima.github.io/blog/cortex-agent/" class="tag-badge">Cortex Agent</a>
  
  <a href="https://zatoima.github.io/blog/cke/" class="tag-badge">CKE</a>
  
  <a href="https://zatoima.github.io/blog/%E3%83%99%E3%83%B3%E3%83%81%E3%83%9E%E3%83%BC%E3%82%AF/" class="tag-badge">ベンチマーク</a>
  
</div>


  </article>

  
  <aside class="article-sidebar">
    <div class="toc-container">
      <div class="toc-title">目次</div>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#はじめに">はじめに</a></li>
    <li><a href="#構成詳細">構成詳細</a>
      <ul>
        <li><a href="#方式a-snowflake-documentation-assistantcortex-agent--cke">方式A: snowflake-documentation-assistant（Cortex Agent + CKE）</a></li>
        <li><a href="#方式b-snowflake-docs自作mcpサーバー">方式B: snowflake-docs（自作MCPサーバー）</a>
          <ul>
            <li><a href="#ツール一覧">ツール一覧</a></li>
          </ul>
        </li>
        <li><a href="#アーキテクチャ比較">アーキテクチャ比較</a></li>
      </ul>
    </li>
    <li><a href="#評価方法">評価方法</a>
      <ul>
        <li><a href="#スコアリング方式">スコアリング方式</a></li>
        <li><a href="#評価軸5軸各1-5スコア">評価軸（5軸、各1-5スコア）</a></li>
        <li><a href="#スコア定義1-5">スコア定義（1-5）</a></li>
        <li><a href="#テストカテゴリ10カテゴリ-x-2クエリ--20テスト">テストカテゴリ（10カテゴリ x 2クエリ = 20テスト）</a></li>
      </ul>
    </li>
    <li><a href="#phase-1-20クエリ-スコアマトリクス">Phase 1: 20クエリ スコアマトリクス</a>
      <ul>
        <li><a href="#方式a">方式A</a></li>
        <li><a href="#方式b">方式B</a></li>
        <li><a href="#カテゴリ別集計">カテゴリ別集計</a></li>
        <li><a href="#軸別集計">軸別集計</a></li>
      </ul>
    </li>
    <li><a href="#phase-2-深掘りワークフローテストsnowflake-docs">Phase 2: 深掘りワークフローテスト（snowflake-docs）</a></li>
    <li><a href="#phase-3-特殊ケーステスト">Phase 3: 特殊ケーステスト</a>
      <ul>
        <li><a href="#曖昧クエリhow-to-connect">曖昧クエリ「how to connect」</a></li>
        <li><a href="#具体的クエリflatten-recursive-nested-json-array">具体的クエリ「FLATTEN RECURSIVE nested JSON array」</a></li>
        <li><a href="#存在しない機能snowflake-graphql-api-endpoint">存在しない機能「Snowflake GraphQL API endpoint」</a></li>
        <li><a href="#タイポ含みクエリcreat-tabel-with-primery-key">タイポ含みクエリ「CREAT TABEL with primery key」</a></li>
        <li><a href="#特殊ケース集計">特殊ケース集計</a></li>
      </ul>
    </li>
    <li><a href="#総合スコアカード">総合スコアカード</a>
      <ul>
        <li><a href="#search-のみ1回呼び出し">search のみ（1回呼び出し）</a></li>
        <li><a href="#2段階ワークフローsearch--search_in_doc">2段階ワークフロー（search + search_in_doc）</a></li>
      </ul>
    </li>
    <li><a href="#検証から得られた所感">検証から得られた所感</a>
      <ul>
        <li><a href="#1-日本語対応の決定的な差">1. 日本語対応の決定的な差</a></li>
        <li><a href="#2-完全性-vs-効率のトレードオフ">2. 完全性 vs 効率のトレードオフ</a></li>
        <li><a href="#3-ソース多様性">3. ソース多様性</a></li>
        <li><a href="#4-snowconvertノイズ">4. SnowConvertノイズ</a></li>
        <li><a href="#5-パラメータ検索">5. パラメータ検索</a></li>
      </ul>
    </li>
    <li><a href="#関連記事">関連記事</a></li>
    <li><a href="#参考資料">参考資料</a></li>
  </ul>
</nav>
    </div>
  </aside>
  
</div>

    </main>

    <footer class="site-footer">
      <div class="footer-inner">
        <div class="footer-disclaimer">本ブログの内容は個人的な見解であり、所属する企業・組織の公式な見解を示すものではありません。</div>
        <div class="footer-links">
          <a href="/">ホーム</a>
          <a href="/blog/">記事一覧</a>
          <a href="/tags/">タグ一覧</a>
          <a href="/about/">About</a>
        </div>
        <div class="footer-social">
          <a href="https://github.com/zatoima" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
          </a>
          <a href="https://x.com/zatoima1" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
          </a>
          <a href="/index.xml" aria-label="RSS">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19.01 7.38 20 6.18 20C5 20 4 19.01 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27V4.44m0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93V10.1z"/></svg>
          </a>
        </div>
        <div class="footer-copyright">Copyright © 2019, zatoima.</div>
        <div class="footer-disclaimer">GitHub Pagesとして構成されています。</div>
        <div class="footer-disclaimer">本ブログの内容は個人的な見解であり、所属する企業・組織の公式な見解を示すものではありません。</div>
      </div>
    </footer>
  </div>
  <script src="/js/lightbox.js" defer></script>
  <script src="/js/toc-highlight.js" defer></script>
  <script src="/js/code-copy.js" defer></script>
  <script src="/js/dark-mode.js" defer></script>
  <script src="/js/mobile-nav.js" defer></script>
  <script src="/js/search.js" defer></script>
  <script src="/js/reading-progress.js" defer></script>
</body>

</html>
