{{ $allPages := where .Site.Pages "Section" "blog" }}

{{/* æœ€æ–°è¨˜äº‹: ã€Œè«–æ–‡ã€ã‚¿ã‚°ã‚’æŒãŸãªã„è¨˜äº‹ã‹ã‚‰æœ€æ–°Nä»¶ */}}
{{ $regularPages := slice }}
{{ range $allPages }}
  {{ $hasPaper := false }}
  {{ range (.GetTerms "tags") }}
    {{ if eq .LinkTitle "è«–æ–‡" }}{{ $hasPaper = true }}{{ end }}
  {{ end }}
  {{ if and (not $hasPaper) (ne .Title "blog") (ne .Title "Blogs") }}
    {{ $regularPages = $regularPages | append . }}
  {{ end }}
{{ end }}
{{ $recentPages := $regularPages | first .Site.Params.latestPostNum }}

<h2 class="section-title">ğŸ“š æœ€æ–°è¨˜äº‹</h2>
<ul class="card-list card-list--grid">
  {{ range $recentPages }}
  <li class="card-item">
    <a href="{{ .Permalink }}" class="card-link">
      <span class="card-emoji">{{ partial "tag-icon.html" . }}</span>
      <div class="card-body">
        <span class="card-title">{{ .Title }}</span>
        <div class="card-bottom">
          <span class="card-date">
            <time datetime='{{ .Date.Format "2006-01-02" }}'>
              {{ .Date.Format "2006/01/02" }}
            </time>
          </span>
          {{ $wordCount := .WordCount }}
          {{ $readingTime := div $wordCount 500 }}
          {{ if lt $readingTime 1 }}{{ $readingTime = 1 }}{{ end }}
          <span class="card-reading-time">ğŸ“– ç´„{{ $readingTime }}åˆ†</span>
          {{ with (.GetTerms "tags") }}
          <span class="card-tags">
            {{ range (first 3 .) }}
            <span class="card-tag-badge">{{ partial "tag-badge-icon.html" .LinkTitle }}{{ .LinkTitle }}</span>
            {{ end }}
          </span>
          {{ end }}
        </div>
      </div>
    </a>
  </li>
  {{ end }}
</ul>
<div style="text-align: center; margin-top: 0.5rem; margin-bottom: 0.5rem;">
  <a href="/blog/" class="view-all-link">ã™ã¹ã¦ã®è¨˜äº‹ä¸€è¦§ã¸</a>
</div>

{{/* LLMè«–æ–‡ã‚µãƒ¼ãƒ™ã‚¤: ã€Œè«–æ–‡ã€ã‚¿ã‚°ã‚’æŒã¤è¨˜äº‹ã‹ã‚‰æœ€æ–°Nä»¶ */}}
{{ $paperPages := slice }}
{{ range $allPages }}
  {{ $hasPaper := false }}
  {{ range (.GetTerms "tags") }}
    {{ if eq .LinkTitle "è«–æ–‡" }}{{ $hasPaper = true }}{{ end }}
  {{ end }}
  {{ if and $hasPaper (ne .Title "blog") (ne .Title "Blogs") }}
    {{ $paperPages = $paperPages | append . }}
  {{ end }}
{{ end }}
{{ $llmPages := $paperPages | first .Site.Params.llmSurveyNum }}

{{ if gt (len $llmPages) 0 }}
<h2 class="section-title">ğŸ“„ LLMè«–æ–‡ã‚µãƒ¼ãƒ™ã‚¤</h2>
<ul class="card-list">
  {{ range $llmPages }}
  <li class="card-item">
    <a href="{{ .Permalink }}" class="card-link">
      <span class="card-emoji">{{ partial "tag-icon.html" . }}</span>
      <div class="card-body">
        <span class="card-title">{{ .Title }}</span>
        <div class="card-bottom">
          <span class="card-date">
            <time datetime='{{ .Date.Format "2006-01-02" }}'>
              {{ .Date.Format "2006/01/02" }}
            </time>
          </span>
          {{ $wordCount := .WordCount }}
          {{ $readingTime := div $wordCount 500 }}
          {{ if lt $readingTime 1 }}{{ $readingTime = 1 }}{{ end }}
          <span class="card-reading-time">ğŸ“– ç´„{{ $readingTime }}åˆ†</span>
          {{ with (.GetTerms "tags") }}
          <span class="card-tags">
            {{ range (first 3 .) }}
            <span class="card-tag-badge">{{ partial "tag-badge-icon.html" .LinkTitle }}{{ .LinkTitle }}</span>
            {{ end }}
          </span>
          {{ end }}
        </div>
      </div>
    </a>
  </li>
  {{ end }}
</ul>
{{ end }}
