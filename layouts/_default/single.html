{{ define "main" }}
<div class="article-layout">
  <article class="article-main">
    {{ if not .Params.menu }}
    {{ partial "breadcrumb.html" . }}
    {{ end }}
    <div class="article-card">
      <div class="article-header">
        <div class="article-emoji">{{ partial "tag-icon.html" . }}</div>
        <h1>{{ .Title }}</h1>
        {{ if not .Params.menu }}
        <div class="article-meta">
          <time class="article-date" datetime='{{ .Date.Format "2006-01-02" }}'>
            {{ i18n "publishedOn" }} {{ .Date.Format "2006/01/02" }}
          </time>
          {{ $wordCount := .WordCount }}
          {{ $readingTime := div $wordCount 500 }}
          {{ if lt $readingTime 1 }}{{ $readingTime = 1 }}{{ end }}
          <span class="reading-time">ðŸ“– {{ i18n "readingTime" (dict "Minutes" $readingTime) }}</span>
        </div>
        <div class="article-tags">
          {{ range (.GetTerms "tags") }}
          <a href="{{ .Permalink }}" class="tag-badge">{{ partial "tag-badge-icon.html" .LinkTitle }}{{ .LinkTitle }}</a>
          {{ end }}
        </div>
        {{ end }}
      </div>
      <div class="article-content">
        {{ .Content }}
      </div>
    </div>

    <!-- GitHub Edit Link -->
    {{ if not .Params.menu }}
    {{ with .File }}
    <a href="https://github.com/zatoima/zatoima.github.io/edit/main/content/{{ .Path }}" target="_blank" rel="noopener noreferrer" class="github-edit-link">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
      {{ i18n "editOnGitHub" }}
    </a>
    {{ end }}
    {{ end }}

    <!-- Prev/Next Navigation -->
    {{ if not .Params.menu }}
    <nav class="prev-next-nav">
      {{ with .PrevInSection }}
      <a href="{{ .Permalink }}" class="prev-next-link prev-link">
        <span class="prev-next-label">{{ i18n "prevArticle" }}</span>
        <span class="prev-next-title">{{ .Title | truncate 50 }}</span>
      </a>
      {{ else }}
      <div class="prev-next-link prev-link empty"></div>
      {{ end }}
      {{ with .NextInSection }}
      <a href="{{ .Permalink }}" class="prev-next-link next-link">
        <span class="prev-next-label">{{ i18n "nextArticle" }}</span>
        <span class="prev-next-title">{{ .Title | truncate 50 }}</span>
      </a>
      {{ else }}
      <div class="prev-next-link next-link empty"></div>
      {{ end }}
    </nav>
    {{ end }}

    {{ partial "post-footer.html" . }}
  </article>

  {{ if .TableOfContents }}
  <aside class="article-sidebar">
    <div class="toc-container">
      <div class="toc-title">{{ i18n "toc" }}</div>
      {{ .TableOfContents }}
    </div>
  </aside>
  {{ end }}
</div>
{{ end }}
